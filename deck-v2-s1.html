<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loop Protect — Sections 1, 2 &amp; 3</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

<style>
  :root {
    --bg: #000000;
    --blue: #58C4DD;
    --blue-dark: #1C758A;
    --blue-light: #9CDCEB;
    --green: #83C167;
    --green-dark: #699C52;
    --teal: #5CD0B3;
    --red: #FC6255;
    --red-dark: #CF5044;
    --red-light: #FF8080;
    --yellow: #FFFF00;
    --gold: #F0AC5F;
    --white: #FFFFFF;
    --gray-light: #C0C0C0;
    --gray: #888888;
    --gray-dark: #444444;
    --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
    --ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);
    --duration: 800ms;
    --duration-fast: 500ms;
    --duration-slow: 1200ms;
  }

  /* Click pulse animation - shows when element appears */
  @keyframes clickPulse {
    0% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0.6); }
    50% { box-shadow: 0 0 0 15px rgba(76, 217, 100, 0); }
    100% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0); }
  }

  .visible.just-clicked {
    animation: clickPulse 0.6s ease-out;
  }

  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--white);
    font-family: 'Lato', -apple-system, sans-serif;
    overflow: hidden;
    width: 100vw;
    height: 100vh;
    cursor: pointer;
    -webkit-font-smoothing: antialiased;
  }

  /* ── SLIDE SYSTEM ── */
  .slide {
    position: absolute;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity var(--duration) var(--ease-out);
  }
  .slide.active {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  /* ── SLIDE TITLE (top of each slide) ── */
  .slide-title {
    position: absolute;
    top: 48px;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    font-size: 1.5rem;
    font-weight: 300;
    letter-spacing: 0.03em;
    color: var(--gray-light);
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .slide-title.visible {
    opacity: 1;
  }

  /* ── CALLOUT ── */
  .callout {
    position: absolute;
    bottom: 64px;
    text-align: center;
    max-width: 720px;
    font-size: 1.3rem;
    font-weight: 300;
    line-height: 1.7;
    color: var(--gray);
    opacity: 0;
    transform: translateY(12px);
    transition:
      opacity var(--duration-slow) var(--ease-out),
      transform var(--duration-slow) var(--ease-out);
  }
  .callout.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .callout em { color: var(--blue); font-style: normal; font-weight: 400; }
  .callout .warn { color: var(--red); font-weight: 400; }
  .callout .green { color: var(--green); font-weight: 400; }
  .callout .gold { color: var(--gold); font-weight: 400; }

  /* ── FADE UTILITY ── */
  .fade {
    opacity: 0;
    transform: translateY(8px);
    transition:
      opacity var(--duration) var(--ease-out),
      transform var(--duration) var(--ease-out);
  }
  .fade.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .fade.scale {
    transform: scale(0.92);
  }
  .fade.scale.visible {
    transform: scale(1);
  }

  /* ── NAV UI ── */
  .nav-hint {
    position: fixed; bottom: 20px; left: 50%;
    transform: translateX(-50%);
    font-size: 0.7rem; color: var(--gray-dark);
    letter-spacing: 0.05em; text-transform: uppercase;
    transition: opacity 1.5s ease;
    z-index: 100;
  }

  /* ── AUDIO PLAYER CONTROLS ── */
  .audio-controls {
    position: fixed;
    bottom: 20px;
    right: 30px;
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 200;
    background: rgba(0,0,0,0.8);
    padding: 10px 16px;
    border-radius: 30px;
    border: 1px solid var(--gray-dark);
  }
  .audio-btn {
    background: none;
    border: none;
    color: var(--gray-light);
    cursor: pointer;
    font-size: 1.2rem;
    padding: 6px 10px;
    border-radius: 6px;
    transition: all 0.2s;
  }
  .audio-btn:hover {
    color: var(--white);
    background: var(--gray-dark);
  }
  .audio-btn.active {
    color: var(--teal);
  }
  .audio-progress {
    width: 120px;
    height: 4px;
    background: var(--gray-dark);
    border-radius: 2px;
    overflow: hidden;
  }
  .audio-progress-bar {
    height: 100%;
    background: var(--teal);
    width: 0%;
    transition: width 0.1s linear;
  }
  .audio-status {
    font-size: 0.7rem;
    color: var(--gray);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    min-width: 60px;
  }
  .nav-hint.hidden { opacity: 0; }
  .step-counter {
    position: fixed; bottom: 20px; right: 28px;
    font-size: 0.7rem; color: var(--gray-dark);
    font-variant-numeric: tabular-nums; letter-spacing: 0.04em;
    z-index: 100;
  }
  .slide-label {
    position: fixed; bottom: 20px; left: 28px;
    font-size: 0.7rem; color: var(--gray-dark);
    font-variant-numeric: tabular-nums; letter-spacing: 0.04em;
    z-index: 100;
  }
  kbd {
    display: inline-block; padding: 1px 5px;
    font-size: 0.65rem; font-family: 'Lato', sans-serif;
    color: var(--gray-dark);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 3px; margin: 0 1px;
  }

  /* ── SLIDE 0.1: INTRO ── */
  /* (reuses fade utility) */

  /* ── SLIDE 1.1: THREE CHANNELS ── */
  .channel-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 220px;
    height: 180px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 16px;
    opacity: 0;
    transform: translateY(12px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out),
                border-color var(--duration) var(--ease-out);
  }
  .channel-card.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .channel-card.highlight {
    border-color: var(--gold);
  }
  .channel-card.dim {
    opacity: 0.35;
    border-color: var(--gray-dark);
  }
  .channel-icon { font-size: 2.8rem; margin-bottom: 10px; }
  .channel-name { font-size: 1.15rem; font-weight: 700; letter-spacing: 0.03em; }
  .channel-sub { font-size: 0.85rem; font-weight: 300; color: var(--gray); margin-top: 4px; text-align: center; line-height: 1.4; }

  /* ── SLIDE 1.2: DELIVERY FLOW ── */
  .flow-svg { width: 900px; height: 360px; }
  .node-group {
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .node-group.visible { opacity: 1; }
  .node-rect {
    fill: none; stroke-width: 1.5; rx: 12; ry: 12;
  }
  .node-rect.c-blue { stroke: var(--blue); }
  .node-rect.c-teal { stroke: var(--teal); }
  .node-rect.c-gold { stroke: var(--gold); }
  .node-icon { font-size: 28px; text-anchor: middle; dominant-baseline: middle; }
  .node-label-text {
    fill: var(--white); font-family: 'Lato', sans-serif;
    font-size: 18px; font-weight: 700; text-anchor: middle;
    letter-spacing: 0.03em;
  }
  .node-sub {
    fill: var(--gray); font-family: 'Lato', sans-serif;
    font-size: 15px; font-weight: 300; text-anchor: middle;
  }
  .flow-arrow {
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .flow-arrow.visible { opacity: 1; }
  .arrow-line {
    fill: none; stroke: var(--gray-dark); stroke-width: 1.5; stroke-dasharray: 6 4;
  }
  .return-arrow {
    opacity: 0;
    transition: opacity var(--duration-slow) var(--ease-out);
  }
  .return-arrow.visible { opacity: 0.8; }
  .return-path { fill: none; stroke-width: 1.2; stroke-dasharray: 5 3; }
  .return-path.bp { stroke: var(--blue); }
  .return-path.gp { stroke: var(--gold); }
  .return-label {
    font-family: 'Lato', sans-serif; font-size: 15px; font-weight: 300;
  }
  .return-label.bl { fill: var(--blue-light); }
  .return-label.gl { fill: var(--gold); }
  .svg-annotation {
    fill: var(--gray); font-family: 'Lato', sans-serif;
    font-size: 15px; font-weight: 300; font-style: italic;
    opacity: 0; transition: opacity var(--duration) var(--ease-out);
  }
  .svg-annotation.visible { opacity: 0.7; }

  /* ── REVENUE BAR ── */
  .bar-container {
    position: relative;
    width: 700px;
    height: 80px;
  }
  .bar-segment {
    position: absolute;
    top: 0;
    height: 80px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    font-weight: 700;
    letter-spacing: 0.04em;
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out),
                width var(--duration-slow) var(--ease-in-out),
                left var(--duration-slow) var(--ease-in-out);
  }
  .bar-label {
    position: absolute;
    top: 96px;
    font-size: 0.85rem;
    font-weight: 300;
    color: var(--gray);
    text-align: center;
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .bar-label.visible { opacity: 1; }
  .bar-bracket {
    position: absolute;
    font-size: 0.85rem;
    font-weight: 300;
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .bar-bracket.visible { opacity: 1; }

  /* ── DOWNTIME (split view) ── */
  .phone {
    width: 220px;
    height: 440px;
    border: 2px solid var(--gray-dark);
    border-radius: 28px;
    position: relative;
    overflow: hidden;
  }
  .phone-notch {
    width: 80px; height: 20px;
    background: var(--bg);
    border-radius: 0 0 12px 12px;
    position: absolute; top: 0; left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    border: 1px solid var(--gray-dark);
    border-top: none;
  }
  .app-header {
    height: 48px;
    display: flex; align-items: flex-end; justify-content: center;
    padding-bottom: 6px;
    font-size: 0.8rem; font-weight: 700;
    letter-spacing: 0.08em;
    color: var(--gray);
    text-transform: uppercase;
  }
  .listing {
    margin: 10px 14px 0;
    border: 1px solid var(--gray-dark); border-radius: 10px;
    overflow: hidden;
  }
  .listing-img {
    height: 80px;
    background: linear-gradient(135deg, var(--blue-dark) 0%, #0d3340 100%);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.8rem;
  }
  .listing-body { padding: 8px 10px; }
  .listing-name { font-size: 0.9rem; font-weight: 700; margin-bottom: 2px; }
  .listing-meta {
    font-size: 0.7rem; color: var(--gray);
    display: flex; gap: 6px;
  }
  .listing-meta .star { color: var(--gold); }
  .unavailable-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.78);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    z-index: 20; border-radius: 26px;
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .unavailable-overlay.visible { opacity: 1; }
  .unavailable-overlay .ico { font-size: 2.2rem; margin-bottom: 8px; }
  .unavailable-overlay .txt {
    font-size: 0.9rem; font-weight: 700;
    color: var(--red); letter-spacing: 0.05em; text-transform: uppercase;
  }
  .split-view {
    display: flex;
    gap: 80px;
    align-items: center;
  }
  .split-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .split-panel.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .split-label {
    font-size: 0.85rem;
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--gray);
    margin-bottom: 4px;
  }
  .split-icon { font-size: 3.5rem; }
  .split-desc {
    font-size: 1rem;
    font-weight: 300;
    color: var(--gray-light);
    text-align: center;
    max-width: 240px;
    line-height: 1.5;
  }
  .vs-divider {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--gray-dark);
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .vs-divider.visible { opacity: 1; }

  /* ── CHARGEBACKS ── */
  .chargeback-flow {
    display: flex;
    align-items: center;
    gap: 24px;
  }
  .cb-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 150px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .cb-step.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .cb-icon { font-size: 2.4rem; margin-bottom: 8px; }
  .cb-label { font-size: 0.95rem; font-weight: 400; text-align: center; line-height: 1.4; }
  .cb-arrow {
    font-size: 1.5rem;
    color: var(--gray-dark);
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .cb-arrow.visible { opacity: 1; }
  .cb-deduction {
    margin-top: 24px;
    padding: 12px 28px;
    border: 1.5px solid var(--red);
    border-radius: 10px;
    font-size: 1rem;
    font-weight: 400;
    color: var(--red);
    opacity: 0;
    transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .cb-deduction.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* ── SCORECARD ── */
  .metric-row {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 14px 24px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 10px;
    width: 500px;
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .metric-row.visible {
    opacity: 1;
    transform: translateX(0);
  }
  .metric-num {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--blue);
    min-width: 28px;
  }
  .metric-name {
    font-size: 1.05rem;
    font-weight: 400;
  }
  .badge-row {
    display: flex;
    gap: 20px;
    margin-top: 12px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .badge-row.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .badge-pill {
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 700;
    letter-spacing: 0.03em;
  }
  .badge-pill.ue { background: var(--green-dark); color: #000; }
  .badge-pill.dd { background: var(--red); color: #000; }

  /* ── THREE PRODUCTS ── */
  .product-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 240px;
    padding: 28px 20px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 16px;
    opacity: 0;
    transform: translateY(14px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out),
                border-color var(--duration) var(--ease-out);
  }
  .product-card.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .product-card.c-teal { border-color: var(--teal); }
  .product-card.c-green { border-color: var(--green); }
  .product-card.c-blue { border-color: var(--blue); }
  .product-card.c-gold { border-color: var(--gold); }
  .product-icon { font-size: 2rem; margin-bottom: 10px; }
  .product-name { font-size: 1.2rem; font-weight: 700; margin-bottom: 6px; }
  .product-desc {
    font-size: 0.85rem; font-weight: 300; color: var(--gray);
    text-align: center; line-height: 1.5;
  }
  .product-maps {
    margin-top: 10px;
    font-size: 0.75rem;
    font-weight: 400;
    color: var(--gray-dark);
    letter-spacing: 0.04em;
    text-transform: uppercase;
  }

  /* ═══════════════════════════════════════
     SCREENSHOT SLIDES — ZOOMED CROP LAYOUT
     ═══════════════════════════════════════ */
  .screenshot-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 8px;
    gap: 12px;
  }
  .screenshot-img {
    width: 90%;
    height: 420px;
    border-radius: 10px;
    border: 2px solid var(--gray-dark);
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    object-fit: cover;
    object-position: top center;
  }
  /* Zoomed crops for specific slides */
  .screenshot-img.zoom-guard {
    object-position: 0% 0%; /* Top-left: summary cards + metrics */
    height: 380px;
  }
  .screenshot-img.zoom-recover {
    object-position: 0% 0%; /* Top: funnel flow */
    height: 340px;
  }
  .screenshot-img.zoom-reengage {
    object-position: 0% 0%; /* Top: stats cards */
    height: 320px;
  }
  .screenshot-img.zoom-sotu {
    object-position: 0% 0%; /* Top: breakdown + cards */
    height: 380px;
  }
  .screenshot-caption {
    width: 85%;
    padding: 12px 20px;
    background: rgba(255,255,255,0.03);
    border-radius: 8px;
    border: 1px solid var(--gray-dark);
    display: flex;
    justify-content: center;
    gap: 32px;
    flex-wrap: wrap;
  }
  .screenshot-caption .metric {
    display: flex;
    align-items: baseline;
    gap: 6px;
  }
  .screenshot-caption .metric-label {
    font-size: 0.8rem;
    font-weight: 400;
    color: var(--gray);
  }
  .screenshot-caption .metric-value {
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--gray-light);
  }
  .screenshot-caption .metric-value.green { color: var(--green); }
  .screenshot-caption .metric-value.red { color: var(--red); }
  .screenshot-caption .metric-value.blue { color: var(--blue); }
  .screenshot-caption .metric-value.gold { color: var(--gold); }
  /* Legacy support for old explain panels (hidden by default) */
  .screenshot-explain {
    display: none;
  }
  .screenshot-placeholder {
    width: 85%;
    height: 380px;
    border-radius: 10px;
    border: 2px dashed var(--gray-dark);
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255,255,255,0.02);
  }
  .screenshot-placeholder span {
    color: var(--gray);
    font-size: 0.85rem;
    font-weight: 300;
  }

  /* ═══════════════════════════════════════
     SECTION 2 — GUARD
     ═══════════════════════════════════════ */

  /* ── CHAIN SVG (tech chain, Guard intro) ── */
  .chain-svg { width: 960px; height: 420px; }
  .chain-node {
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .chain-node.visible { opacity: 1; }
  .chain-node.dim { opacity: 0.25; }

  /* ── BREAK POINT COLUMNS ── */
  .bp-col {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 260px;
    padding: 24px 16px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 14px;
    opacity: 0;
    transform: translateY(12px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out),
                border-color var(--duration) var(--ease-out);
  }
  .bp-col.visible { opacity: 1; transform: translateY(0); }
  .bp-col.c-red { border-color: var(--red); }
  .bp-col.c-gold { border-color: var(--gold); }
  .bp-col.c-blue { border-color: var(--blue); }
  .bp-num {
    font-size: 0.75rem; font-weight: 700; letter-spacing: 0.08em;
    text-transform: uppercase; color: var(--gray); margin-bottom: 8px;
  }
  .bp-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 12px; text-align: center; }
  .bp-list {
    font-size: 0.82rem; font-weight: 300; color: var(--gray-light);
    line-height: 1.6; text-align: left; width: 100%;
  }
  .bp-list li { margin-bottom: 4px; list-style: none; padding-left: 12px; position: relative; }
  .bp-list li::before { content: '·'; position: absolute; left: 0; color: var(--gray); }
  .bp-note {
    margin-top: 12px; font-size: 0.75rem; font-weight: 300;
    color: var(--gray); font-style: italic; text-align: center;
  }

  /* ── DETECTION CARDS ── */
  .detect-card {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 18px 20px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 12px;
    width: 420px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .detect-card.visible { opacity: 1; transform: translateY(0); }
  .detect-name { font-size: 1rem; font-weight: 700; margin-bottom: 4px; }
  .detect-desc { font-size: 0.85rem; font-weight: 300; color: var(--gray-light); line-height: 1.5; }
  .detect-platform {
    margin-top: 8px; font-size: 0.72rem; font-weight: 700;
    letter-spacing: 0.06em; text-transform: uppercase;
  }
  .detect-platform .dd { color: var(--red); }
  .detect-platform .ue { color: var(--green); }
  .detect-platform .both { color: var(--blue); }

  /* ── RESTORE MODE CARDS ── */
  .mode-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 260px;
    padding: 24px 16px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 14px;
    opacity: 0;
    transform: translateY(12px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out),
                border-color var(--duration) var(--ease-out);
  }
  .mode-card.visible { opacity: 1; transform: translateY(0); }
  .mode-card.c-blue { border-color: var(--blue); }
  .mode-card.c-gold { border-color: var(--gold); }
  .mode-card.c-red { border-color: var(--red); }
  .mode-name { font-size: 1.15rem; font-weight: 700; margin-bottom: 10px; }
  .mode-covers { font-size: 0.85rem; font-weight: 300; color: var(--gray-light); text-align: center; line-height: 1.5; margin-bottom: 10px; }
  .mode-risk { font-size: 0.82rem; font-weight: 400; margin-bottom: 14px; }
  .mode-bar-bg {
    width: 200px; height: 10px; border-radius: 5px;
    background: var(--gray-dark);
  }
  .mode-bar-fill { height: 10px; border-radius: 5px; }

  /* ── ESCALATION EVENTS ── */
  .esc-event {
    display: flex; align-items: center; gap: 20px;
    padding: 16px 24px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 10px;
    width: 620px;
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .esc-event.visible { opacity: 1; transform: translateX(0); }
  .esc-num { font-size: 1.3rem; font-weight: 700; min-width: 32px; text-align: center; }
  .esc-action { font-size: 1rem; font-weight: 400; flex: 1; }
  .esc-result { font-size: 1rem; font-weight: 700; }

  /* ── METRIC CALC SLIDES ── */
  .calc-box {
    display: flex; flex-direction: column; align-items: center;
    padding: 28px 36px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 14px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .calc-box.visible { opacity: 1; transform: translateY(0); }
  .calc-formula {
    font-size: 1.4rem; font-weight: 300; letter-spacing: 0.02em;
    text-align: center; line-height: 1.8;
  }
  .calc-example {
    margin-top: 20px; padding: 16px 24px;
    background: rgba(255,255,255,0.04);
    border-radius: 10px;
    font-size: 1.05rem; font-weight: 300;
    color: var(--gray-light); text-align: center; line-height: 1.7;
  }

  /* ── NOTIFICATION TIERS ── */
  .notif-card {
    display: flex; flex-direction: column; align-items: center;
    width: 220px; padding: 24px 16px;
    border: 1.5px solid var(--gray-dark);
    border-radius: 14px;
    opacity: 0;
    transform: translateY(12px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .notif-card.visible { opacity: 1; transform: translateY(0); }
  .notif-icon { font-size: 1.8rem; margin-bottom: 8px; }
  .notif-name { font-size: 1.05rem; font-weight: 700; margin-bottom: 6px; }
  .notif-desc { font-size: 0.82rem; font-weight: 300; color: var(--gray); text-align: center; line-height: 1.5; }
  .notif-channel { margin-top: 10px; font-size: 0.72rem; font-weight: 700; color: var(--gray-dark); letter-spacing: 0.04em; text-transform: uppercase; }

  /* ── GUARD LOOP ── */
  .loop-node {
    display: flex; flex-direction: column; align-items: center;
    opacity: 0; transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .loop-node.visible { opacity: 1; transform: translateY(0); }
  .loop-icon { font-size: 2rem; margin-bottom: 6px; }
  .loop-label { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; }
  .loop-desc { font-size: 0.78rem; font-weight: 300; color: var(--gray); text-align: center; line-height: 1.4; max-width: 140px; }

  /* ══════════════════════════════════════
     SECTION 3 — RECOVER
     ══════════════════════════════════════ */

  /* ── ORDER TREE ── */
  .tree-node {
    display: flex; flex-direction: column; align-items: center;
    padding: 18px 28px; border-radius: 12px;
    border: 1.5px solid var(--gray-dark);
    opacity: 0; transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .tree-node.visible { opacity: 1; transform: translateY(0); }
  .tree-label { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; }
  .tree-desc { font-size: 0.82rem; font-weight: 300; color: var(--gray); text-align: center; line-height: 1.5; max-width: 260px; }

  /* ── PIPELINE STEPS ── */
  .pipe-step {
    display: flex; flex-direction: column; align-items: center;
    opacity: 0; transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .pipe-step.visible { opacity: 1; transform: translateY(0); }
  .pipe-circle {
    width: 64px; height: 64px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.6rem;
    border: 1.5px solid var(--gray-dark);
    margin-bottom: 8px;
  }
  .pipe-name { font-size: 0.85rem; font-weight: 700; letter-spacing: 0.03em; }
  .pipe-sub { font-size: 0.7rem; font-weight: 300; color: var(--gray); margin-top: 2px; }
  .pipe-arrow {
    font-size: 1.2rem; color: var(--gray-dark); margin: 0 8px;
    opacity: 0;
    transition: opacity var(--duration) var(--ease-out);
  }
  .pipe-arrow.visible { opacity: 1; }

  /* ── GATE STEPS ── */
  .gate-step {
    display: flex; align-items: center; gap: 14px;
    padding: 14px 24px; border-radius: 10px;
    border: 1.5px solid var(--gray-dark);
    width: 520px;
    opacity: 0; transform: translateX(-12px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .gate-step.visible { opacity: 1; transform: translateX(0); }
  .gate-num { font-size: 1.4rem; font-weight: 700; min-width: 32px; text-align: center; }
  .gate-text { font-size: 0.95rem; font-weight: 300; color: var(--gray-light); line-height: 1.5; }
  .gate-arrow {
    font-size: 1rem; color: var(--gray-dark);
    opacity: 0; transition: opacity var(--duration) var(--ease-out);
  }
  .gate-arrow.visible { opacity: 1; }

  /* ── LIFECYCLE STATUS ── */
  .lc-status {
    display: flex; flex-direction: column; align-items: center;
    opacity: 0; transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .lc-status.visible { opacity: 1; transform: translateY(0); }
  .lc-dot {
    width: 48px; height: 48px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.3rem; margin-bottom: 8px;
    border: 1.5px solid var(--gray-dark);
  }
  .lc-name { font-size: 0.8rem; font-weight: 700; letter-spacing: 0.03em; }
  .lc-sub { font-size: 0.65rem; font-weight: 300; color: var(--gray); margin-top: 2px; }

  /* ── FINANCIAL BUCKET ── */
  .fin-bucket {
    display: flex; flex-direction: column; align-items: center;
    padding: 20px 24px; border-radius: 12px;
    border: 1.5px solid var(--gray-dark);
    width: 280px;
    opacity: 0; transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .fin-bucket.visible { opacity: 1; transform: translateY(0); }
  .fin-name { font-size: 1rem; font-weight: 700; margin-bottom: 6px; }
  .fin-desc { font-size: 0.78rem; font-weight: 300; color: var(--gray); text-align: center; line-height: 1.5; }
  .fin-code { font-family: monospace; font-size: 0.68rem; color: var(--gray-dark); margin-top: 8px; padding: 4px 10px; background: rgba(255,255,255,0.04); border-radius: 4px; }

  /* ── DIAGNOSTIC TREE ── */
  .diag-branch {
    padding: 16px 20px; border-radius: 10px;
    border: 1.5px solid var(--gray-dark);
    width: 340px;
    opacity: 0; transform: translateY(10px);
    transition: opacity var(--duration) var(--ease-out),
                transform var(--duration) var(--ease-out);
  }
  .diag-branch.visible { opacity: 1; transform: translateY(0); }
  .diag-title { font-size: 1rem; font-weight: 700; margin-bottom: 8px; }
  .diag-item { font-size: 0.82rem; font-weight: 300; color: var(--gray); line-height: 1.7; }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      transition-duration: 0.01ms !important;
      animation-duration: 0.01ms !important;
    }
  }
</style>
</head>
<body>

<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 0.1 — Introduction
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-0-1">
  <div class="fade scale" id="s01-title" style="
    position: absolute; top: 38%; left: 50%; transform: translate(-50%, -50%);
    text-align: center;
  ">
    <div style="
      font-size: 3.6rem; font-weight: 700; letter-spacing: 0.04em;
      color: #58C4DD;
    ">Protect</div>
    <div style="
      margin-top: 12px; font-size: 0.95rem; letter-spacing: 0.12em;
      text-transform: uppercase; color: rgba(255,255,255,0.4);
    ">A Loop Module</div>
  </div>
  <div class="fade" id="s01-subtitle" style="
    position: absolute; top: 58%; left: 50%; transform: translateX(-50%);
    text-align: center; max-width: 640px;
  ">
    <div style="
      font-size: 1.05rem; font-weight: 300; line-height: 1.7;
      color: rgba(255,255,255,0.55);
    ">How delivery works, where money leaks,<br>and how to fix the metrics that matter.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 1.1 — "How a Restaurant Makes Money"
     Steps: 0=blank, 1=dine-in, 2=takeout, 3=delivery highlighted,
            4=dine-in/takeout dim + delivery callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-1-1">
  <div class="slide-title" id="s11-title">How a Restaurant Makes Money</div>

  <div style="display: flex; gap: 40px; margin-top: 20px;">
    <div class="channel-card" id="s11-c0">
      <div class="channel-icon">&#127869;</div>
      <div class="channel-name">Dine-In</div>
      <div class="channel-sub">The restaurant sees the customer.<br>Full control of the experience.</div>
    </div>
    <div class="channel-card" id="s11-c1">
      <div class="channel-icon">&#128230;</div>
      <div class="channel-name">Takeout</div>
      <div class="channel-sub">Customer walks in,<br>picks up, leaves.</div>
    </div>
    <div class="channel-card" id="s11-c2">
      <div class="channel-icon">&#128666;</div>
      <div class="channel-name">Delivery</div>
      <div class="channel-sub">Food goes to a stranger.<br>The restaurant loses visibility.</div>
    </div>
  </div>

  <div class="callout" id="s11-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 1.2 — "Delivery: The Restaurant Loses Control"
     Steps: 0=blank, 1=restaurant, 2=+platform, 3=+customer,
            4=return arrow + annotation + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-1-2">
  <div class="slide-title" id="s12-title">Delivery: The Restaurant Loses Control</div>

  <svg class="flow-svg" viewBox="0 0 900 360" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <marker id="ah-gray" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
        <path d="M0,0 L8,3 L0,6" fill="none" stroke="#888" stroke-width="1"/>
      </marker>
      <marker id="ah-gold" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
        <path d="M0,0 L8,3 L0,6" fill="none" stroke="#F0AC5F" stroke-width="1"/>
      </marker>
    </defs>

    <!-- Node: RESTAURANT -->
    <g class="node-group" id="s12-n0">
      <rect class="node-rect c-gold" x="40" y="100" width="180" height="100" />
      <text class="node-icon" x="130" y="140">&#127859;</text>
      <text class="node-label-text" x="130" y="178">RESTAURANT</text>
    </g>
    <!-- Arrow 0 -->
    <g class="flow-arrow" id="s12-a0">
      <line class="arrow-line" x1="224" y1="150" x2="346" y2="150" marker-end="url(#ah-gray)"/>
    </g>
    <!-- Node: PLATFORM -->
    <g class="node-group" id="s12-n1">
      <rect class="node-rect c-teal" x="350" y="100" width="200" height="100"/>
      <text class="node-icon" x="450" y="135">&#128241;</text>
      <text class="node-label-text" x="450" y="168">PLATFORM</text>
      <text class="node-sub" x="450" y="186">DoorDash / UberEats / GH</text>
    </g>
    <!-- Arrow 1 -->
    <g class="flow-arrow" id="s12-a1">
      <line class="arrow-line" x1="554" y1="150" x2="676" y2="150" marker-end="url(#ah-gray)"/>
    </g>
    <!-- Node: CUSTOMER -->
    <g class="node-group" id="s12-n2">
      <rect class="node-rect c-blue" x="680" y="100" width="180" height="100"/>
      <text class="node-icon" x="770" y="140">&#128100;</text>
      <text class="node-label-text" x="770" y="178">CUSTOMER</text>
    </g>
    <!-- Return: Payout -->
    <g class="return-arrow" id="s12-ret">
      <path class="return-path gp" d="M 400,204 C 400,290 170,290 170,204" marker-end="url(#ah-gold)"/>
      <text class="return-label gl" x="285" y="285" text-anchor="middle">
        <tspan x="285">Payout minus commissions</tspan>
      </text>
    </g>
    <!-- Annotation -->
    <text class="svg-annotation" id="s12-ann" x="450" y="340" text-anchor="middle">
      Platform controls: listing, ordering, payment, delivery. Restaurant controls: making the food.
    </text>
  </svg>

  <div class="callout" id="s12-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 1.3 — "Downtime: The Invisible Loss"
     (was 1.4 — now comes BEFORE the revenue bar)
     Steps: 0=blank, 1=restaurant interior, 2=phone unavailable,
            3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-1-3">
  <div class="slide-title" id="s13-title">Downtime: The Invisible Loss</div>

  <div class="split-view">
    <!-- LEFT: Inside the restaurant -->
    <div class="split-panel" id="s13-left">
      <div class="split-label">Inside the restaurant</div>
      <div class="split-icon">&#127859;</div>
      <div class="split-desc">Kitchen running. Staff ready.<br>Dine-in busy. Everything looks fine.</div>
    </div>

    <div class="vs-divider" id="s13-vs">but</div>

    <!-- RIGHT: On the app -->
    <div class="split-panel" id="s13-right">
      <div class="split-label">On the app</div>
      <div class="phone" style="width: 180px; height: 320px;">
        <div class="phone-notch" style="width: 60px; height: 16px;"></div>
        <div class="app-header" style="height: 40px; font-size: 0.7rem;">Delivery App</div>
        <div class="listing" style="margin: 8px 10px;">
          <div class="listing-img" style="height: 60px; font-size: 1.4rem;">&#127860;</div>
          <div class="listing-body" style="padding: 6px 8px;">
            <div class="listing-name" style="font-size: 0.8rem;">The Restaurant</div>
            <div class="listing-meta" style="font-size: 0.65rem;">
              <span class="star">&#9733; 4.6</span>
              <span>25-35 min</span>
            </div>
          </div>
        </div>
        <div class="unavailable-overlay" id="s13-unavail">
          <div class="ico" style="font-size: 1.8rem;">&#x26A0;</div>
          <div class="txt" style="font-size: 0.75rem;">Currently Unavailable</div>
        </div>
      </div>
    </div>
  </div>

  <div class="callout" id="s13-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 1.4 — "Chargebacks: Money Taken Back"
     (was 1.5 — now comes BEFORE the revenue bar)
     Steps: 0=blank, 1=order+make, 2=deliver, 3=complaint,
            4=deduction + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-1-4">
  <div class="slide-title" id="s14-title">Chargebacks: Money Taken Back</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">
    <div class="chargeback-flow">
      <div class="cb-step" id="s14-s0">
        <div class="cb-icon">&#128230;</div>
        <div class="cb-label">Customer<br>orders</div>
      </div>
      <div class="cb-arrow" id="s14-a0">&#10140;</div>
      <div class="cb-step" id="s14-s1">
        <div class="cb-icon">&#127859;</div>
        <div class="cb-label">Restaurant<br>makes food</div>
      </div>
      <div class="cb-arrow" id="s14-a1">&#10140;</div>
      <div class="cb-step" id="s14-s2">
        <div class="cb-icon">&#128666;</div>
        <div class="cb-label">Driver<br>delivers</div>
      </div>
      <div class="cb-arrow" id="s14-a2">&#10140;</div>
      <div class="cb-step" id="s14-s3">
        <div class="cb-icon">&#128542;</div>
        <div class="cb-label">Customer<br>complains</div>
      </div>
    </div>

    <div class="cb-deduction" id="s14-ded">
      Platform refunds customer &#8594; deducted from the restaurant's payout
    </div>
  </div>

  <div class="callout" id="s14-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 1.5 — "Where the Money Goes" (Revenue Bar)
     (was 1.3 — now comes AFTER downtime + chargebacks as synthesis)
     Steps: 0=blank, 1=full bar, 2=shrink + downtime gap,
            3=chargeback slice, 4=net labeled
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-1-5">
  <div class="slide-title" id="s15-title">Where the Money Goes</div>

  <div class="bar-container" id="s15-bar" style="margin-top: 20px;">
    <!-- Full potential bar -->
    <div class="bar-segment" id="s15-full" style="
      left: 0; width: 700px;
      background: linear-gradient(90deg, var(--green-dark), var(--green));
      color: #000;
    ">POTENTIAL REVENUE</div>

    <!-- Net revenue (green, shrinks) -->
    <div class="bar-segment" id="s15-net" style="
      left: 0;
      background: linear-gradient(90deg, var(--green-dark), var(--green));
      color: #000;
    ">NET REVENUE</div>

    <!-- Downtime gap (dark, right side) -->
    <div class="bar-segment" id="s15-down" style="
      background: rgba(255,255,255,0.06);
      border: 1.5px dashed var(--gray-dark);
      color: var(--gray);
      font-weight: 400;
      font-size: 0.85rem;
    ">DOWNTIME<br>Never earned</div>

    <!-- Chargeback slice -->
    <div class="bar-segment" id="s15-cb" style="
      background: var(--red-dark);
      color: #fff;
      font-size: 0.85rem;
    ">CHARGEBACKS<br>Taken back</div>
  </div>

  <!-- Labels below -->
  <div class="bar-label" id="s15-lbl-full" style="left: 50%; transform: translateX(-50%); top: 190px; width: 700px;">
    Everything the restaurant would earn if online 100% of the time, zero errors
  </div>
  <div class="bar-label" id="s15-lbl-result" style="left: 50%; transform: translateX(-50%); top: 190px; width: 700px;">
    What's left is what the restaurant actually keeps
  </div>

  <div class="callout" id="s15-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 1.6 — "Platforms Grade Every Restaurant"
     Steps: 0=blank, 1=title + first metric, 2-4=other metrics,
            5=badges, 6=retention callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-1-6">
  <div class="slide-title" id="s16-title">Platforms Grade Every Restaurant</div>

  <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 10px;">
    <div class="metric-row" id="s16-m0">
      <div class="metric-num">1</div>
      <div class="metric-name">Avoidable Driver Wait Time <span style="font-size: 0.8rem; font-weight: 300; color: var(--gray);">— how long the driver waits beyond the prep time you promised</span></div>
    </div>
    <div class="metric-row" id="s16-m1">
      <div class="metric-num">2</div>
      <div class="metric-name">Error Rate %</div>
    </div>
    <div class="metric-row" id="s16-m2">
      <div class="metric-num">3</div>
      <div class="metric-name">Downtime %</div>
    </div>
    <div class="metric-row" id="s16-m3">
      <div class="metric-num">4</div>
      <div class="metric-name">Customer Rating</div>
    </div>
  </div>

  <div class="badge-row" id="s16-badges">
    <div class="badge-pill ue">&#127942; Top Eats</div>
    <div class="badge-pill dd">&#10084; Most Loved</div>
  </div>

  <div class="callout" id="s16-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 1.7 — "Four Tools That Fix This"
     Steps: 0=blank, 1=Guard, 2=Recover, 3=Re-Engage, 4=SOTU, 5=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-1-7">
  <div class="slide-title" id="s17-title">Four Tools That Fix This</div>

  <div style="display: flex; gap: 24px; margin-top: 10px;">
    <div class="product-card" id="s17-p0" style="width: 200px; padding: 20px 16px;">
      <div class="product-icon">&#128737;</div>
      <div class="product-name" style="color: var(--green);">Guard</div>
      <div class="product-desc">Keeps stores online.<br>Prevents downtime loss.</div>
      <div class="product-maps">&#8594; Downtime %</div>
    </div>
    <div class="product-card" id="s17-p1" style="width: 200px; padding: 20px 16px;">
      <div class="product-icon">&#128176;</div>
      <div class="product-name" style="color: var(--teal);">Recover</div>
      <div class="product-desc">Wins back unfair charges.<br>Direct dollar recovery.</div>
      <div class="product-maps">&#8594; Chargebacks</div>
    </div>
    <div class="product-card" id="s17-p2" style="width: 200px; padding: 20px 16px;">
      <div class="product-icon">&#128172;</div>
      <div class="product-name" style="color: var(--gold);">Re-Engage</div>
      <div class="product-desc">Responds to reviews.<br>Wins back customers.</div>
      <div class="product-maps">&#8594; Ratings + Retention</div>
    </div>
    <div class="product-card" id="s17-p3" style="width: 200px; padding: 20px 16px;">
      <div class="product-icon">&#128202;</div>
      <div class="product-name" style="color: var(--blue);">SOTU</div>
      <div class="product-desc">Benchmarks all metrics.<br>Flags worst stores.</div>
      <div class="product-maps">&#8594; All 4 metrics</div>
    </div>
  </div>

  <div class="callout" id="s17-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.1 — Guard Title Card
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-1">
  <div class="fade scale" id="s21-title" style="
    position: absolute; top: 38%; left: 50%; transform: translate(-50%, -50%);
    text-align: center;
  ">
    <div style="font-size: 2.4rem; margin-bottom: 12px;">&#128737;</div>
    <div style="
      font-size: 3.6rem; font-weight: 700; letter-spacing: 0.04em;
      color: #83C167;
    ">Guard</div>
    <div style="
      margin-top: 12px; font-size: 0.95rem; letter-spacing: 0.12em;
      text-transform: uppercase; color: rgba(255,255,255,0.4);
    ">Uptime Protection</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.2 — The Delivery Tech Chain
     Steps: 0=blank, 1=direct chain, 2=OLO variant, 3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-2">
  <div class="slide-title" id="s22-title">The Delivery Tech Chain</div>

  <svg class="chain-svg" viewBox="0 0 960 380" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <marker id="ch-arr22" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
        <path d="M0,0 L8,3 L0,6" fill="none" stroke="#888" stroke-width="1"/>
      </marker>
    </defs>

    <!-- DIRECT SETUP (top row) -->
    <g class="chain-node" id="s22-direct-label">
      <text x="40" y="85" font-family="'Lato', sans-serif" font-size="14" font-weight="700"
            letter-spacing="0.06em" fill="#888">DIRECT</text>
    </g>
    <g class="chain-node" id="s22-d-kitchen">
      <rect x="110" y="60" width="140" height="60" rx="10" fill="none" stroke="#F0AC5F" stroke-width="1.2"/>
      <text x="180" y="96" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#F0AC5F">KITCHEN</text>
    </g>
    <g class="chain-node" id="s22-d-pos">
      <line x1="254" y1="90" x2="296" y2="90" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <rect x="300" y="60" width="120" height="60" rx="10" fill="none" stroke="#5CD0B3" stroke-width="1.2"/>
      <text x="360" y="96" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#5CD0B3">POS</text>
    </g>
    <g class="chain-node" id="s22-d-platform">
      <line x1="424" y1="90" x2="466" y2="90" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <rect x="470" y="60" width="160" height="60" rx="10" fill="none" stroke="#58C4DD" stroke-width="1.2"/>
      <text x="550" y="96" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#58C4DD">PLATFORM</text>
    </g>
    <g class="chain-node" id="s22-d-customer">
      <line x1="634" y1="90" x2="676" y2="90" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <rect x="680" y="60" width="140" height="60" rx="10" fill="none" stroke="#83C167" stroke-width="1.2"/>
      <text x="750" y="96" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#83C167">CUSTOMER</text>
    </g>

    <!-- OLO SETUP (bottom row) -->
    <g class="chain-node" id="s22-olo-label">
      <text x="40" y="235" font-family="'Lato', sans-serif" font-size="14" font-weight="700"
            letter-spacing="0.06em" fill="#888">WITH OLO</text>
    </g>
    <g class="chain-node" id="s22-o-kitchen">
      <rect x="110" y="210" width="140" height="60" rx="10" fill="none" stroke="#F0AC5F" stroke-width="1.2"/>
      <text x="180" y="246" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#F0AC5F">KITCHEN</text>
    </g>
    <g class="chain-node" id="s22-o-pos">
      <line x1="254" y1="240" x2="296" y2="240" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <rect x="300" y="210" width="120" height="60" rx="10" fill="none" stroke="#5CD0B3" stroke-width="1.2"/>
      <text x="360" y="246" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#5CD0B3">POS</text>
    </g>
    <g class="chain-node" id="s22-o-olo">
      <line x1="424" y1="240" x2="466" y2="240" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <rect x="470" y="210" width="120" height="60" rx="10" fill="none" stroke="#F0AC5F" stroke-width="1.2" stroke-dasharray="6 3"/>
      <text x="530" y="246" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#F0AC5F">OLO</text>
    </g>
    <g class="chain-node" id="s22-o-fanout">
      <!-- Fan-out lines to 3 platforms -->
      <line x1="594" y1="228" x2="676" y2="200" stroke="#888" stroke-width="1" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <line x1="594" y1="240" x2="676" y2="240" stroke="#888" stroke-width="1" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <line x1="594" y1="252" x2="676" y2="280" stroke="#888" stroke-width="1" stroke-dasharray="5 3" marker-end="url(#ch-arr22)"/>
      <rect x="680" y="180" width="160" height="36" rx="8" fill="none" stroke="#FC6255" stroke-width="1"/>
      <text x="760" y="203" font-family="'Lato', sans-serif" font-size="13" font-weight="400"
            text-anchor="middle" fill="#FC6255">DoorDash</text>
      <rect x="680" y="222" width="160" height="36" rx="8" fill="none" stroke="#83C167" stroke-width="1"/>
      <text x="760" y="245" font-family="'Lato', sans-serif" font-size="13" font-weight="400"
            text-anchor="middle" fill="#83C167">UberEats</text>
      <rect x="680" y="264" width="160" height="36" rx="8" fill="none" stroke="#58C4DD" stroke-width="1"/>
      <text x="760" y="287" font-family="'Lato', sans-serif" font-size="13" font-weight="400"
            text-anchor="middle" fill="#58C4DD">Grubhub</text>
    </g>

    <!-- Warning annotation -->
    <g class="chain-node" id="s22-warning">
      <text x="480" y="345" font-family="'Lato', sans-serif" font-size="15" font-weight="400"
            text-anchor="middle" fill="#FC6255">If OLO goes down → dark on every platform at once</text>
      <text x="480" y="370" font-family="'Lato', sans-serif" font-size="14" font-weight="300"
            text-anchor="middle" fill="#888">Every arrow is a potential failure point. More arrows, more ways to silently go offline.</text>
    </g>
  </svg>

  <div class="callout" id="s22-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.3 — Three Ways the Chain Breaks
     Steps: 0=blank, 1=BP1, 2=BP2, 3=BP3, 4=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-3">
  <div class="slide-title" id="s23-title">Three Ways the Chain Breaks</div>

  <div style="display: flex; gap: 28px; margin-top: 20px;">
    <!-- BP1 -->
    <div class="bp-col" id="s23-bp1">
      <div class="bp-num">Break Point 1</div>
      <div class="bp-title" style="color: var(--red);">Platform Shuts<br>the Store Down</div>
      <ul class="bp-list">
        <li>Drivers waiting too long at pickup</li>
        <li>Too many cancelled orders</li>
        <li>Platform thinks store is closed (hours mismatch)</li>
      </ul>
      <div class="bp-note">Nothing is actually broken.<br>The platform made a decision.</div>
    </div>
    <!-- BP2 -->
    <div class="bp-col" id="s23-bp2">
      <div class="bp-num">Break Point 2</div>
      <div class="bp-title" style="color: var(--gold);">Tech Connection<br>Broke</div>
      <ul class="bp-list">
        <li>POS lost connection to platform</li>
        <li>OLO middleware crashed</li>
        <li>Tablet powered off or died</li>
        <li>WiFi went down</li>
        <li style="color: var(--gold); font-weight: 400;">POS throttled orders (high capacity)</li>
      </ul>
      <div class="bp-note" style="color: var(--gold);">Biggest category of downtime.<br>#1 cause: POS high capacity.</div>
    </div>
    <!-- BP3 -->
    <div class="bp-col" id="s23-bp3">
      <div class="bp-num">Break Point 3</div>
      <div class="bp-title" style="color: var(--blue);">Restaurant<br>Paused Itself</div>
      <ul class="bp-list">
        <li><strong style="color: var(--gray-light);">Accidental:</strong> Wrong button, OLO glitch toggled store off</li>
        <li><strong style="color: var(--gray-light);">Deliberate:</strong> Short-staffed, overwhelmed with dine-in</li>
      </ul>
      <div class="bp-note">Most sensitive break point.<br>Fixing it means potentially overriding a human decision.</div>
    </div>
  </div>

  <div class="callout" id="s23-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.4 — The GM Blind Spot
     Steps: 0=blank, 1=left (kitchen), 2=right (app), 3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-4">
  <div class="slide-title" id="s24-title">The GM Blind Spot</div>

  <div class="split-view">
    <!-- LEFT: What the GM sees -->
    <div class="split-panel" id="s24-left">
      <div class="split-label">What the GM sees</div>
      <div style="display: flex; flex-direction: column; gap: 10px; text-align: left;">
        <div style="font-size: 1rem; color: var(--green);">&#10003; Kitchen running</div>
        <div style="font-size: 1rem; color: var(--green);">&#10003; Staff ready</div>
        <div style="font-size: 1rem; color: var(--green);">&#10003; Dine-in working</div>
        <div style="font-size: 1rem; color: var(--green);">&#10003; Phones ringing</div>
        <div style="font-size: 1rem; color: var(--green); font-weight: 700; margin-top: 6px;">Everything looks fine</div>
      </div>
    </div>

    <div class="vs-divider" id="s24-vs">but</div>

    <!-- RIGHT: What the customer sees -->
    <div class="split-panel" id="s24-right">
      <div class="split-label">What the customer sees</div>
      <div class="phone" style="width: 180px; height: 320px;">
        <div class="phone-notch" style="width: 60px; height: 16px;"></div>
        <div class="app-header" style="height: 40px; font-size: 0.7rem;">Delivery App</div>
        <div class="listing" style="margin: 8px 10px;">
          <div class="listing-img" style="height: 60px; font-size: 1.4rem;">&#127860;</div>
          <div class="listing-body" style="padding: 6px 8px;">
            <div class="listing-name" style="font-size: 0.8rem;">The Restaurant</div>
            <div class="listing-meta" style="font-size: 0.65rem;">
              <span class="star">&#9733; 4.6</span>
              <span>25-35 min</span>
            </div>
          </div>
        </div>
        <div class="unavailable-overlay" id="s24-unavail">
          <div class="ico" style="font-size: 1.8rem;">&#x26A0;</div>
          <div class="txt" style="font-size: 0.75rem;">Currently Unavailable</div>
        </div>
      </div>
    </div>
  </div>

  <div class="callout" id="s24-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.5 — Guard: Continuous Monitoring
     Steps: 0=blank, 1=shield+title, 2=chain, 3=pulse, 4=break,
            5=restore, 6=timer callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-5">
  <div class="slide-title" id="s25-title">Guard: Continuous Monitoring</div>
  <svg class="chain-svg" viewBox="0 0 960 380" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <marker id="ch-arr25" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
        <path d="M0,0 L8,3 L0,6" fill="none" stroke="#888" stroke-width="1"/>
      </marker>
    </defs>

    <!-- Guard shield + title -->
    <g class="chain-node" id="s25-shield">
      <text x="480" y="45" font-size="36" text-anchor="middle">&#128737;</text>
      <text x="480" y="80" font-family="'Lato', sans-serif" font-size="28" font-weight="700"
            text-anchor="middle" fill="#83C167">GUARD</text>
    </g>

    <!-- Chain: Kitchen → POS → Platform → Customer -->
    <g class="chain-node" id="s25-chain">
      <rect x="60" y="130" width="140" height="60" rx="10" fill="none" stroke="#F0AC5F" stroke-width="1.2"/>
      <text x="130" y="166" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#F0AC5F">KITCHEN</text>
      <line x1="204" y1="160" x2="246" y2="160" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr25)"/>
      <rect x="250" y="130" width="120" height="60" rx="10" fill="none" stroke="#5CD0B3" stroke-width="1.2"/>
      <text x="310" y="166" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#5CD0B3">POS</text>
      <line x1="374" y1="160" x2="436" y2="160" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr25)"/>
      <rect x="440" y="130" width="160" height="60" rx="10" fill="none" stroke="#58C4DD" stroke-width="1.2"/>
      <text x="520" y="166" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#58C4DD">PLATFORM</text>
      <line x1="604" y1="160" x2="666" y2="160" stroke="#888" stroke-width="1.2" stroke-dasharray="5 3" marker-end="url(#ch-arr25)"/>
      <rect x="670" y="130" width="140" height="60" rx="10" fill="none" stroke="#83C167" stroke-width="1.2"/>
      <text x="740" y="166" font-family="'Lato', sans-serif" font-size="15" font-weight="700"
            text-anchor="middle" fill="#83C167">CUSTOMER</text>
    </g>

    <!-- Monitoring pulse -->
    <g class="chain-node" id="s25-pulse">
      <line x1="60" y1="230" x2="800" y2="230" stroke="#83C167" stroke-width="1" stroke-opacity="0.3"/>
      <polyline points="60,230 150,230 160,220 170,240 180,230 300,230 310,220 320,240 330,230 450,230 460,220 470,240 480,230 600,230 610,220 620,240 630,230 800,230"
                fill="none" stroke="#83C167" stroke-width="1.5" stroke-opacity="0.6"/>
      <text x="480" y="258" font-family="'Lato', sans-serif" font-size="14" font-weight="300"
            text-anchor="middle" fill="#888">Continuous monitoring across all platforms</text>
    </g>

    <!-- Break: red flash at POS→Platform -->
    <g class="chain-node" id="s25-break">
      <text x="410" y="150" font-size="28" text-anchor="middle" fill="#FC6255">&#x2717;</text>
      <rect x="370" y="128" width="240" height="66" rx="10" fill="#FC6255" fill-opacity="0.08" stroke="#FC6255" stroke-width="1.5"/>
      <polyline points="350,230 370,230 380,200 390,260 400,200 410,260 420,210 430,230 450,230"
                fill="none" stroke="#FC6255" stroke-width="2"/>
      <text x="410" y="290" font-family="'Lato', sans-serif" font-size="16" font-weight="700"
            text-anchor="middle" fill="#FC6255">BREAK DETECTED</text>
    </g>

    <!-- Restore: green -->
    <g class="chain-node" id="s25-restore">
      <rect x="370" y="128" width="240" height="66" rx="10" fill="#83C167" fill-opacity="0.1" stroke="#83C167" stroke-width="1.5"/>
      <text x="490" y="168" font-family="'Lato', sans-serif" font-size="22" fill="#83C167">&#x2713;</text>
      <text x="410" y="290" font-family="'Lato', sans-serif" font-size="16" font-weight="700"
            text-anchor="middle" fill="#83C167">RESTORED</text>
    </g>

    <!-- Timer -->
    <g class="chain-node" id="s25-timer">
      <text x="480" y="340" font-family="'Lato', sans-serif" font-size="28" font-weight="700"
            text-anchor="middle" fill="#83C167">&#x23F1; Minutes, not hours</text>
      <text x="480" y="370" font-family="'Lato', sans-serif" font-size="16" font-weight="300"
            text-anchor="middle" fill="#888">Guard reconnects the chain automatically.</text>
    </g>
  </svg>

  <div class="callout" id="s25-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.6 — How Guard Detects Downtime (by Platform)
     Steps: 0=blank, 1=UE (official), 2=DD (workarounds), 3=summary callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-6">
  <div class="slide-title" id="s26-title">How Guard Detects Downtime</div>

  <div style="display: flex; gap: 32px; margin-top: -4px; align-items: flex-start;">
    <!-- UberEats column -->
    <div id="s26-ue" style="display: flex; flex-direction: column; gap: 6px; width: 370px; opacity: 0; transform: translateY(10px); transition: opacity 800ms cubic-bezier(0.16,1,0.3,1), transform 800ms cubic-bezier(0.16,1,0.3,1);">
      <div style="font-size: 1rem; font-weight: 700; color: var(--green); text-align: center;">UberEats</div>
      <div style="font-size: 0.68rem; font-weight: 400; color: var(--green); text-align: center; letter-spacing: 0.06em; text-transform: uppercase; margin-bottom: 4px;">Official Partner API</div>
      <div class="detect-card" style="opacity: 1; transform: none; width: 100%; padding: 12px 16px;">
        <div class="detect-name" style="font-size: 0.9rem;">Partner API Polling</div>
        <div class="detect-desc" style="font-size: 0.78rem;">Guard has OAuth credentials and calls UberEats' documented endpoint to check store status, offline reason, and pause duration.</div>
        <div style="margin-top: 6px; padding: 4px 8px; background: rgba(131,193,103,0.08); border-radius: 5px; font-family: monospace; font-size: 0.64rem; color: var(--green); line-height: 1.4;">
          Guard → OAuth Token → api.uber.com/.../status<br>
          Returns: status, offline_reason, paused_until
        </div>
      </div>
      <div class="detect-card" style="opacity: 1; transform: none; width: 100%; padding: 12px 16px;">
        <div class="detect-name" style="font-size: 0.9rem;">Real-Time Webhooks</div>
        <div class="detect-desc" style="font-size: 0.78rem;">UberEats pushes status changes directly to Guard's servers. Guard often knows within seconds.</div>
        <div style="margin-top: 4px; font-size: 0.68rem; color: var(--gray-dark);">UE notifies Guard — Guard doesn't have to ask.</div>
      </div>
      <div style="margin-top: 4px; padding: 8px; border: 1px solid rgba(131,193,103,0.2); border-radius: 8px; text-align: center; font-size: 0.72rem; color: var(--green); font-weight: 400;">
        &#10003; Official integration. No workarounds needed.
      </div>
    </div>

    <!-- DoorDash column -->
    <div id="s26-dd" style="display: flex; flex-direction: column; gap: 5px; width: 490px; opacity: 0; transform: translateY(10px); transition: opacity 800ms cubic-bezier(0.16,1,0.3,1), transform 800ms cubic-bezier(0.16,1,0.3,1);">
      <div style="font-size: 1rem; font-weight: 700; color: var(--red); text-align: center;">DoorDash</div>
      <div style="font-size: 0.68rem; font-weight: 400; color: var(--red); text-align: center; letter-spacing: 0.06em; text-transform: uppercase; margin-bottom: 4px;">No Official API — Guard Built 3 Workarounds</div>

      <div class="detect-card" style="opacity: 1; transform: none; width: 100%; padding: 10px 14px;">
        <div class="detect-name" style="font-size: 0.9rem;">1. Merchant Portal Automation</div>
        <div class="detect-desc" style="font-size: 0.78rem;">Guard logs into the merchant's own DoorDash dashboard — the same portal a GM would use — and extracts store status programmatically.</div>
        <div style="margin-top: 5px; padding: 4px 8px; background: rgba(252,98,85,0.06); border-radius: 5px; font-family: monospace; font-size: 0.64rem; color: var(--red-light); line-height: 1.4;">
          Guard → Merchant credentials → merchant-portal.doordash.com
        </div>
        <div style="margin-top: 3px; font-size: 0.66rem; color: var(--gray-dark);">Uses rotating proxies to handle anti-automation measures.</div>
      </div>

      <div class="detect-card" style="opacity: 1; transform: none; width: 100%; padding: 10px 14px;">
        <div class="detect-name" style="font-size: 0.9rem;">2. Public Consumer API</div>
        <div class="detect-desc" style="font-size: 0.78rem;">Queries the same API the DoorDash customer app uses. Three-phase endpoint fallback.</div>
        <div style="margin-top: 3px; font-size: 0.66rem; color: var(--gray-dark);">If the customer can't find the store, Guard knows.</div>
      </div>

      <div class="detect-card" style="opacity: 1; transform: none; width: 100%; padding: 10px 14px;">
        <div class="detect-name" style="font-size: 0.9rem;">3. Deactivation Email Ingestion</div>
        <div class="detect-desc" style="font-size: 0.78rem;">When DoorDash deactivates a store, it emails the merchant. Guard reads those emails — often catching it before the next polling cycle.</div>
        <div style="margin-top: 5px; padding: 4px 8px; background: rgba(252,98,85,0.06); border-radius: 5px; font-size: 0.66rem; color: var(--gray-light); line-height: 1.4;">
          DD email → dedicated inbox → Guard parses store ID, reason → restoration pipeline
        </div>
      </div>

      <div style="margin-top: 3px; padding: 8px; border: 1px solid rgba(252,98,85,0.2); border-radius: 8px; text-align: center; font-size: 0.72rem; color: var(--red-light); font-weight: 400;">
        3 independent paths — if one fails, the others catch it.
      </div>
    </div>
  </div>

  <div class="callout" id="s26-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.6b — OLO: Early Warning System
     Steps: 0=blank, 1=context, 2=webhook arrives, 3=wait 70s, 4=poll platforms, 5=decide, 6=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-6b">
  <div class="slide-title" id="s26b-title">When OLO Is In The Mix</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 10px;">

    <!-- Step 1: Context -->
    <div class="fade" id="s26b-context" style="
      font-size: 0.9rem; font-weight: 300; color: var(--gray); text-align: center; line-height: 1.6; max-width: 650px;
    ">
      Some restaurants use <span style="color: var(--teal); font-weight: 700;">OLO</span> to connect their POS to delivery platforms.<br>
      When OLO detects a change, it can <strong style="color: var(--gray-light);">instantly notify Guard</strong> — no polling required.
    </div>

    <!-- The Flow Diagram -->
    <div style="display: flex; align-items: center; gap: 12px; margin-top: 8px;">

      <!-- Step 2: Webhook arrives -->
      <div class="fade" id="s26b-webhook" style="
        padding: 14px 18px; border-radius: 10px; border: 1.5px solid var(--teal);
        text-align: center; width: 140px;
      ">
        <div style="font-size: 1.4rem; margin-bottom: 6px;">📨</div>
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--teal);">OLO Webhook</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 4px; line-height: 1.4;">
          "Store XYZ<br>is offline"
        </div>
      </div>

      <div class="fade" id="s26b-arrow1" style="font-size: 1.2rem; color: var(--gray-dark);">→</div>

      <!-- Step 3: Wait 70 seconds -->
      <div class="fade" id="s26b-wait" style="
        padding: 14px 18px; border-radius: 10px; border: 1.5px solid var(--gold);
        text-align: center; width: 140px;
      ">
        <div style="font-size: 1.4rem; margin-bottom: 6px;">⏱️</div>
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--gold);">Wait 70 sec</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 4px; line-height: 1.4;">
          Let platforms<br>sync up
        </div>
      </div>

      <div class="fade" id="s26b-arrow2" style="font-size: 1.2rem; color: var(--gray-dark);">→</div>

      <!-- Step 4: Poll platforms -->
      <div class="fade" id="s26b-poll" style="
        padding: 14px 18px; border-radius: 10px; border: 1.5px solid var(--blue);
        text-align: center; width: 140px;
      ">
        <div style="font-size: 1.4rem; margin-bottom: 6px;">🔍</div>
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--blue);">Poll DD/UE</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 4px; line-height: 1.4;">
          "Is it really<br>offline?"
        </div>
      </div>

      <div class="fade" id="s26b-arrow3" style="font-size: 1.2rem; color: var(--gray-dark);">→</div>

      <!-- Step 5: Decision -->
      <div class="fade" id="s26b-decide" style="
        padding: 14px 16px; border-radius: 10px; border: 1.5px solid var(--green);
        text-align: center; width: 160px;
      ">
        <div style="font-size: 1.4rem; margin-bottom: 6px;">✅</div>
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--green);">Verify &amp; Act</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px; line-height: 1.5; text-align: left;">
          <span style="color: var(--green);">✓ Confirmed offline</span> → Restore<br>
          <span style="color: var(--gray);">✗ Actually online</span> → No action
        </div>
      </div>

    </div>

    <!-- Why this matters -->
    <div class="fade" id="s26b-why" style="
      display: flex; gap: 24px; margin-top: 16px;
    ">
      <div style="
        padding: 12px 18px; border-radius: 10px; background: rgba(88, 196, 221, 0.08);
        border: 1px solid var(--teal); text-align: center; width: 280px;
      ">
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--teal);">Why not trust OLO directly?</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 6px; line-height: 1.5;">
          OLO knows <em>its</em> state, but customers see<br>
          <strong style="color: var(--gray-light);">DoorDash &amp; UberEats</strong>.<br>
          Sometimes they're out of sync.
        </div>
      </div>
      <div style="
        padding: 12px 18px; border-radius: 10px; background: rgba(131, 193, 103, 0.08);
        border: 1px solid var(--green); text-align: center; width: 280px;
      ">
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--green);">The Guard approach</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 6px; line-height: 1.5;">
          OLO = <span style="color: var(--teal);">early warning</span> (instant alert)<br>
          Platforms = <span style="color: var(--blue);">source of truth</span> (what customers see)<br>
          <strong style="color: var(--green);">Guard uses both.</strong>
        </div>
      </div>
    </div>

  </div>

  <div class="callout" id="s26b-callout" style="bottom: 38px; font-size: 1.05rem; max-width: 820px;"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.7 — Three Restore Modes (moved up)
     Steps: 0=blank, 1=conservative, 2=balanced, 3=aggressive, 4=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-8">
  <div class="slide-title" id="s28-title">Three Restore Modes</div>

  <div style="display: flex; gap: 28px; margin-top: 20px;">
    <!-- Conservative -->
    <div class="mode-card" id="s28-m1">
      <div class="mode-name" style="color: var(--blue);">CONSERVATIVE</div>
      <div class="mode-covers">Break Point 1 only<br><span style="color: var(--gray);">Platform paused the store</span></div>
      <div class="mode-risk" style="color: var(--green);">Risk: None</div>
      <div class="mode-bar-bg"><div class="mode-bar-fill" style="width: 40px; background: var(--blue);"></div></div>
      <div style="margin-top: 6px; font-size: 0.75rem; color: var(--gray);">~20% of downtime covered</div>
    </div>
    <!-- Balanced -->
    <div class="mode-card" id="s28-m2">
      <div class="mode-name" style="color: var(--gold);">BALANCED</div>
      <div class="mode-covers">Break Points 1 + 2<br><span style="color: var(--gray);">Adds: tech failures (biggest bucket)</span></div>
      <div class="mode-risk" style="color: var(--gold);">Risk: Low-moderate</div>
      <div class="mode-bar-bg"><div class="mode-bar-fill" style="width: 140px; background: var(--gold);"></div></div>
      <div style="margin-top: 6px; font-size: 0.75rem; color: var(--gold); font-weight: 400;">~70% — the biggest unlock</div>
    </div>
    <!-- Aggressive -->
    <div class="mode-card" id="s28-m3">
      <div class="mode-name" style="color: var(--red);">AGGRESSIVE</div>
      <div class="mode-covers">All 3 Break Points<br><span style="color: var(--gray);">Adds: restaurant paused itself</span></div>
      <div class="mode-risk" style="color: var(--red);">Risk: Moderate</div>
      <div class="mode-bar-bg"><div class="mode-bar-fill" style="width: 180px; background: var(--red);"></div></div>
      <div style="margin-top: 6px; font-size: 0.75rem; color: var(--gray);">~90% — may override human decision</div>
    </div>
  </div>

  <div class="callout" id="s28-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.8 — What Guard Does Next (Decision Tree, moved down)
     Steps: 0=blank, 1=start, 2=check1, 3=check2, 4=check3, 5=restore
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-7">
  <div class="slide-title" id="s27-title">What Guard Does Next</div>

  <svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="width: 900px; height: 400px;">
    <defs>
      <marker id="dt-arr27" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
        <path d="M0,0 L8,3 L0,6" fill="none" stroke="#888" stroke-width="1"/>
      </marker>
      <marker id="dt-arr27g" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
        <path d="M0,0 L8,3 L0,6" fill="none" stroke="#83C167" stroke-width="1"/>
      </marker>
    </defs>

    <!-- Start -->
    <g class="chain-node" id="s27-start">
      <rect x="340" y="15" width="220" height="50" rx="10" fill="#FC6255" fill-opacity="0.12" stroke="#FC6255" stroke-width="1.5"/>
      <text x="450" y="46" font-family="'Lato', sans-serif" font-size="17" font-weight="700"
            text-anchor="middle" fill="#FC6255">&#x1F6A8; Store is DOWN</text>
    </g>

    <!-- Check 1 -->
    <g class="chain-node" id="s27-c1">
      <line x1="450" y1="68" x2="450" y2="98" stroke="#888" stroke-width="1.2" marker-end="url(#dt-arr27)"/>
      <rect x="290" y="102" width="320" height="48" rx="8" fill="none" stroke="#58C4DD" stroke-width="1.2"/>
      <text x="450" y="131" font-family="'Lato', sans-serif" font-size="15" font-weight="400"
            text-anchor="middle" fill="#58C4DD">Is Guard ON for this store?</text>
      <line x1="614" y1="126" x2="700" y2="126" stroke="#888" stroke-width="1" stroke-dasharray="4 3"/>
      <text x="657" y="118" font-family="'Lato', sans-serif" font-size="11" fill="#888" text-anchor="middle">NO</text>
      <text x="740" y="131" font-family="'Lato', sans-serif" font-size="13" font-weight="300" fill="#888" text-anchor="middle">&#8594; Skip</text>
      <line x1="450" y1="153" x2="450" y2="183" stroke="#83C167" stroke-width="1.2" marker-end="url(#dt-arr27g)"/>
      <text x="462" y="174" font-family="'Lato', sans-serif" font-size="11" fill="#83C167">YES</text>
    </g>

    <!-- Check 2 -->
    <g class="chain-node" id="s27-c2">
      <rect x="260" y="187" width="380" height="48" rx="8" fill="none" stroke="#F0AC5F" stroke-width="1.2"/>
      <text x="450" y="216" font-family="'Lato', sans-serif" font-size="15" font-weight="400"
            text-anchor="middle" fill="#F0AC5F">Does the restore mode allow this?</text>
      <line x1="644" y1="211" x2="700" y2="211" stroke="#888" stroke-width="1" stroke-dasharray="4 3"/>
      <text x="672" y="203" font-family="'Lato', sans-serif" font-size="11" fill="#888" text-anchor="middle">NO</text>
      <text x="740" y="216" font-family="'Lato', sans-serif" font-size="13" font-weight="300" fill="#888" text-anchor="middle">&#8594; Skip</text>
      <line x1="450" y1="238" x2="450" y2="268" stroke="#83C167" stroke-width="1.2" marker-end="url(#dt-arr27g)"/>
      <text x="462" y="259" font-family="'Lato', sans-serif" font-size="11" fill="#83C167">YES</text>
    </g>

    <!-- Check 3 -->
    <g class="chain-node" id="s27-c3">
      <rect x="300" y="272" width="300" height="48" rx="8" fill="none" stroke="#9CDCEB" stroke-width="1.2"/>
      <text x="450" y="301" font-family="'Lato', sans-serif" font-size="15" font-weight="400"
            text-anchor="middle" fill="#9CDCEB">Is the store snoozed?</text>
      <line x1="604" y1="296" x2="700" y2="296" stroke="#888" stroke-width="1" stroke-dasharray="4 3"/>
      <text x="652" y="288" font-family="'Lato', sans-serif" font-size="11" fill="#888" text-anchor="middle">YES</text>
      <text x="740" y="301" font-family="'Lato', sans-serif" font-size="13" font-weight="300" fill="#888" text-anchor="middle">&#8594; Skip</text>
      <line x1="450" y1="323" x2="450" y2="348" stroke="#83C167" stroke-width="1.2" marker-end="url(#dt-arr27g)"/>
      <text x="462" y="341" font-family="'Lato', sans-serif" font-size="11" fill="#83C167">NO</text>
    </g>

    <!-- Restore -->
    <g class="chain-node" id="s27-result">
      <rect x="350" y="352" width="200" height="44" rx="10" fill="#83C167" fill-opacity="0.15" stroke="#83C167" stroke-width="1.5"/>
      <text x="450" y="380" font-family="'Lato', sans-serif" font-size="20" font-weight="700"
            text-anchor="middle" fill="#83C167">&#x2713; RESTORE</text>
    </g>
  </svg>

  <div class="callout" id="s27-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.9 — When Guard Backs Off: Rate Limiting & Restore Loops
     Steps: 1=problem, 2=sequence, 3=windows, 4=timeline, 5=overrides, 6=snooze vs rate limit, 7=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-9">
  <div class="slide-title" id="s29-title">When Guard Backs Off: Rate Limiting</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: -8px;">

    <!-- Step 1: The Problem -->
    <div class="fade" id="s29-problem" style="
      max-width: 700px; padding: 10px 18px; border-radius: 10px;
      border: 1px solid var(--gold); text-align: center;
    ">
      <div style="font-size: 0.8rem; color: var(--gray-light); line-height: 1.5;">
        <span style="color: var(--gold); font-weight: 700;">The Problem:</span> Sometimes Guard restores a store, but it goes <span style="color: var(--red);">right back down</span> within minutes.
        The root cause (POS disconnected, middleware crashed) hasn't been fixed. If Guard kept blindly retrying, orders would flood a broken store.
      </div>
    </div>

    <!-- Step 2: The Sequence -->
    <div class="fade" id="s29-sequence" style="display: flex; gap: 8px; font-size: 0.7rem;">
      <div style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--green); text-align: center; width: 150px;">
        <div style="font-weight: 700; color: var(--green);">1st downtime</div>
        <div style="color: var(--gray); margin-top: 4px;">Guard restores → ✅</div>
      </div>
      <div style="display: flex; align-items: center; color: var(--gray);">→</div>
      <div style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--gold); text-align: center; width: 150px;">
        <div style="font-weight: 700; color: var(--gold);">2nd in window</div>
        <div style="color: var(--gray); margin-top: 4px;">Skips → ⚠️ ALERT</div>
      </div>
      <div style="display: flex; align-items: center; color: var(--gray);">→</div>
      <div style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--red); text-align: center; width: 150px;">
        <div style="font-weight: 700; color: var(--red);">3rd+ in window</div>
        <div style="color: var(--gray); margin-top: 4px;">Skips → 🔴 CRITICAL</div>
      </div>
      <div style="display: flex; align-items: center; color: var(--gray);">→</div>
      <div style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--teal); text-align: center; width: 150px;">
        <div style="font-weight: 700; color: var(--teal);">Window expires</div>
        <div style="color: var(--gray); margin-top: 4px;">Auto-resumes ↺</div>
      </div>
    </div>

    <!-- Step 3: Rate Windows by Platform -->
    <div class="fade" id="s29-windows" style="display: flex; gap: 20px;">
      <div style="padding: 10px 16px; border-radius: 8px; border: 1.5px solid var(--red); text-align: center; width: 200px;">
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--red);">DoorDash</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px;">
          Most chains: <span style="color: var(--gray-light);">1 attempt / 60 min</span><br>
          <span style="color: var(--green);">Some (BK, DTF): No limit</span>
        </div>
      </div>
      <div style="padding: 10px 16px; border-radius: 8px; border: 1.5px solid var(--green); text-align: center; width: 200px;">
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--green);">UberEats</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px;">
          Most chains: <span style="color: var(--gray-light);">1 attempt / 180 min</span><br>
          <span style="color: var(--gold);">Some: 1/60min + 2/180min</span>
        </div>
      </div>
      <div style="padding: 10px 16px; border-radius: 8px; border: 1px solid var(--gray-dark); text-align: center; width: 180px;">
        <div style="font-size: 0.7rem; color: var(--teal); margin-top: 4px;">Why different?</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px; line-height: 1.4;">
          DD stores stabilize faster.<br>UE takes longer to sync.
        </div>
      </div>
    </div>

    <!-- Step 4: Example Timeline -->
    <div class="fade" id="s29-timeline" style="
      width: 680px; padding: 10px 14px; border-radius: 8px;
      border: 1px solid var(--gray-dark); background: rgba(255,255,255,0.02);
      font-size: 0.65rem;
    ">
      <div style="font-weight: 700; color: var(--teal); margin-bottom: 6px; font-size: 0.7rem;">Example: UberEats store (180 min window)</div>
      <div style="display: flex; gap: 6px; color: var(--gray-light);">
        <span style="color: var(--green);">10:00 AM</span> Down → Restore ✅ |
        <span style="color: var(--gold);">10:45 AM</span> Down → Restore ✅ (1 attempt used) |
        <span style="color: var(--red);">11:30 AM</span> Down → RATE LIMITED ⚠️ |
        <span style="color: var(--red);">12:15 PM</span> Still down 🔴 |
        <span style="color: var(--teal);">1:00 PM</span> Window expires → Auto-resumes ↺
      </div>
    </div>

    <!-- Step 5: How to Override -->
    <div class="fade" id="s29-overrides" style="display: flex; gap: 12px; font-size: 0.7rem;">
      <div style="padding: 8px 14px; border-radius: 6px; border: 1px solid var(--teal); text-align: center; width: 180px;">
        <div style="font-weight: 700; color: var(--teal);">⏰ Time (Auto)</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px;">Window expires naturally</div>
      </div>
      <div style="padding: 8px 14px; border-radius: 6px; border: 1px solid var(--green); text-align: center; width: 180px;">
        <div style="font-weight: 700; color: var(--green);">📱 SMS "2" or Slack</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px;">One-time bypass<br>(use after fixing issue)</div>
      </div>
      <div style="padding: 8px 14px; border-radius: 6px; border: 1px solid var(--gold); text-align: center; width: 180px;">
        <div style="font-weight: 700; color: var(--gold);">😴 SMS "1" (Snooze)</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px;">Pauses Guard entirely<br>until end of day</div>
      </div>
    </div>

    <!-- Step 6: Snooze vs Rate Limit -->
    <div class="fade" id="s29-compare" style="
      display: flex; gap: 16px; font-size: 0.65rem;
    ">
      <div style="padding: 8px 14px; border-radius: 6px; border: 1px solid var(--gold); width: 260px;">
        <div style="font-weight: 700; color: var(--gold); margin-bottom: 4px;">Rate Limit</div>
        <div style="color: var(--gray); line-height: 1.4;">
          • Automatic (too many attempts)<br>
          • Stops only auto-restore<br>
          • Still sends notifications<br>
          • Clears when window expires
        </div>
      </div>
      <div style="padding: 8px 14px; border-radius: 6px; border: 1px solid var(--blue); width: 260px;">
        <div style="font-weight: 700; color: var(--blue); margin-bottom: 4px;">Snooze</div>
        <div style="color: var(--gray); line-height: 1.4;">
          • Manual (you choose)<br>
          • Stops restore AND notifications<br>
          • Complete silence<br>
          • Clears at end of day
        </div>
      </div>
    </div>

  </div>

  <div class="callout" id="s29-callout" style="bottom: 36px; font-size: 1rem;"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.10 — How Downtime % Is Calculated
     Steps: 0=blank, 1=formula, 2=example, 3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-10">
  <div class="slide-title" id="s210-title">How Downtime % Is Calculated</div>

  <div class="calc-box" id="s210-formula" style="margin-top: 10px;">
    <div class="calc-formula">
      <span style="color: var(--red);">Total Minutes Offline</span>
      &nbsp;÷&nbsp;
      <span style="color: var(--blue);">Total Scheduled Operating Minutes</span>
      &nbsp;=&nbsp;
      <span style="color: var(--gold); font-weight: 700;">Downtime %</span>
    </div>
  </div>

  <div class="calc-box" id="s210-example" style="margin-top: 20px; border-color: var(--gold);">
    <div class="calc-example">
      Store is scheduled <span style="color: var(--blue);">10 AM – 10 PM</span> = <span style="color: var(--blue);">720 minutes</span><br>
      Store was offline for <span style="color: var(--red);">45 minutes</span><br><br>
      <span style="color: var(--gold); font-weight: 700; font-size: 1.3rem;">45 ÷ 720 = 6.25% downtime</span>
    </div>
  </div>

  <div class="callout" id="s210-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.10b — In The Product: Guard
     Steps: 1=show screenshot + explanation
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-10b">
  <div class="slide-title" id="s210b-title">In The Product: Guard</div>

  <div class="screenshot-container">
    <img src="img/guard-restore-history.png" alt="Guard Restore History" class="screenshot-img zoom-guard fade" id="s210b-img"
         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
    <div class="screenshot-placeholder" id="s210b-placeholder" style="display: none;">
      <span>Screenshot: Guard → Restore History</span>
    </div>

    <div class="screenshot-caption fade" id="s210b-caption">
      <div class="metric">
        <span class="metric-label">Loop detected:</span>
        <span class="metric-value blue">3,718</span>
      </div>
      <div class="metric">
        <span class="metric-label">Restored:</span>
        <span class="metric-value green">1,238</span>
      </div>
      <div class="metric">
        <span class="metric-label">Downtime:</span>
        <span class="metric-value">1.88%</span>
        <span class="metric-value red" style="font-size: 0.75rem;">↑74%</span>
      </div>
      <div class="metric">
        <span class="metric-label">Wait Time:</span>
        <span class="metric-value">1.99 min</span>
      </div>
      <div class="metric">
        <span class="metric-label">Unfulfilled:</span>
        <span class="metric-value green">1.56%</span>
        <span class="metric-value green" style="font-size: 0.75rem;">↓13%</span>
      </div>
    </div>
  </div>

  <div class="callout" id="s210b-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.11 — How Lost Sales Is Calculated
     Steps: 0=blank, 1=formula, 2=example, 3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-11">
  <div class="slide-title" id="s211-title">How Lost Sales Is Calculated</div>

  <div class="calc-box" id="s211-formula" style="margin-top: 10px;">
    <div class="calc-formula">
      <span style="color: var(--blue);">Store's Avg Hourly Revenue</span>
      &nbsp;×&nbsp;
      <span style="color: var(--red);">Hours Offline</span>
      &nbsp;=&nbsp;
      <span style="color: var(--red); font-weight: 700;">Lost Sales</span>
    </div>
    <div style="margin-top: 10px; font-size: 0.82rem; color: var(--gray);">
      Based on the store's own historical sales for that day and hour
    </div>
  </div>

  <div class="calc-box" id="s211-example" style="margin-top: 20px; border-color: var(--red);">
    <div class="calc-example">
      Store averages <span style="color: var(--blue);">$150/hr</span> on Friday lunch<br>
      Store was down for <span style="color: var(--red);">2 hours</span><br><br>
      <span style="color: var(--red); font-weight: 700; font-size: 1.3rem;">$150 × 2 = $300 lost sales</span>
    </div>
  </div>

  <div class="callout" id="s211-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.12 — How Sales Saved Is Calculated
     Steps: 0=blank, 1=timeline base, 2=restore, 3=window+orders, 4=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-12">
  <div class="slide-title" id="s212-title">How Sales Saved Is Calculated</div>

  <svg viewBox="0 0 900 320" xmlns="http://www.w3.org/2000/svg" style="width: 900px; height: 320px;">
    <!-- Timeline baseline -->
    <g class="chain-node" id="s212-base">
      <line x1="80" y1="160" x2="820" y2="160" stroke="#444" stroke-width="1.5"/>
    </g>

    <!-- Store down -->
    <g class="chain-node" id="s212-down">
      <circle cx="160" cy="160" r="8" fill="#FC6255"/>
      <text x="160" y="140" font-family="'Lato', sans-serif" font-size="14" font-weight="700"
            text-anchor="middle" fill="#FC6255">STORE DOWN</text>
      <line x1="160" y1="170" x2="160" y2="200" stroke="#FC6255" stroke-width="1" stroke-dasharray="4 3"/>
      <text x="160" y="218" font-family="'Lato', sans-serif" font-size="12" font-weight="300"
            text-anchor="middle" fill="#888">12:00 PM</text>
    </g>

    <!-- Guard restores -->
    <g class="chain-node" id="s212-restore">
      <circle cx="260" cy="160" r="8" fill="#83C167"/>
      <text x="260" y="140" font-family="'Lato', sans-serif" font-size="14" font-weight="700"
            text-anchor="middle" fill="#83C167">GUARD RESTORES</text>
      <line x1="260" y1="170" x2="260" y2="200" stroke="#83C167" stroke-width="1" stroke-dasharray="4 3"/>
      <text x="260" y="218" font-family="'Lato', sans-serif" font-size="12" font-weight="300"
            text-anchor="middle" fill="#888">12:03 PM</text>
    </g>

    <!-- 2-hour window + orders -->
    <g class="chain-node" id="s212-window">
      <rect x="260" y="148" width="420" height="24" rx="4" fill="rgba(131,193,103,0.12)"
            stroke="#83C167" stroke-width="1" stroke-dasharray="5 3"/>
      <text x="470" y="140" font-family="'Lato', sans-serif" font-size="13" font-weight="400"
            text-anchor="middle" fill="#83C167">2-HOUR ATTRIBUTION WINDOW</text>
      <line x1="680" y1="148" x2="680" y2="200" stroke="#444" stroke-width="1" stroke-dasharray="4 3"/>
      <text x="680" y="218" font-family="'Lato', sans-serif" font-size="12" font-weight="300"
            text-anchor="middle" fill="#888">2:03 PM</text>
      <!-- Order dots -->
      <circle cx="320" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <circle cx="370" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <circle cx="420" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <circle cx="460" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <circle cx="510" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <circle cx="560" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <circle cx="610" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <circle cx="650" cy="160" r="5" fill="#83C167" opacity="0.8"/>
      <text x="470" y="110" font-family="'Lato', sans-serif" font-size="18" font-weight="700"
            text-anchor="middle" fill="#83C167">8 real orders = $247 saved</text>
    </g>

    <!-- Label -->
    <g class="chain-node" id="s212-label">
      <rect x="230" y="250" width="440" height="50" rx="12" fill="none" stroke="#83C167" stroke-width="1.2"/>
      <text x="450" y="278" font-family="'Lato', sans-serif" font-size="15" font-weight="400"
            text-anchor="middle" fill="#FFFFFF">Every real order in the next 2 hours = revenue saved by Guard</text>
    </g>
  </svg>

  <div class="callout" id="s212-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.13 — Staying Informed
     Steps: 0=blank, 1=real-time, 2=digest, 3=weekly, 4=SMS callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-13">
  <div class="slide-title" id="s213-title">Staying Informed</div>

  <div style="display: flex; gap: 28px; margin-top: 20px;">
    <div class="notif-card" id="s213-n1">
      <div class="notif-icon">&#9889;</div>
      <div class="notif-name">Real-Time</div>
      <div class="notif-desc">Instant alert per event.<br>Store down, restored, or failed.</div>
      <div class="notif-channel">SMS + Email</div>
    </div>
    <div class="notif-card" id="s213-n2">
      <div class="notif-icon">&#128240;</div>
      <div class="notif-name">Digest</div>
      <div class="notif-desc">Batched summary every 30 min.<br>Less noise, same coverage.</div>
      <div class="notif-channel">SMS + Email</div>
    </div>
    <div class="notif-card" id="s213-n3">
      <div class="notif-icon">&#128196;</div>
      <div class="notif-name">Weekly Summary</div>
      <div class="notif-desc">Full performance report.<br>KPIs, worst locations, top reasons.</div>
      <div class="notif-channel">Email</div>
    </div>
  </div>

  <div class="callout" id="s213-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 2.14 — The Guard Loop
     Steps: 0=blank, 1=watch, 2=fix, 3=escalate, 4=report, 5=center text
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-2-14">
  <div class="slide-title" id="s214-title">The Guard Loop</div>
  <div style="position: relative; width: 500px; height: 380px; margin-top: 0px;">
    <!-- WATCH (top) -->
    <div class="loop-node" id="s214-watch" style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%);">
      <div class="loop-icon">&#128065;</div>
      <div class="loop-label" style="color: var(--blue);">WATCH</div>
      <div class="loop-desc">Continuous, 4 methods<br>DoorDash + UberEats</div>
    </div>
    <!-- FIX (right) -->
    <div class="loop-node" id="s214-fix" style="position: absolute; top: 50%; right: 0; transform: translateY(-50%);">
      <div class="loop-icon">&#128295;</div>
      <div class="loop-label" style="color: var(--green);">FIX</div>
      <div class="loop-desc">Auto-restore<br>Minutes, not hours</div>
    </div>
    <!-- ESCALATE (bottom) -->
    <div class="loop-node" id="s214-esc" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);">
      <div class="loop-icon">&#9888;</div>
      <div class="loop-label" style="color: var(--gold);">ESCALATE</div>
      <div class="loop-desc">Stops when root cause persists</div>
    </div>
    <!-- REPORT (left) -->
    <div class="loop-node" id="s214-report" style="position: absolute; top: 50%; left: 0; transform: translateY(-50%);">
      <div class="loop-icon">&#128196;</div>
      <div class="loop-label" style="color: var(--gray-light);">REPORT</div>
      <div class="loop-desc">Real-time, digest, weekly</div>
    </div>
    <!-- Center text -->
    <div class="fade" id="s214-center" style="
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      text-align: center; max-width: 240px;
    ">
      <div style="font-size: 1rem; font-weight: 300; color: var(--gray); line-height: 1.6;">
        The question isn't whether stores go offline.<br>
        <strong style="color: var(--white); font-weight: 700;">They do.</strong>
      </div>
    </div>

    <!-- Connecting arrows (SVG overlay) -->
    <svg viewBox="0 0 500 400" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
      <defs>
        <marker id="loop-arr" markerWidth="6" markerHeight="5" refX="6" refY="2.5" orient="auto">
          <path d="M0,0 L6,2.5 L0,5" fill="none" stroke="#555" stroke-width="0.8"/>
        </marker>
      </defs>
      <!-- Watch → Fix -->
      <path class="chain-node" id="s214-a1" d="M310,95 Q400,100 410,170" fill="none" stroke="#555" stroke-width="1" stroke-dasharray="5 3" marker-end="url(#loop-arr)"/>
      <!-- Fix → Escalate -->
      <path class="chain-node" id="s214-a2" d="M410,260 Q400,330 310,340" fill="none" stroke="#555" stroke-width="1" stroke-dasharray="5 3" marker-end="url(#loop-arr)"/>
      <!-- Escalate → Report -->
      <path class="chain-node" id="s214-a3" d="M190,340 Q100,330 90,260" fill="none" stroke="#555" stroke-width="1" stroke-dasharray="5 3" marker-end="url(#loop-arr)"/>
      <!-- Report → Watch -->
      <path class="chain-node" id="s214-a4" d="M90,170 Q100,100 190,95" fill="none" stroke="#555" stroke-width="1" stroke-dasharray="5 3" marker-end="url(#loop-arr)"/>
    </svg>
  </div>

  <div class="callout" id="s214-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     ██████████  SECTION 3 — RECOVER  ██████████
     ═══════════════════════════════════════════════════════════════ -->


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.1 — Recover Title Card
     Steps: 0=blank, 1=title
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-1">
  <div class="fade scale" id="s31-title" style="
    display: flex; flex-direction: column; align-items: center; gap: 12px;
  ">
    <div style="font-size: 2.8rem;">&#9878;</div>
    <div style="font-size: 3rem; font-weight: 700; letter-spacing: 0.08em;
                color: var(--gold);">RECOVER</div>
    <div style="font-size: 1.1rem; font-weight: 300; color: var(--gray);
                letter-spacing: 0.06em;">Chargeback Recovery</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.2 — Bridge: Money Still Leaks
     Steps: 0=blank, 1=title+online, 2=order flow, 3=leak
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-2">
  <div class="slide-title" id="s32-title">Guard Kept the Store Online. But Money Still Leaks.</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 24px; margin-top: 10px;">
    <!-- Online bar -->
    <div class="fade" id="s32-online" style="
      padding: 12px 40px; border-radius: 8px;
      border: 1.5px solid var(--green); color: var(--green);
      font-size: 1.1rem; font-weight: 700;
    ">&#x2713; STORE IS ONLINE &mdash; Orders are flowing</div>

    <!-- Two leak paths -->
    <div class="fade" id="s32-flow" style="
      display: flex; gap: 28px; margin-top: 4px;
    ">
      <!-- Path 1: Fulfilled but complained -->
      <div style="padding: 14px 20px; border-radius: 10px;
                  border: 1.5px solid var(--gold); text-align: center; width: 280px;">
        <div style="font-size: 1rem; font-weight: 700; color: var(--gold);">Customer gets food</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray); margin-top: 6px; line-height: 1.5;">
          But reports a problem.<br>Platform refunds &amp; charges the restaurant.
        </div>
      </div>
      <!-- Path 2: Never fulfilled -->
      <div style="padding: 14px 20px; border-radius: 10px;
                  border: 1.5px solid var(--red); text-align: center; width: 280px;">
        <div style="font-size: 1rem; font-weight: 700; color: var(--red);">Customer never gets food</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray); margin-top: 6px; line-height: 1.5;">
          Order missed or cancelled.<br>Restaurant loses the sale entirely.
        </div>
      </div>
    </div>

    <!-- Leak -->
    <div class="fade" id="s32-leak" style="
      display: flex; flex-direction: column; align-items: center; gap: 6px; margin-top: 4px;
    ">
      <div style="font-size: 1.6rem; color: var(--red);">&#8595;</div>
      <div style="font-size: 1.05rem; font-weight: 300; color: var(--gold); text-align: center; line-height: 1.6;">
        Either way, money leaks. Recover gets it back.
      </div>
    </div>
  </div>

  <div class="callout" id="s32-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.3 — The Order Tree: Fulfilled vs Unfulfilled
     Steps: 0=blank, 1=title+root, 2=split
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-3">
  <div class="slide-title" id="s33-title">Every Order Lands in One of Two States</div>

  <svg viewBox="0 0 700 320" xmlns="http://www.w3.org/2000/svg" style="width: 700px; height: 320px;">
    <defs>
      <marker id="tree-arr33" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
        <path d="M0,0 L7,2.5 L0,5" fill="none" stroke="#888" stroke-width="0.8"/>
      </marker>
    </defs>
    <!-- Root -->
    <g class="chain-node" id="s33-root">
      <rect x="250" y="20" width="200" height="50" rx="10" fill="none" stroke="#58C4DD" stroke-width="1.5"/>
      <text x="350" y="51" font-family="'Lato', sans-serif" font-size="18" font-weight="700"
            text-anchor="middle" fill="#58C4DD">ORDER PLACED</text>
    </g>
    <!-- Branches -->
    <g class="chain-node" id="s33-branches">
      <line x1="300" y1="73" x2="175" y2="140" stroke="#888" stroke-width="1.2" marker-end="url(#tree-arr33)"/>
      <line x1="400" y1="73" x2="525" y2="140" stroke="#888" stroke-width="1.2" marker-end="url(#tree-arr33)"/>
      <!-- Fulfilled -->
      <rect x="60" y="145" width="230" height="60" rx="10" fill="#83C167" fill-opacity="0.1" stroke="#83C167" stroke-width="1.5"/>
      <text x="175" y="170" font-family="'Lato', sans-serif" font-size="17" font-weight="700"
            text-anchor="middle" fill="#83C167">&#x2713; FULFILLED</text>
      <text x="175" y="192" font-family="'Lato', sans-serif" font-size="12" font-weight="300"
            text-anchor="middle" fill="#888">Customer received food</text>
      <!-- Unfulfilled -->
      <rect x="410" y="145" width="230" height="60" rx="10" fill="#FC6255" fill-opacity="0.1" stroke="#FC6255" stroke-width="1.5"/>
      <text x="525" y="170" font-family="'Lato', sans-serif" font-size="17" font-weight="700"
            text-anchor="middle" fill="#FC6255">&#x2717; UNFULFILLED</text>
      <text x="525" y="192" font-family="'Lato', sans-serif" font-size="12" font-weight="300"
            text-anchor="middle" fill="#888">Customer did NOT receive food</text>
    </g>
  </svg>

  <div class="callout" id="s33-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.4 — Fulfilled → Inaccurate
     Steps: 0=blank, 1=title+fulfilled, 2=problem, 3=inaccurate label
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-4">
  <div class="slide-title" id="s34-title">Fulfilled — But the Customer Reports a Problem</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 10px;">
    <!-- Fulfilled header -->
    <div class="fade" id="s34-header" style="
      padding: 12px 36px; border-radius: 10px;
      border: 1.5px solid var(--green); color: var(--green);
      font-size: 1.1rem; font-weight: 700;
    ">&#x2713; FULFILLED — Customer received food</div>

    <!-- Problem -->
    <div class="fade" id="s34-problem" style="
      display: flex; flex-direction: column; align-items: center; gap: 6px;
    ">
      <div style="font-size: 1.4rem; color: var(--gray);">&#8595;</div>
      <div style="padding: 14px 28px; border-radius: 10px; border: 1.5px solid var(--gold);
                  text-align: center; max-width: 440px;">
        <div style="font-size: 1rem; font-weight: 400; color: var(--gold);">Customer reports a problem</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray); margin-top: 6px; line-height: 1.5;">
          Wrong items &bull; Missing items &bull; Quality issues
        </div>
      </div>
    </div>

    <!-- Inaccurate -->
    <div class="fade" id="s34-inaccurate" style="
      display: flex; flex-direction: column; align-items: center; gap: 6px;
    ">
      <div style="font-size: 1.4rem; color: var(--gray);">&#8595;</div>
      <div style="padding: 16px 36px; border-radius: 12px;
                  border: 2px solid var(--red); text-align: center;">
        <div style="font-size: 1.2rem; font-weight: 700; color: var(--red);">INACCURATE ORDER</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray); margin-top: 4px;">
          Platform refunds customer, charges the restaurant
        </div>
      </div>
    </div>
  </div>

  <div class="callout" id="s34-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.5 — Unfulfilled → Missed vs Cancelled
     Steps: 0=blank, 1=title+header, 2=missed+cancelled
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-5">
  <div class="slide-title" id="s35-title">Unfulfilled — Missed or Cancelled</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 10px;">
    <!-- Unfulfilled header -->
    <div class="fade" id="s35-header" style="
      padding: 12px 36px; border-radius: 10px;
      border: 1.5px solid var(--red); color: var(--red);
      font-size: 1.1rem; font-weight: 700;
    ">&#x2717; UNFULFILLED — Customer did NOT receive food</div>

    <!-- Two branches -->
    <div class="fade" id="s35-branches" style="display: flex; gap: 32px; margin-top: 10px;">
      <!-- Missed -->
      <div style="width: 280px; padding: 20px; border-radius: 12px;
                  border: 1.5px solid var(--gold); text-align: center;">
        <div style="font-size: 1.5rem; margin-bottom: 6px;">&#128566;</div>
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--gold);">MISSED</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.5;">
          Order came in but was never completed<br>
          <span style="color: var(--gray-dark); font-size: 0.75rem;">Not accepted in time &bull; Accepted but never made</span>
        </div>
      </div>
      <!-- Cancelled -->
      <div style="width: 280px; padding: 20px; border-radius: 12px;
                  border: 1.5px solid var(--blue); text-align: center;">
        <div style="font-size: 1.5rem; margin-bottom: 6px;">&#9995;</div>
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--blue);">CANCELLED</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.5;">
          Someone stopped the order<br>
          <span style="color: var(--gray-dark); font-size: 0.75rem;">Store &bull; Customer &bull; Driver &bull; Platform</span>
        </div>
      </div>
    </div>
  </div>

  <div class="callout" id="s35-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.5b — Why Do Orders Go Unfulfilled?
     Steps: 0=blank, 1=title+intro, 2=missed reasons, 3=cancelled reasons, 4=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-5b">
  <div class="slide-title" id="s35b-title">Why Do Orders Go Unfulfilled?</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 6px;">

    <div class="fade" id="s35b-intro" style="
      font-size: 0.95rem; font-weight: 300; color: var(--gray); text-align: center; line-height: 1.6;
    ">
      We know unfulfilled orders split into <span style="color: var(--gold);">missed</span> and <span style="color: var(--blue);">cancelled</span>. But why do they happen?
    </div>

    <div style="display: flex; gap: 28px; margin-top: 4px;">
      <!-- Missed reasons -->
      <div class="fade" id="s35b-missed" style="
        width: 330px; padding: 20px; border-radius: 14px;
        border: 1.5px solid var(--gold); text-align: left;
      ">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--gold); margin-bottom: 10px; text-align: center;">MISSED</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray-light); line-height: 1.7;">
          <div style="margin-bottom: 6px;"><strong style="color: var(--gray-light);">If auto-accept is ON:</strong></div>
          <div>&#8226; Order accepted but kitchen never made it</div>
          <div>&#8226; Ticket lost, printer failed, staff didn't see it</div>
          <div style="margin-top: 10px; margin-bottom: 6px;"><strong style="color: var(--gray-light);">If manual accept:</strong></div>
          <div>&#8226; Nobody pressed accept in time</div>
          <div>&#8226; Tablet off, POS disconnected, too busy</div>
        </div>
      </div>

      <!-- Cancelled reasons -->
      <div class="fade" id="s35b-cancelled" style="
        width: 330px; padding: 20px; border-radius: 14px;
        border: 1.5px solid var(--blue); text-align: left;
      ">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--blue); margin-bottom: 10px; text-align: center;">CANCELLED</div>
        <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray-light); line-height: 1.7;">
          <div>&#8226; <strong style="color: var(--gray-light);">Store:</strong> Out of ingredients, kitchen overwhelmed</div>
          <div>&#8226; <strong style="color: var(--gray-light);">Customer:</strong> Changed mind, waited too long</div>
          <div>&#8226; <strong style="color: var(--gray-light);">Driver:</strong> No driver available, gave up waiting</div>
          <div>&#8226; <strong style="color: var(--gray-light);">Platform:</strong> Fraud, address issue, system error</div>
        </div>
      </div>
    </div>
  </div>

  <div class="callout" id="s35b-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.6 — How Does the Restaurant Lose Money?
     Steps: 0=blank, 1=title+question, 2=two forms
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-6">
  <div class="slide-title" id="s36-title">How Does the Restaurant Actually Lose Money?</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 24px; margin-top: 10px;">
    <div class="fade" id="s36-question" style="
      font-size: 1.1rem; font-weight: 300; color: var(--gray); text-align: center; line-height: 1.6;
    ">
      You now know what goes wrong — <span style="color: var(--green);">fulfilled but inaccurate</span>, or <span style="color: var(--red);">unfulfilled</span>.<br>
      Now let's follow the money. Not all losses disappear the same way.
    </div>

    <div class="fade" id="s36-forms" style="display: flex; gap: 32px; margin-top: 8px;">
      <!-- Charged Back -->
      <div style="width: 300px; padding: 24px; border-radius: 14px;
                  border: 1.5px solid var(--red); text-align: center;">
        <div style="font-size: 1.6rem; margin-bottom: 8px;">&#128184;</div>
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--red);">DEDUCTED</div>
        <div style="font-size: 0.85rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.5;">
          Platform owed the restaurant, then <strong style="color: var(--red-light);">deducted it</strong><br>
          from a future payout.
        </div>
      </div>
      <!-- Never Paid -->
      <div style="width: 300px; padding: 24px; border-radius: 14px;
                  border: 1.5px solid var(--gray); text-align: center;">
        <div style="font-size: 1.6rem; margin-bottom: 8px;">&#128683;</div>
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--gray-light);">NEVER PAID</div>
        <div style="font-size: 0.85rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.5;">
          Order never completed, so the restaurant<br>
          was <strong style="color: var(--gray-light);">never paid</strong> at all.
        </div>
      </div>
    </div>
  </div>

  <div class="callout" id="s36-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.7 — Fulfilled Losses: Customer Refunds
     Steps: 0=blank, 1=title+bucket, 2=merchant_charged, 3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-7">
  <div class="slide-title" id="s37-title">Fulfilled Losses: Customer Refunds</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 10px;">
    <!-- Main bucket -->
    <div class="fade" id="s37-bucket" style="
      width: 520px; padding: 24px 28px; border-radius: 14px;
      border: 1.5px solid var(--red); text-align: center;
    ">
      <div style="font-size: 0.75rem; font-weight: 700; color: var(--gray-dark); letter-spacing: 0.06em; margin-bottom: 6px;">FULFILLED &#8594; INACCURATE</div>
      <div style="font-size: 1.2rem; font-weight: 700; color: var(--red);">customer_refunds</div>
      <div style="font-size: 0.85rem; font-weight: 300; color: var(--gray); margin-top: 10px; line-height: 1.6;">
        Platform refunded the customer for a quality complaint.<br>
        Deducted from the restaurant's payout.<br>
        <span style="font-family: monospace; font-size: 0.72rem; color: var(--gray-dark);">CUSTOMER_REFUND transaction</span>
      </div>
    </div>

    <!-- Merchant charged gate -->
    <div class="fade" id="s37-gate" style="
      width: 520px; padding: 16px 28px; border-radius: 10px;
      border: 1.5px solid var(--gold); text-align: center;
    ">
      <div style="font-size: 0.95rem; font-weight: 400; color: var(--gold);">But not every error costs the restaurant</div>
      <div style="font-size: 0.82rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.5;">
        Sometimes the platform pays for the refund itself — e.g. for promos, first-time buyers, or goodwill.<br>
        The restaurant wasn't charged, so there's nothing to recover.<br>
        In the data, this shows as <strong style="color: var(--gray-light);">merchant_charged = false</strong>.<br>
        <em style="color: var(--gray); font-style: normal;">"I see errors but no losses" — this is why.</em>
      </div>
    </div>
  </div>

  <div class="callout" id="s37-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.8 — Unfulfilled Losses: Was Payment Owed?
     Steps: 0=blank, 1=title+question, 2=yes path, 3=no path, 4=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-8">
  <div class="slide-title" id="s38-title">Unfulfilled: Was Payment Owed?</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 6px;">
    <!-- The question -->
    <div class="fade" id="s38-question" style="
      display: flex; flex-direction: column; align-items: center; gap: 8px;
    ">
      <div style="padding: 12px 28px; border-radius: 10px;
                  border: 1.5px solid var(--red); text-align: center;">
        <div style="font-size: 1rem; font-weight: 700; color: var(--red);">Order is unfulfilled. Customer didn't get food.</div>
      </div>
      <div style="font-size: 1rem; font-weight: 300; color: var(--gray); margin-top: 4px;">
        What happens to the money depends on one thing:
      </div>
      <div style="font-size: 1.2rem; font-weight: 700; color: var(--white);">
        Did the platform owe the restaurant for this order?
      </div>
    </div>

    <div style="display: flex; gap: 28px; margin-top: 4px;">
      <!-- YES — got paid, money taken back -->
      <div class="fade" id="s38-yes" style="
        width: 330px; padding: 20px; border-radius: 14px;
        border: 1.5px solid var(--red); text-align: center;
      ">
        <div style="font-size: 1.2rem; font-weight: 700; color: var(--red); margin-bottom: 8px;">Yes — payment was owed</div>
        <div style="font-size: 0.88rem; font-weight: 300; color: var(--gray-light); line-height: 1.6;">
          Platform processed the order and owed the restaurant.<br>
          Now it <strong style="color: var(--red-light);">deducts it</strong> from a future payout.<br>
          Restaurant sees less money in their bank.
        </div>
        <div style="margin-top: 12px; padding: 6px 14px; border-radius: 6px;
                    background: rgba(252,98,85,0.08);
                    font-size: 0.95rem; font-weight: 700; color: var(--red);">
          unfulfilled_refunds
        </div>
        <div style="font-family: monospace; font-size: 0.65rem; color: var(--gray-dark); margin-top: 6px;">UNFULFILLED_REFUND</div>
      </div>

      <!-- NO — never paid -->
      <div class="fade" id="s38-no" style="
        width: 330px; padding: 20px; border-radius: 14px;
        border: 1.5px solid var(--gray); text-align: center;
      ">
        <div style="font-size: 1.2rem; font-weight: 700; color: var(--gray-light); margin-bottom: 8px;">No — never paid</div>
        <div style="font-size: 0.88rem; font-weight: 300; color: var(--gray-light); line-height: 1.6;">
          Order missed or cancelled before payment processed.<br>
          Restaurant gets <strong style="color: var(--gray-light);">$0</strong>.<br>
          No deduction needed — the restaurant was never owed anything.
        </div>
        <div style="margin-top: 12px; padding: 6px 14px; border-radius: 6px;
                    background: rgba(255,255,255,0.04);
                    font-size: 0.95rem; font-weight: 700; color: var(--gray-light);">
          unfulfilled_sales
        </div>
        <div style="font-family: monospace; font-size: 0.65rem; color: var(--gray-dark); margin-top: 6px;">CANCELLED_NOT_PAID / MISSED_NOT_PAID</div>
      </div>
    </div>
  </div>

  <div class="callout" id="s38-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.9 — Unattributed: Losses Without an Order
     Steps: 0=blank, 1=title+bucket, 2=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-9">
  <div class="slide-title" id="s39-title">Unattributed: Losses Without an Order</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 10px;">
    <div class="fade" id="s39-bucket" style="
      width: 480px; padding: 24px 28px; border-radius: 14px;
      border: 1.5px solid var(--blue-dark); text-align: center;
    ">
      <div style="font-size: 1.2rem; font-weight: 700; color: var(--blue);">unattributed_customer_refunds</div>
      <div style="font-size: 0.85rem; font-weight: 300; color: var(--gray); margin-top: 12px; line-height: 1.6;">
        The order tree covers fulfilled and unfulfilled — orders we can identify.<br>
        But some losses can't be matched to any specific order.<br>
        Bulk platform adjustments. Credits without order IDs.<br>
        Grouped by <strong style="color: var(--gray-light);">payout date</strong>, not order date.
      </div>
      <div style="margin-top: 14px; padding: 8px 16px; border-radius: 6px;
                  background: rgba(88, 196, 221, 0.08);
                  font-size: 0.85rem; font-weight: 400; color: var(--blue);">
        Still count as losses. Still recoverable.
      </div>
    </div>
  </div>

  <div class="callout" id="s39-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.10 — The Complete Financial Map
     Steps: 0=blank, 1=title+tree, 2=formula, 3=won
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-10">
  <div class="slide-title" id="s310-title">The Complete Financial Map</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 6px;">
    <!-- Tree summary -->
    <div class="fade" id="s310-tree" style="
      font-family: monospace; font-size: 0.82rem; line-height: 2;
      color: var(--gray-light); text-align: left; padding: 16px 24px;
      border: 1px solid var(--gray-dark); border-radius: 10px;
    ">
      <span style="color: var(--white); font-weight: 700;">Restaurant loses money</span><br>
      ├── <span style="color: var(--green);">Fulfilled</span> → <span style="color: var(--red);">customer_refunds</span> <span style="color: var(--gray-dark);">(INACCURATE)</span><br>
      ├── <span style="color: var(--red);">Unfulfilled</span><br>
      │&nbsp;&nbsp; ├── <span style="color: var(--red);">unfulfilled_refunds</span> <span style="color: var(--gray-dark);">(deducted)</span><br>
      │&nbsp;&nbsp; └── <span style="color: var(--gray-light);">unfulfilled_sales</span> <span style="color: var(--gray-dark);">(never paid)</span><br>
      └── <span style="color: var(--blue);">unattributed_customer_refunds</span> <span style="color: var(--gray-dark);">(no order ID)</span>
    </div>

    <!-- Formula -->
    <div class="fade" id="s310-formula" style="
      padding: 14px 28px; border-radius: 10px;
      border: 1.5px solid var(--gold); text-align: center;
    ">
      <div style="font-size: 0.75rem; font-weight: 700; color: var(--gray-dark); letter-spacing: 0.05em; margin-bottom: 6px;">TOTAL MERCHANT LOSS</div>
      <div style="font-size: 0.9rem; font-weight: 400; color: var(--gold); line-height: 1.6;">
        customer_refunds + unfulfilled_refunds + unfulfilled_sales + unattributed
      </div>
    </div>

    <!-- Won disputes -->
    <div class="fade" id="s310-won" style="
      padding: 14px 28px; border-radius: 10px;
      border: 1.5px solid var(--green); text-align: center;
    ">
      <div style="font-size: 0.75rem; font-weight: 700; color: var(--gray-dark); letter-spacing: 0.05em; margin-bottom: 6px;">WHAT RECOVER GETS BACK</div>
      <div style="font-size: 1.1rem; font-weight: 700; color: var(--green);">won_disputes</div>
      <div style="font-size: 0.78rem; font-weight: 300; color: var(--gray); margin-top: 4px;">
        Wins across all buckets — inaccurate, unfulfilled, unattributed
      </div>
    </div>
  </div>

  <div class="callout" id="s310-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.11 — Dispute Windows
     Steps: 0=blank, 1=title+can dispute, 2=deadline, 3=platforms, 4=expired
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-11">
  <div class="slide-title" id="s311-title">Dispute Windows</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 10px;">
    <!-- Can dispute -->
    <div class="fade" id="s311-intro" style="
      display: flex; align-items: center; gap: 12px;
      font-size: 1.1rem; font-weight: 300; color: var(--gray-light);
    ">
      <span style="font-size: 1.6rem;">&#9878;</span>
      The restaurant can <strong style="color: var(--white); font-weight: 700;">dispute</strong> unfair charges.
    </div>

    <!-- But deadline -->
    <div class="fade" id="s311-deadline" style="
      font-size: 1rem; color: var(--red); font-weight: 400;
    ">&#9200; But there's a deadline.</div>

    <!-- Platform windows -->
    <div class="fade" id="s311-platforms" style="display: flex; gap: 20px;">
      <div style="padding: 16px 24px; border-radius: 10px; border: 1.5px solid var(--red); text-align: center; width: 180px;">
        <div style="font-size: 0.82rem; font-weight: 700; color: var(--red);">DoorDash</div>
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--red); margin-top: 4px;">14 days</div>
      </div>
      <div style="padding: 16px 24px; border-radius: 10px; border: 1.5px solid var(--green); text-align: center; width: 180px;">
        <div style="font-size: 0.82rem; font-weight: 700; color: var(--green);">UberEats</div>
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--green); margin-top: 4px;">30 days</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 2px;">14 for McDonald's</div>
      </div>
      <div style="padding: 16px 24px; border-radius: 10px; border: 1.5px solid var(--gold); text-align: center; width: 180px;">
        <div style="font-size: 0.82rem; font-weight: 700; color: var(--gold);">Grubhub</div>
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--gold); margin-top: 4px;">30 days</div>
      </div>
    </div>

    <!-- Expired -->
    <div class="fade" id="s311-expired" style="
      padding: 10px 28px; border-radius: 8px;
      background: rgba(252, 98, 85, 0.1); border: 1.5px solid var(--red);
      font-size: 0.95rem; font-weight: 700; color: var(--red);
    ">EXPIRED. No recourse. Ever.</div>
  </div>

  <div class="callout" id="s311-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.12 — Loop's Pipeline
     Steps: 0=blank, 1=title+detect, 2=identify, 3=check, 4=dispute, 5=track
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-12">
  <div class="slide-title" id="s312-title">Loop's Recovery Pipeline</div>

  <div style="display: flex; align-items: center; gap: 0; margin-top: 20px;">
    <!-- Detect -->
    <div class="pipe-step" id="s312-p1">
      <div class="pipe-circle" style="border-color: var(--red);"><span>&#128233;</span></div>
      <div class="pipe-name" style="color: var(--red);">DETECT</div>
      <div class="pipe-sub">24–36h after order</div>
    </div>
    <div class="pipe-arrow" id="s312-a1">&#8594;</div>
    <!-- Identify -->
    <div class="pipe-step" id="s312-p2">
      <div class="pipe-circle" style="border-color: var(--gold);"><span>&#128270;</span></div>
      <div class="pipe-name" style="color: var(--gold);">IDENTIFY</div>
      <div class="pipe-sub">Find every loss</div>
    </div>
    <div class="pipe-arrow" id="s312-a2">&#8594;</div>
    <!-- Check -->
    <div class="pipe-step" id="s312-p3">
      <div class="pipe-circle" style="border-color: var(--blue);"><span>&#9989;</span></div>
      <div class="pipe-name" style="color: var(--blue);">CHECK</div>
      <div class="pipe-sub">Enabled? In window?</div>
    </div>
    <div class="pipe-arrow" id="s312-a3">&#8594;</div>
    <!-- Dispute -->
    <div class="pipe-step" id="s312-p4">
      <div class="pipe-circle" style="border-color: var(--teal);"><span>&#9878;</span></div>
      <div class="pipe-name" style="color: var(--teal);">DISPUTE</div>
      <div class="pipe-sub">Raise with platform</div>
    </div>
    <div class="pipe-arrow" id="s312-a4">&#8594;</div>
    <!-- Track -->
    <div class="pipe-step" id="s312-p5">
      <div class="pipe-circle" style="border-color: var(--green);"><span>&#128200;</span></div>
      <div class="pipe-name" style="color: var(--green);">TRACK</div>
      <div class="pipe-sub">Monitor outcome</div>
    </div>
  </div>

  <div class="callout" id="s312-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.13 — Enabled Gates
     Steps: 0=blank, 1=title+g1, 2=g2, 3=g3, 4=g4, 5=result
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-13">
  <div class="slide-title" id="s313-title">Four Gates to Recovery</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: 10px;">
    <div class="gate-step" id="s313-g1">
      <div class="gate-num" style="color: var(--blue);">1</div>
      <div class="gate-text"><strong style="color: var(--blue);">Chain Level</strong> — Is this chain using Recover?</div>
    </div>
    <div class="gate-arrow" id="s313-a1">&#8595;</div>
    <div class="gate-step" id="s313-g2">
      <div class="gate-num" style="color: var(--gold);">2</div>
      <div class="gate-text"><strong style="color: var(--gold);">Location Level</strong> — Is this specific store turned on?</div>
    </div>
    <div class="gate-arrow" id="s313-a2">&#8595;</div>
    <div class="gate-step" id="s313-g3">
      <div class="gate-num" style="color: var(--green);">3</div>
      <div class="gate-text"><strong style="color: var(--green);">Order Level</strong> — Was the restaurant charged? (merchant_charged = true)</div>
    </div>
    <div class="gate-arrow" id="s313-a3">&#8595;</div>
    <div class="gate-step" id="s313-g4">
      <div class="gate-num" style="color: var(--red);">4</div>
      <div class="gate-text"><strong style="color: var(--red);">Exclusion Check</strong> — Has this been manually excluded?</div>
    </div>
    <div class="gate-arrow" id="s313-a4">&#8595;</div>
    <div class="fade" id="s313-result" style="
      padding: 12px 28px; border-radius: 10px;
      border: 1.5px solid var(--green); text-align: center; margin-top: 4px;
    ">
      <div style="font-size: 1rem; font-weight: 700; color: var(--green);">All gates pass &#8594; ENABLED</div>
      <div style="font-size: 0.78rem; font-weight: 300; color: var(--gray); margin-top: 4px;">
        Any gate closed &#8594; NOT ENABLED &#8594; invisible to Recover
      </div>
    </div>
  </div>

  <div class="callout" id="s313-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.14 — Dispute Lifecycle
     Steps: 0=blank, 1=title+detected, 2=to_be_raised, 3=in_progress,
            4=outcomes, 5=expired
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-14">
  <div class="slide-title" id="s314-title">Dispute Lifecycle</div>

  <div style="display: flex; align-items: center; gap: 0; margin-top: 20px;">
    <div class="lc-status" id="s314-s1">
      <div class="lc-dot" style="border-color: var(--red); color: var(--red);">&#9888;</div>
      <div class="lc-name" style="color: var(--red);">DETECTED</div>
      <div class="lc-sub">24–36h</div>
    </div>
    <div class="pipe-arrow" id="s314-a1">&#8594;</div>
    <div class="lc-status" id="s314-s2">
      <div class="lc-dot" style="border-color: var(--gold); color: var(--gold);">&#128196;</div>
      <div class="lc-name" style="color: var(--gold);">TO BE RAISED</div>
      <div class="lc-sub">Queued</div>
    </div>
    <div class="pipe-arrow" id="s314-a2">&#8594;</div>
    <div class="lc-status" id="s314-s3">
      <div class="lc-dot" style="border-color: var(--blue); color: var(--blue);">&#9203;</div>
      <div class="lc-name" style="color: var(--blue);">IN PROGRESS</div>
      <div class="lc-sub">Submitted</div>
    </div>
    <div class="pipe-arrow" id="s314-a3">&#8594;</div>
    <!-- Outcomes -->
    <div class="fade" id="s314-outcomes" style="display: flex; flex-direction: column; gap: 10px;">
      <div style="padding: 8px 20px; border-radius: 8px; border: 1.5px solid var(--green);
                  font-size: 0.85rem; font-weight: 700; color: var(--green); text-align: center;">
        &#x2713; ACCEPTED<br><span style="font-size: 0.7rem; font-weight: 300; color: var(--gray);">Money recovered</span>
      </div>
      <div style="padding: 8px 20px; border-radius: 8px; border: 1.5px solid var(--red);
                  font-size: 0.85rem; font-weight: 700; color: var(--red); text-align: center;">
        &#x2717; DENIED<br><span style="font-size: 0.7rem; font-weight: 300; color: var(--gray);">Charge stands</span>
      </div>
    </div>
  </div>

  <!-- Expired (below) -->
  <div class="fade" id="s314-expired" style="
    margin-top: 24px; padding: 10px 24px; border-radius: 8px;
    background: rgba(252, 98, 85, 0.08); border: 1px solid var(--red);
    font-size: 0.85rem; color: var(--red); text-align: center;
  ">
    &#9200; Window passes before submission &#8594; <strong>EXPIRED</strong> — no recovery possible
  </div>

  <div class="callout" id="s314-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.15 — Win Rate Formula + Why >100%
     Steps: 0=blank, 1=title+formula, 2=numerator, 3=denominator, 4=why >100%
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-15">
  <div class="slide-title" id="s315-title">Win Rate: The Key Metric</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 18px; margin-top: 10px;">
    <!-- Formula -->
    <div class="fade" id="s315-formula" style="
      padding: 18px 36px; border-radius: 12px;
      border: 1.5px solid var(--white); text-align: center;
    ">
      <div style="font-size: 1.3rem; font-weight: 700; color: var(--white);">
        Win Rate = <span style="color: var(--green);">Won</span> &divide; <span style="color: var(--gold);">Settled</span> &times; 100
      </div>
    </div>

    <div style="display: flex; gap: 28px;">
      <!-- Numerator -->
      <div class="fade" id="s315-num" style="
        width: 300px; padding: 18px 20px; border-radius: 12px;
        border: 1.5px solid var(--green); text-align: center;
      ">
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--gray-dark); letter-spacing: 0.05em; margin-bottom: 6px;">NUMERATOR</div>
        <div style="font-size: 1.05rem; font-weight: 700; color: var(--green);">Won Amount</div>
        <div style="font-size: 0.78rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.6;">
          ALL categories:<br>
          Inaccurate + Cancelled + Missed + Unattributed
        </div>
      </div>
      <!-- Denominator -->
      <div class="fade" id="s315-den" style="
        width: 300px; padding: 18px 20px; border-radius: 12px;
        border: 1.5px solid var(--gold); text-align: center;
      ">
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--gray-dark); letter-spacing: 0.05em; margin-bottom: 6px;">DENOMINATOR</div>
        <div style="font-size: 1.05rem; font-weight: 700; color: var(--gold);">Settled Amount</div>
        <div style="font-size: 0.72rem; font-weight: 300; color: var(--gray); margin-top: 4px;">(disputes that reached a final outcome — accepted or denied)</div>
        <div style="font-size: 0.78rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.6;">
          INACCURATE only:<br>
          Resolved customer_refund transactions
        </div>
      </div>
    </div>

    <!-- Why >100% -->
    <div class="fade" id="s315-why" style="
      padding: 14px 28px; border-radius: 10px;
      border: 1.5px solid var(--teal); text-align: center; max-width: 560px;
    ">
      <div style="font-size: 0.95rem; font-weight: 400; color: var(--teal);">
        Numerator includes cancelled + missed + unattributed wins.<br>
        Denominator is inaccurate only.
      </div>
      <div style="font-size: 0.85rem; font-weight: 300; color: var(--gray); margin-top: 8px; line-height: 1.6;">
        <strong style="color: var(--gray-light);">Why?</strong> The restaurant only sees <em style="font-style: normal; color: var(--gold);">inaccurate</em> charges on their statement.<br>
        But Loop recovers across <em style="font-style: normal; color: var(--green);">all loss types</em> — so wins can exceed what they know about.
      </div>
      <div style="font-size: 1.1rem; font-weight: 700; color: var(--white); margin-top: 8px;">
        Win rate can exceed 100%. By design.
      </div>
    </div>
  </div>

  <div class="callout" id="s315-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.15b — In The Product: Recover
     Steps: 1=show screenshot + explanation
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-15b">
  <div class="slide-title" id="s315b-title">In The Product: Recover</div>

  <div class="screenshot-container">
    <img src="img/recover-overview.png" alt="Recover Overview" class="screenshot-img zoom-recover fade" id="s315b-img"
         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
    <div class="screenshot-placeholder" id="s315b-placeholder" style="display: none;">
      <span>Screenshot: Recover → Overview</span>
    </div>

    <div class="screenshot-caption fade" id="s315b-caption">
      <div class="metric">
        <span class="metric-label">Enabled Refunds:</span>
        <span class="metric-value">$183K</span>
      </div>
      <div class="metric">
        <span class="metric-label">→ Disputed:</span>
        <span class="metric-value blue">$113K</span>
      </div>
      <div class="metric">
        <span class="metric-label">→ Settled:</span>
        <span class="metric-value">$106K</span>
      </div>
      <div class="metric">
        <span class="metric-label">→ Won:</span>
        <span class="metric-value green">$73K</span>
        <span class="metric-value green" style="font-size: 0.85rem;">(68.74%)</span>
      </div>
    </div>
  </div>

  <div class="callout" id="s315b-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3.16 — Date Lag: Recover vs Balance (moved up)
     Steps: 0=blank, 1=title+timeline start, 2=dispute raised,
            3=accepted, 4=payout lag, 5=insight
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3-17">
  <div class="slide-title" id="s317-title">Date Lag: Recover vs Balance</div>

  <svg viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg" style="width: 800px; height: 200px; margin-top: 20px;">
    <!-- Timeline base -->
    <line x1="60" y1="100" x2="740" y2="100" stroke="#444" stroke-width="1"/>
    <!-- Order -->
    <g class="chain-node" id="s317-t1">
      <circle cx="120" cy="100" r="6" fill="#58C4DD"/>
      <text x="120" y="85" font-family="'Lato', sans-serif" font-size="13" font-weight="700"
            text-anchor="middle" fill="#58C4DD">Dec 28</text>
      <text x="120" y="130" font-family="'Lato', sans-serif" font-size="11" font-weight="300"
            text-anchor="middle" fill="#888">Customer orders</text>
    </g>
    <!-- Dispute raised -->
    <g class="chain-node" id="s317-t2">
      <circle cx="300" cy="100" r="6" fill="#F0AC5F"/>
      <text x="300" y="85" font-family="'Lato', sans-serif" font-size="13" font-weight="700"
            text-anchor="middle" fill="#F0AC5F">Jan 3</text>
      <text x="300" y="130" font-family="'Lato', sans-serif" font-size="11" font-weight="300"
            text-anchor="middle" fill="#888">Loop raises dispute</text>
    </g>
    <!-- Accepted -->
    <g class="chain-node" id="s317-t3">
      <circle cx="480" cy="100" r="6" fill="#83C167"/>
      <text x="480" y="85" font-family="'Lato', sans-serif" font-size="13" font-weight="700"
            text-anchor="middle" fill="#83C167">Jan 18</text>
      <text x="480" y="130" font-family="'Lato', sans-serif" font-size="11" font-weight="300"
            text-anchor="middle" fill="#888">Platform accepts</text>
      <text x="480" y="150" font-family="'Lato', sans-serif" font-size="10" font-weight="700"
            text-anchor="middle" fill="#83C167">&#8593; Recover sees it here</text>
    </g>
    <!-- Payout -->
    <g class="chain-node" id="s317-t4">
      <circle cx="660" cy="100" r="6" fill="#9CDCEB"/>
      <text x="660" y="85" font-family="'Lato', sans-serif" font-size="13" font-weight="700"
            text-anchor="middle" fill="#9CDCEB">Feb 4</text>
      <text x="660" y="130" font-family="'Lato', sans-serif" font-size="11" font-weight="300"
            text-anchor="middle" fill="#888">Hits restaurant payout</text>
      <text x="660" y="150" font-family="'Lato', sans-serif" font-size="10" font-weight="700"
            text-anchor="middle" fill="#9CDCEB">&#8593; Balance sees it here</text>
    </g>
  </svg>

  <!-- Insight -->
  <div class="fade" id="s317-insight" style="
    padding: 14px 28px; border-radius: 10px;
    border: 1.5px solid var(--gold); text-align: center; max-width: 560px; margin-top: 8px;
  ">
    <div style="font-size: 0.95rem; font-weight: 400; color: var(--gold);">
      Same money. Different dates.
    </div>
    <div style="font-size: 0.85rem; font-weight: 300; color: var(--gray); margin-top: 6px; line-height: 1.5;">
      There's always a 2–6 week lag between Recover and Balance.<br>
      Converges over a quarter.
    </div>
  </div>

  <div class="callout" id="s317-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SECTION 3B — RE-ENGAGE (Customer Recovery)
     ═══════════════════════════════════════════════════════════════ -->

<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.1 — Re-Engage Title Card
     Steps: 1=title
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-1">
  <div class="fade scale" id="s3b1-title" style="
    position: absolute; top: 38%; left: 50%; transform: translate(-50%, -50%);
    text-align: center;
  ">
    <div style="font-size: 2.4rem; margin-bottom: 12px;">&#128172;</div>
    <div style="
      font-size: 3.6rem; font-weight: 700; letter-spacing: 0.04em;
      color: #F0AC5F;
    ">Re-Engage</div>
    <div style="
      margin-top: 12px; font-size: 0.95rem; letter-spacing: 0.12em;
      text-transform: uppercase; color: rgba(255,255,255,0.4);
    ">Customer Recovery</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.2 — The Review Problem
     Steps: 1=volume, 2=manual nightmare, 3=deadlines, 4=real cost
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-2">
  <div class="slide-title" id="s3b2-title">The Review Problem</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 14px; margin-top: 20px;">

    <!-- Volume -->
    <div class="fade" id="s3b2-volume" style="
      width: 600px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--gold); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.8rem;">📊</div>
      <div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--gold);">Volume</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 4px;">
          100 locations = <span style="color: var(--gray-light);">500+ reviews per week</span> across DoorDash and UberEats
        </div>
      </div>
    </div>

    <!-- Manual nightmare -->
    <div class="fade" id="s3b2-manual" style="
      width: 600px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--red); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.8rem;">⏰</div>
      <div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--red);">Manual = Impossible</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 4px;">
          Each response takes <span style="color: var(--gray-light);">5-10 minutes</span>. Read, craft, decide on coupon, post. Full-time job for multiple people.
        </div>
      </div>
    </div>

    <!-- Deadlines -->
    <div class="fade" id="s3b2-deadlines" style="
      width: 600px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--blue); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.8rem;">📅</div>
      <div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--blue);">Platform Deadlines</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 4px;">
          DoorDash: <span style="color: var(--red);">7 days</span>. UberEats: <span style="color: var(--green);">14 days</span>. Miss it? Can't respond at all.
        </div>
      </div>
    </div>

    <!-- Real cost -->
    <div class="fade" id="s3b2-cost" style="
      width: 600px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--gray-dark); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.8rem;">💸</div>
      <div>
        <div style="font-size: 0.95rem; font-weight: 700; color: var(--gray-light);">The Real Cost</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 4px;">
          Unhappy customer who doesn't hear from you = <span style="color: var(--red);">customer you'll never see again</span>
        </div>
      </div>
    </div>

  </div>

  <div class="callout" id="s3b2-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.3 — What Is Re-Engage?
     Steps: 1=definition, 2=the hook, 3=the result
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-3">
  <div class="slide-title" id="s3b3-title">What Is Re-Engage?</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 18px; margin-top: 24px;">

    <!-- Definition -->
    <div class="fade" id="s3b3-def" style="
      max-width: 640px; padding: 18px 24px; border-radius: 12px;
      border: 1.5px solid var(--gold); text-align: center;
    ">
      <div style="font-size: 1rem; color: var(--gray-light); line-height: 1.6;">
        Loop's <span style="color: var(--gold); font-weight: 700;">automated review response system</span>.<br>
        Responds to customer reviews on DoorDash and UberEats at scale — using <span style="color: var(--blue);">AI-generated responses</span> or <span style="color: var(--teal);">templates you define</span>.
      </div>
    </div>

    <!-- The hook -->
    <div class="fade" id="s3b3-hook" style="
      max-width: 640px; padding: 18px 24px; border-radius: 12px;
      border: 1.5px solid var(--green); text-align: center;
    ">
      <div style="font-size: 1rem; color: var(--gray-light); line-height: 1.6;">
        <span style="color: var(--green); font-weight: 700;">The hook:</span> Attach promotional coupons to responses.<br>
        Dissatisfied customer gets personalized apology + coupon = <span style="color: var(--green);">chance to win them back</span>.
      </div>
    </div>

    <!-- The result -->
    <div class="fade" id="s3b3-result" style="
      max-width: 640px; padding: 18px 24px; border-radius: 12px;
      border: 1.5px solid var(--blue); text-align: center;
    ">
      <div style="font-size: 1rem; color: var(--gray-light); line-height: 1.6;">
        <span style="color: var(--blue); font-weight: 700;">The result:</span> Thousands of reviews handled without manual effort.<br>
        Every review gets a timely response. Every unhappy customer gets a chance to come back.
      </div>
    </div>

  </div>

  <div class="callout" id="s3b3-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.3b — In The Product: Re-Engage
     Steps: 1=show screenshot + explanation
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-3b">
  <div class="slide-title" id="s3b3b-title">In The Product: Re-Engage</div>

  <div class="screenshot-container">
    <img src="img/reengage-reviews.png" alt="Re-Engage Reviews" class="screenshot-img zoom-reengage fade" id="s3b3b-img"
         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
    <div class="screenshot-placeholder" id="s3b3b-placeholder" style="display: none;">
      <span>Screenshot: Re-Engage → Reviews</span>
    </div>

    <div class="screenshot-caption fade" id="s3b3b-caption">
      <div class="metric">
        <span class="metric-label">Avg Rating:</span>
        <span class="metric-value gold">4.36</span>
        <span class="metric-label" style="font-size: 0.7rem;">(41,799 ratings)</span>
      </div>
      <div class="metric">
        <span class="metric-label">Total Reviews:</span>
        <span class="metric-value">41,800</span>
      </div>
      <div class="metric">
        <span class="metric-label">Replied:</span>
        <span class="metric-value green">10,280</span>
      </div>
      <div class="metric">
        <span class="metric-label">Waiting:</span>
        <span class="metric-value red">4,225</span>
      </div>
    </div>
  </div>

  <div class="callout" id="s3b3b-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.4 — How Customers Rate Orders
     Steps: 1=ubereats, 2=doordash, 3=why it matters, 4=with/without text
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-4">
  <div class="slide-title" id="s3b4-title">How Customers Rate Orders</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 20px;">

    <!-- Platform comparison -->
    <div style="display: flex; gap: 32px;">

      <!-- UberEats -->
      <div class="fade" id="s3b4-ue" style="
        width: 260px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--green); text-align: center;
      ">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--green); margin-bottom: 12px;">UberEats</div>
        <div style="font-size: 1.8rem; margin-bottom: 8px;">⭐⭐⭐⭐⭐</div>
        <div style="font-size: 0.8rem; color: var(--gray); line-height: 1.5;">
          1-5 star ratings<br>
          <span style="color: var(--red);">1-2 = Negative</span><br>
          <span style="color: var(--gray-light);">3 = Neutral</span><br>
          <span style="color: var(--green);">4-5 = Positive</span>
        </div>
      </div>

      <!-- DoorDash -->
      <div class="fade" id="s3b4-dd" style="
        width: 260px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--red); text-align: center;
      ">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--red); margin-bottom: 12px;">DoorDash</div>
        <div style="font-size: 1.8rem; margin-bottom: 8px;">👎 👍 ❤️</div>
        <div style="font-size: 0.8rem; color: var(--gray); line-height: 1.5;">
          Three-button system<br>
          <span style="color: var(--red);">Thumbs Down = Negative</span><br>
          <span style="color: var(--gray-light);">Thumbs Up = Neutral</span><br>
          <span style="color: var(--green);">Loved = Positive</span>
        </div>
      </div>

    </div>

    <!-- Why it matters -->
    <div class="fade" id="s3b4-why" style="
      max-width: 560px; padding: 14px 20px; border-radius: 10px;
      border: 1px solid var(--gray-dark); text-align: center;
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light);">
        <span style="color: var(--gold); font-weight: 700;">Why this matters:</span> The appropriate response depends on the rating.<br>
        5-star needs a thank you. 1-star needs an apology + recovery offer.
      </div>
    </div>

    <!-- With/without feedback -->
    <div class="fade" id="s3b4-feedback" style="
      max-width: 560px; padding: 14px 20px; border-radius: 10px;
      border: 1px solid var(--gray-dark); text-align: center;
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light);">
        Customers can rate <span style="color: var(--teal);">with</span> or <span style="color: var(--gray);">without</span> written feedback.<br>
        A 1-star with no text ≠ 1-star with "hair in my food." Re-Engage handles both differently.
      </div>
    </div>

  </div>

  <div class="callout" id="s3b4-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.5 — Two Response Types
     Steps: 1=AI, 2=Template, 3=when to use
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-5">
  <div class="slide-title" id="s3b5-title">Two Response Types</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 24px;">

    <div style="display: flex; gap: 32px;">

      <!-- AI Response -->
      <div class="fade" id="s3b5-ai" style="
        width: 280px; padding: 20px; border-radius: 14px;
        border: 1.5px solid var(--blue); text-align: center;
      ">
        <div style="font-size: 2rem; margin-bottom: 10px;">🤖</div>
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--blue);">AI Response</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 10px; line-height: 1.5;">
          GPT-4 reads the review and generates a <span style="color: var(--blue);">unique, contextual response</span>.<br><br>
          Customer complained about cold food? AI acknowledges the cold food <em>specifically</em>.
        </div>
      </div>

      <!-- Template Response -->
      <div class="fade" id="s3b5-template" style="
        width: 280px; padding: 20px; border-radius: 14px;
        border: 1.5px solid var(--teal); text-align: center;
      ">
        <div style="font-size: 2rem; margin-bottom: 10px;">📝</div>
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--teal);">Template Response</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 10px; line-height: 1.5;">
          You write templates. System picks one.<br>
          Multiple templates for variety.<br><br>
          Variables like <span style="color: var(--teal);">{customer_name}</span> and <span style="color: var(--teal);">{coupon}</span> filled automatically.
        </div>
      </div>

    </div>

    <!-- When to use -->
    <div class="fade" id="s3b5-when" style="
      max-width: 580px; padding: 16px 24px; border-radius: 10px;
      border: 1px solid var(--gray-dark); text-align: center;
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light); line-height: 1.6;">
        <span style="color: var(--gold); font-weight: 700;">When to use each:</span><br>
        <span style="color: var(--blue);">AI</span> = Reviews WITH feedback (responds to specific complaints)<br>
        <span style="color: var(--teal);">Templates</span> = Reviews WITHOUT feedback, or when you want tighter brand control
      </div>
    </div>

  </div>

  <div class="callout" id="s3b5-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.6 — AI Response: How It Works
     Steps: 1=inputs, 2=tone adjustment, 3=constraints, 4=example neg, 5=example pos
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-6">
  <div class="slide-title" id="s3b6-title">AI Response: How It Works</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 16px;">

    <!-- Inputs -->
    <div class="fade" id="s3b6-inputs" style="
      width: 640px; padding: 12px 18px; border-radius: 10px;
      border: 1px solid var(--gray-dark);
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light);">
        <span style="color: var(--blue); font-weight: 700;">Inputs:</span>
        Customer name, rating, review text, items ordered, coupon amount
      </div>
    </div>

    <!-- Tone adjustment -->
    <div class="fade" id="s3b6-tone" style="
      width: 640px; padding: 12px 18px; border-radius: 10px;
      border: 1px solid var(--gray-dark);
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light);">
        <span style="color: var(--gold); font-weight: 700;">Tone adjustment:</span>
        <span style="color: var(--red);">Negative → Apologetic</span> |
        <span style="color: var(--gray);">Neutral → Professional</span> |
        <span style="color: var(--green);">Positive → Your configured tonality</span>
      </div>
    </div>

    <!-- Constraints -->
    <div class="fade" id="s3b6-constraints" style="
      width: 640px; padding: 12px 18px; border-radius: 10px;
      border: 1px solid var(--gray-dark);
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light);">
        <span style="color: var(--red); font-weight: 700;">Constraints:</span>
        ≤300 chars (DD) or ≤500 chars (UE) | Customer name MUST appear | Coupon MUST be mentioned if given
      </div>
    </div>

    <!-- Example: Negative -->
    <div class="fade" id="s3b6-ex-neg" style="
      width: 640px; padding: 14px 18px; border-radius: 10px;
      border: 1.5px solid var(--red);
    ">
      <div style="font-size: 0.75rem; color: var(--gray); margin-bottom: 6px;">
        <strong>Example:</strong> Mike • 1-star • "Burger was cold and fries were missing" • $10 coupon
      </div>
      <div style="font-size: 0.85rem; color: var(--gray-light); font-style: italic;">
        "Mike, we're so sorry your burger arrived cold and you were missing fries. That's not the experience we want for you. Please accept $10 off your next order — we'd love a chance to make it right."
      </div>
    </div>

    <!-- Example: Positive -->
    <div class="fade" id="s3b6-ex-pos" style="
      width: 640px; padding: 14px 18px; border-radius: 10px;
      border: 1.5px solid var(--green);
    ">
      <div style="font-size: 0.75rem; color: var(--gray); margin-bottom: 6px;">
        <strong>Example:</strong> Sarah • 5-star • "Best tacos ever!" • No coupon
      </div>
      <div style="font-size: 0.85rem; color: var(--gray-light); font-style: italic;">
        "Sarah, you just made our day! So glad you loved the tacos. Can't wait to serve you again!"
      </div>
    </div>

  </div>

  <div class="callout" id="s3b6-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.7 — Configuration: Matching Criteria
     Steps: 1=concept, 2=platform, 3=rating, 4=customer type, 5=location
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-7">
  <div class="slide-title" id="s3b7-title">Configuration: Matching Criteria</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 20px;">

    <!-- Concept -->
    <div class="fade" id="s3b7-concept" style="
      font-size: 0.9rem; color: var(--gray); margin-bottom: 8px;
    ">
      Configurations are rules: <span style="color: var(--gold);">which reviews to match</span> and <span style="color: var(--teal);">how to respond</span>
    </div>

    <div style="display: flex; gap: 16px; flex-wrap: wrap; justify-content: center;">

      <!-- Platform -->
      <div class="fade" id="s3b7-platform" style="
        width: 150px; padding: 14px; border-radius: 10px;
        border: 1.5px solid var(--blue); text-align: center;
      ">
        <div style="font-size: 1.2rem; margin-bottom: 6px;">📱</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--blue);">Platform</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px;">
          DoorDash, UberEats, or both
        </div>
      </div>

      <!-- Rating -->
      <div class="fade" id="s3b7-rating" style="
        width: 150px; padding: 14px; border-radius: 10px;
        border: 1.5px solid var(--gold); text-align: center;
      ">
        <div style="font-size: 1.2rem; margin-bottom: 6px;">⭐</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--gold);">Rating</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px;">
          1-2 stars for recovery,<br>5 stars for thank-yous
        </div>
      </div>

      <!-- Customer Type -->
      <div class="fade" id="s3b7-customer" style="
        width: 150px; padding: 14px; border-radius: 10px;
        border: 1.5px solid var(--teal); text-align: center;
      ">
        <div style="font-size: 1.2rem; margin-bottom: 6px;">👤</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--teal);">Customer Type</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px;">
          New or existing?<br>Different coupon strategies
        </div>
      </div>

      <!-- Location -->
      <div class="fade" id="s3b7-location" style="
        width: 150px; padding: 14px; border-radius: 10px;
        border: 1.5px solid var(--green); text-align: center;
      ">
        <div style="font-size: 1.2rem; margin-bottom: 6px;">📍</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--green);">Location</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px;">
          All stores or specific ones?
        </div>
      </div>

    </div>

  </div>

  <div class="callout" id="s3b7-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.8 — Configuration: Coupon Settings
     Steps: 1=platform-specific, 2=doordash, 3=ubereats, 4=strategy
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-8">
  <div class="slide-title" id="s3b8-title">Configuration: Coupon Settings</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 24px;">

    <!-- Platform-specific -->
    <div class="fade" id="s3b8-intro" style="
      font-size: 0.9rem; color: var(--gray);
    ">
      Coupons are configured <span style="color: var(--gold);">per platform</span> — different options available
    </div>

    <div style="display: flex; gap: 32px;">

      <!-- DoorDash -->
      <div class="fade" id="s3b8-dd" style="
        width: 260px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--red); text-align: center;
      ">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--red); margin-bottom: 12px;">DoorDash</div>
        <div style="font-size: 0.85rem; color: var(--gray-light); line-height: 1.6;">
          <span style="color: var(--gray);">Fixed amount only</span><br>
          $5 | $10 | $15 | Custom<br><br>
          <span style="color: var(--gray);">No minimum order requirement</span>
        </div>
      </div>

      <!-- UberEats -->
      <div class="fade" id="s3b8-ue" style="
        width: 260px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--green); text-align: center;
      ">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--green); margin-bottom: 12px;">UberEats</div>
        <div style="font-size: 0.85rem; color: var(--gray-light); line-height: 1.6;">
          <span style="color: var(--gray);">Fixed amount + minimum order</span><br>
          $5 | $11 | $20<br><br>
          <span style="color: var(--gray);">e.g., "$11 off orders over $15"</span>
        </div>
      </div>

    </div>

    <!-- Strategy -->
    <div class="fade" id="s3b8-strategy" style="
      max-width: 560px; padding: 14px 20px; border-radius: 10px;
      border: 1px solid var(--gray-dark); text-align: center;
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light); line-height: 1.5;">
        <span style="color: var(--gold); font-weight: 700;">Strategy:</span>
        <span style="color: var(--red);">Bigger coupons</span> for negative reviews (recovering relationships).
        <span style="color: var(--green);">Smaller/no coupons</span> for positive reviews (they already love you).
      </div>
    </div>

  </div>

  <div class="callout" id="s3b8-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.9 — Example Configurations
     Steps: 1=negative recovery, 2=new customer neutral, 3=positive thank you, 4=overlap note
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-9">
  <div class="slide-title" id="s3b9-title">Example Configurations</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 16px;">

    <!-- Negative recovery -->
    <div class="fade" id="s3b9-neg" style="
      width: 660px; padding: 14px 18px; border-radius: 10px;
      border: 1.5px solid var(--red);
    ">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--red);">Negative Review Recovery</div>
        <div style="font-size: 0.7rem; color: var(--gray);">AI • Apologetic</div>
      </div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 8px; line-height: 1.5;">
        1-2 stars + Thumbs Down | Both platforms | All customers | With or without feedback<br>
        <span style="color: var(--gold);">$10 DoorDash | $11 UberEats (min $15)</span>
      </div>
    </div>

    <!-- New customer neutral -->
    <div class="fade" id="s3b9-neutral" style="
      width: 660px; padding: 14px 18px; border-radius: 10px;
      border: 1.5px solid var(--gold);
    ">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--gold);">New Customer — 3 Star</div>
        <div style="font-size: 0.7rem; color: var(--gray);">AI • Enthusiastic</div>
      </div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 8px; line-height: 1.5;">
        3 stars + Thumbs Up | Both platforms | <span style="color: var(--teal);">New customers only</span> | With feedback<br>
        <span style="color: var(--gold);">$5 coupon</span> — encourage retry without overspending
      </div>
    </div>

    <!-- Positive thank you -->
    <div class="fade" id="s3b9-pos" style="
      width: 660px; padding: 14px 18px; border-radius: 10px;
      border: 1.5px solid var(--green);
    ">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--green);">Positive Review Thank You</div>
        <div style="font-size: 0.7rem; color: var(--gray);">Template • 3 variations</div>
      </div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 8px; line-height: 1.5;">
        4-5 stars + Loved | Both platforms | Existing customers | With feedback<br>
        <span style="color: var(--gray-light);">No coupon</span> — they already love you
      </div>
    </div>

    <!-- Overlap note -->
    <div class="fade" id="s3b9-overlap" style="
      max-width: 600px; padding: 12px 18px; border-radius: 8px;
      border: 1px solid var(--gray-dark); text-align: center;
    ">
      <div style="font-size: 0.8rem; color: var(--gray);">
        <span style="color: var(--gold);">Note:</span> If a review matches multiple configs, the system warns about overlap. Be intentional about coverage.
      </div>
    </div>

  </div>

  <div class="callout" id="s3b9-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.10 — The Re-Engage Pipeline
     Steps: 1=ingest, 2=match, 3=generate, 4=validate, 5=queue
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-10">
  <div class="slide-title" id="s3b10-title">The Re-Engage Pipeline</div>

  <div style="display: flex; align-items: center; gap: 10px; margin-top: 30px;">

    <!-- Ingest -->
    <div class="fade" id="s3b10-ingest" style="display: flex; flex-direction: column; align-items: center; width: 120px;">
      <div style="width: 56px; height: 56px; border-radius: 50%; border: 1.5px solid var(--blue); display: flex; align-items: center; justify-content: center; font-size: 1.4rem;">📥</div>
      <div style="font-size: 0.8rem; font-weight: 700; color: var(--blue); margin-top: 8px;">Ingest</div>
      <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px; text-align: center;">Pull reviews<br>from platforms</div>
    </div>

    <div class="fade" id="s3b10-a1" style="font-size: 1.2rem; color: var(--gray-dark);">→</div>

    <!-- Match -->
    <div class="fade" id="s3b10-match" style="display: flex; flex-direction: column; align-items: center; width: 120px;">
      <div style="width: 56px; height: 56px; border-radius: 50%; border: 1.5px solid var(--gold); display: flex; align-items: center; justify-content: center; font-size: 1.4rem;">🎯</div>
      <div style="font-size: 0.8rem; font-weight: 700; color: var(--gold); margin-top: 8px;">Match</div>
      <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px; text-align: center;">Find matching<br>configuration</div>
    </div>

    <div class="fade" id="s3b10-a2" style="font-size: 1.2rem; color: var(--gray-dark);">→</div>

    <!-- Generate -->
    <div class="fade" id="s3b10-generate" style="display: flex; flex-direction: column; align-items: center; width: 120px;">
      <div style="width: 56px; height: 56px; border-radius: 50%; border: 1.5px solid var(--teal); display: flex; align-items: center; justify-content: center; font-size: 1.4rem;">🤖</div>
      <div style="font-size: 0.8rem; font-weight: 700; color: var(--teal); margin-top: 8px;">Generate</div>
      <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px; text-align: center;">AI or template<br>creates response</div>
    </div>

    <div class="fade" id="s3b10-a3" style="font-size: 1.2rem; color: var(--gray-dark);">→</div>

    <!-- Validate -->
    <div class="fade" id="s3b10-validate" style="display: flex; flex-direction: column; align-items: center; width: 120px;">
      <div style="width: 56px; height: 56px; border-radius: 50%; border: 1.5px solid var(--red); display: flex; align-items: center; justify-content: center; font-size: 1.4rem;">✓</div>
      <div style="font-size: 0.8rem; font-weight: 700; color: var(--red); margin-top: 8px;">Validate</div>
      <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px; text-align: center;">Check name,<br>coupon, length</div>
    </div>

    <div class="fade" id="s3b10-a4" style="font-size: 1.2rem; color: var(--gray-dark);">→</div>

    <!-- Queue -->
    <div class="fade" id="s3b10-queue" style="display: flex; flex-direction: column; align-items: center; width: 120px;">
      <div style="width: 56px; height: 56px; border-radius: 50%; border: 1.5px solid var(--green); display: flex; align-items: center; justify-content: center; font-size: 1.4rem;">📤</div>
      <div style="font-size: 0.8rem; font-weight: 700; color: var(--green); margin-top: 8px;">Queue</div>
      <div style="font-size: 0.65rem; color: var(--gray); margin-top: 4px; text-align: center;">Ready to send<br>to platform</div>
    </div>

  </div>

  <div class="callout" id="s3b10-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.11 — Re-Engagement Metrics
     Steps: 1=key question, 2=rate, 3=voucher lift, 4=the math
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-11">
  <div class="slide-title" id="s3b11-title">Re-Engagement Metrics</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 14px; margin-top: 24px;">

    <!-- Key question -->
    <div class="fade" id="s3b11-question" style="
      font-size: 1rem; color: var(--gray-light);
    ">
      How do you know if Re-Engage is working? <span style="color: var(--gold);">Did customers actually come back?</span>
    </div>

    <!-- Re-engagement rate -->
    <div class="fade" id="s3b11-rate" style="
      width: 580px; padding: 16px 20px; border-radius: 10px;
      border: 1.5px solid var(--teal);
    ">
      <div style="font-size: 0.95rem; font-weight: 700; color: var(--teal);">Re-engagement Rate</div>
      <div style="font-size: 0.8rem; color: var(--gray); margin-top: 6px;">
        Of customers who received a response, what % placed another order within 7 / 14 / 30 / 90 days?
      </div>
    </div>

    <!-- Voucher lift -->
    <div class="fade" id="s3b11-lift" style="
      width: 580px; padding: 16px 20px; border-radius: 10px;
      border: 1.5px solid var(--green);
    ">
      <div style="font-size: 0.95rem; font-weight: 700; color: var(--green);">Voucher Lift</div>
      <div style="font-size: 0.8rem; color: var(--gray); margin-top: 6px;">
        How much higher is re-engagement for customers who got a coupon vs those who didn't?<br>
        <span style="color: var(--gray-light);">→ Tells you if coupons are worth the cost</span>
      </div>
    </div>

    <!-- The math -->
    <div class="fade" id="s3b11-math" style="
      width: 580px; padding: 16px 20px; border-radius: 10px;
      border: 1.5px solid var(--gold);
    ">
      <div style="font-size: 0.95rem; font-weight: 700; color: var(--gold);">Example</div>
      <div style="font-size: 0.8rem; color: var(--gray); margin-top: 6px; line-height: 1.5;">
        1,000 customers got responses with coupons. 250 re-ordered within 30 days = <span style="color: var(--green);">25% re-engagement</span>.<br>
        Without coupons: 10-15%. <span style="color: var(--gold);">Voucher lift = +10-15 percentage points</span> = hundreds of customers saved.
      </div>
    </div>

  </div>

  <div class="callout" id="s3b11-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.12 — Response Windows
     Steps: 1=doordash, 2=ubereats, 3=best practice
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-12">
  <div class="slide-title" id="s3b12-title">Response Windows</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 30px;">

    <div style="display: flex; gap: 40px;">

      <!-- DoorDash -->
      <div class="fade" id="s3b12-dd" style="
        width: 200px; padding: 24px; border-radius: 14px;
        border: 2px solid var(--red); text-align: center;
      ">
        <div style="font-size: 2.5rem; font-weight: 700; color: var(--red);">7</div>
        <div style="font-size: 0.9rem; color: var(--red);">days</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 10px;">DoorDash window</div>
      </div>

      <!-- UberEats -->
      <div class="fade" id="s3b12-ue" style="
        width: 200px; padding: 24px; border-radius: 14px;
        border: 2px solid var(--green); text-align: center;
      ">
        <div style="font-size: 2.5rem; font-weight: 700; color: var(--green);">14</div>
        <div style="font-size: 0.9rem; color: var(--green);">days</div>
        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 10px;">UberEats window</div>
      </div>

    </div>

    <!-- Best practice -->
    <div class="fade" id="s3b12-best" style="
      max-width: 520px; padding: 16px 24px; border-radius: 10px;
      border: 1.5px solid var(--gold); text-align: center;
    ">
      <div style="font-size: 0.9rem; color: var(--gold); font-weight: 700;">Best Practice: 24-48 hours</div>
      <div style="font-size: 0.8rem; color: var(--gray); margin-top: 8px; line-height: 1.5;">
        The faster you acknowledge the issue, the more likely they give you another chance.<br>
        Re-Engage generates responses daily — always inside the window.
      </div>
    </div>

  </div>

  <div class="callout" id="s3b12-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.13 — The Re-Engage Loop
     Steps: 1=capture, 2=respond, 3=recover, 4=measure
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-13">
  <div class="slide-title" id="s3b13-title">The Re-Engage Loop</div>

  <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-top: 40px;">

    <!-- Capture -->
    <div class="fade" id="s3b13-capture" style="display: flex; flex-direction: column; align-items: center;">
      <div style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--blue); display: flex; align-items: center; justify-content: center; font-size: 2rem;">📥</div>
      <div style="font-size: 1rem; font-weight: 700; color: var(--blue); margin-top: 10px;">Capture</div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px; text-align: center; max-width: 100px;">Every review pulled in</div>
    </div>

    <div class="fade" id="s3b13-a1" style="font-size: 1.5rem; color: var(--gray-dark);">→</div>

    <!-- Respond -->
    <div class="fade" id="s3b13-respond" style="display: flex; flex-direction: column; align-items: center;">
      <div style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--gold); display: flex; align-items: center; justify-content: center; font-size: 2rem;">💬</div>
      <div style="font-size: 1rem; font-weight: 700; color: var(--gold); margin-top: 10px;">Respond</div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px; text-align: center; max-width: 100px;">Personalized reply + coupon</div>
    </div>

    <div class="fade" id="s3b13-a2" style="font-size: 1.5rem; color: var(--gray-dark);">→</div>

    <!-- Recover -->
    <div class="fade" id="s3b13-recover" style="display: flex; flex-direction: column; align-items: center;">
      <div style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--green); display: flex; align-items: center; justify-content: center; font-size: 2rem;">🔄</div>
      <div style="font-size: 1rem; font-weight: 700; color: var(--green); margin-top: 10px;">Recover</div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px; text-align: center; max-width: 100px;">Customer uses coupon, orders again</div>
    </div>

    <div class="fade" id="s3b13-a3" style="font-size: 1.5rem; color: var(--gray-dark);">→</div>

    <!-- Measure -->
    <div class="fade" id="s3b13-measure" style="display: flex; flex-direction: column; align-items: center;">
      <div style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--teal); display: flex; align-items: center; justify-content: center; font-size: 2rem;">📊</div>
      <div style="font-size: 1rem; font-weight: 700; color: var(--teal); margin-top: 10px;">Measure</div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px; text-align: center; max-width: 100px;">Track re-engagement rates</div>
    </div>

  </div>

  <div class="callout" id="s3b13-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 3B.14 — What Re-Engage Covers vs Doesn't
     Steps: 1=covers, 2=doesnt, 3=handoff
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-3b-14">
  <div class="slide-title" id="s3b14-title">What Re-Engage Covers vs Doesn't</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 24px;">

    <div style="display: flex; gap: 24px;">

      <!-- Covers -->
      <div class="fade" id="s3b14-covers" style="
        width: 300px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--green);
      ">
        <div style="font-size: 1rem; font-weight: 700; color: var(--green); margin-bottom: 12px;">✓ Re-Engage Covers</div>
        <div style="font-size: 0.8rem; color: var(--gray); line-height: 1.7;">
          • Automated review detection<br>
          • AI + template response generation<br>
          • Coupon attachment<br>
          • Re-engagement tracking<br>
          • Response queueing
        </div>
      </div>

      <!-- Doesn't Cover -->
      <div class="fade" id="s3b14-doesnt" style="
        width: 300px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--red);
      ">
        <div style="font-size: 1rem; font-weight: 700; color: var(--red); margin-bottom: 12px;">✗ Does NOT Cover</div>
        <div style="font-size: 0.8rem; color: var(--gray); line-height: 1.7;">
          • Actually posting to platform<br>
          • Fixing underlying issues<br>
          • Google/Yelp reviews<br>
          • Guaranteed conversion
        </div>
      </div>

    </div>

    <!-- Handoff -->
    <div class="fade" id="s3b14-handoff" style="
      max-width: 600px; padding: 16px 24px; border-radius: 10px;
      border: 1px solid var(--gray-dark); text-align: center;
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light); line-height: 1.6;">
        Re-Engage is your <span style="color: var(--gold);">first-line response</span> — handles volume and speed.<br>
        Converting that angry customer into a loyal fan? That requires <span style="color: var(--green);">great food and service</span> on the next order.
      </div>
    </div>

  </div>

  <div class="callout" id="s3b14-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SECTION 4 — SOTU (State of the Union)
     ═══════════════════════════════════════════════════════════════ -->

<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.1 — SOTU Title Card
     Steps: 1=title
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-1">
  <div class="fade" id="s41-icon" style="font-size: 3rem; margin-bottom: 10px;">📊</div>
  <div class="fade" id="s41-title" style="font-size: 2.2rem; font-weight: 300; letter-spacing: 0.05em; color: var(--blue);">
    State of the Union
  </div>
  <div class="fade" id="s41-sub" style="font-size: 1rem; font-weight: 300; color: var(--gray); margin-top: 8px; letter-spacing: 0.1em;">
    OPERATIONAL INTELLIGENCE
  </div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.2 — Guard and Recover Fix What Broke. But Why Did It Break?
     Steps: 1=guard recap, 2=recover recap, 3=the gap, 4=SOTU intro
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-2">
  <div class="slide-title" id="s42-title">Guard and Recover Fix What Broke</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 10px;">

    <!-- Guard recap -->
    <div class="fade" id="s42-guard" style="display: flex; align-items: center; gap: 16px;">
      <div style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--green); display: flex; align-items: center; justify-content: center;">
        <span style="font-size: 2rem;">🛡️</span>
      </div>
      <div style="text-align: left;">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--green);">GUARD</div>
        <div style="font-size: 0.85rem; color: var(--gray); margin-top: 4px;">Fixes downtime <em>after</em> it happens</div>
      </div>
    </div>

    <!-- Recover recap -->
    <div class="fade" id="s42-recover" style="display: flex; align-items: center; gap: 16px;">
      <div style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--teal); display: flex; align-items: center; justify-content: center;">
        <span style="font-size: 2rem;">💰</span>
      </div>
      <div style="text-align: left;">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--teal);">RECOVER</div>
        <div style="font-size: 0.85rem; color: var(--gray); margin-top: 4px;">Wins back money <em>after</em> it's lost</div>
      </div>
    </div>

    <!-- The gap -->
    <div class="fade" id="s42-gap" style="
      max-width: 520px; padding: 16px 24px; border-radius: 12px;
      border: 1.5px solid var(--gold); text-align: center; margin-top: 10px;
    ">
      <div style="font-size: 0.95rem; font-weight: 400; color: var(--gold);">But neither asks <em>WHY</em></div>
      <div style="font-size: 0.82rem; color: var(--gray); margin-top: 8px; line-height: 1.6;">
        Which stores keep failing? What patterns are we missing?<br>
        Are problems getting better or worse?
      </div>
    </div>

    <!-- SOTU intro -->
    <div class="fade" id="s42-sotu" style="display: flex; align-items: center; gap: 16px; margin-top: 10px;">
      <div style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--blue); display: flex; align-items: center; justify-content: center;">
        <span style="font-size: 2rem;">📊</span>
      </div>
      <div style="text-align: left;">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--blue);">SOTU</div>
        <div style="font-size: 0.85rem; color: var(--gray); margin-top: 4px;">Shifts from <em>fix what broke</em> → <strong style="color: var(--blue);">fix why things break</strong></div>
      </div>
    </div>

  </div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.3 — Three Reports, Three Questions
     Steps: 1=title, 2=leaderboard, 3=benchmark, 4=problematic + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-3">
  <div class="slide-title" id="s43-title">Three Reports, Three Questions</div>

  <div style="display: flex; gap: 28px; margin-top: 30px;">

    <!-- Leaderboard -->
    <div class="fade" id="s43-r1" style="
      width: 240px; padding: 20px; border-radius: 12px;
      border: 1.5px solid var(--blue); text-align: center;
    ">
      <div style="font-size: 1.8rem; margin-bottom: 8px;">🏆</div>
      <div style="font-size: 1rem; font-weight: 700; color: var(--blue);">Leaderboard</div>
      <div style="font-size: 0.8rem; color: var(--gray); margin-top: 10px; line-height: 1.5;">
        Which stores are<br><strong style="color: var(--gray-light);">best and worst?</strong>
      </div>
    </div>

    <!-- Benchmark -->
    <div class="fade" id="s43-r2" style="
      width: 240px; padding: 20px; border-radius: 12px;
      border: 1.5px solid var(--teal); text-align: center;
    ">
      <div style="font-size: 1.8rem; margin-bottom: 8px;">📏</div>
      <div style="font-size: 1rem; font-weight: 700; color: var(--teal);">Benchmark</div>
      <div style="font-size: 0.8rem; color: var(--gray); margin-top: 10px; line-height: 1.5;">
        How do we compare to<br><strong style="color: var(--gray-light);">industry and top performers?</strong>
      </div>
    </div>

    <!-- Problematic Stores -->
    <div class="fade" id="s43-r3" style="
      width: 240px; padding: 20px; border-radius: 12px;
      border: 1.5px solid var(--red); text-align: center;
    ">
      <div style="font-size: 1.8rem; margin-bottom: 8px;">🔍</div>
      <div style="font-size: 1rem; font-weight: 700; color: var(--red);">Problematic Stores</div>
      <div style="font-size: 0.8rem; color: var(--gray); margin-top: 10px; line-height: 1.5;">
        Which stores are<br><strong style="color: var(--gray-light);">repeat offenders, and why?</strong>
      </div>
    </div>

  </div>

  <div class="callout" id="s43-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.3b — In The Product: SOTU / Delivery Intelligence
     Screenshot slide showing the actual Delivery Intelligence dashboard
     Steps: 1=show title + screenshot + explanation
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-3b">
  <div class="slide-title" id="s43b-title">In The Product: Delivery Intelligence</div>

  <div class="screenshot-container">
    <!-- Screenshot image -->
    <img src="img/sotu-delivery-intel.png" class="screenshot-img zoom-sotu fade" id="s43b-img"
         onerror="this.style.display='none'; document.getElementById('s43b-placeholder').style.display='flex';"
         alt="Delivery Intelligence Dashboard">

    <!-- Placeholder if image not found -->
    <div id="s43b-placeholder" class="screenshot-placeholder" style="display: none;">
      📸 Screenshot: sotu-delivery-intel.png<br>
      <span style="font-size: 0.75rem; margin-top: 8px; display: block;">
        Save screenshot from app.tryloop.ai → Base → Delivery Intelligence
      </span>
    </div>

    <!-- Caption bar with key metrics -->
    <div class="screenshot-caption fade" id="s43b-caption">
      <div class="metric">
        <span class="metric-label">Error Charges:</span>
        <span class="metric-value red">$175,409</span>
        <span class="metric-label" style="font-size: 0.7rem;">(21K errors)</span>
      </div>
      <div class="metric">
        <span class="metric-label">Top Error:</span>
        <span class="metric-value">Missing Entire Item</span>
        <span class="metric-value red" style="font-size: 0.8rem;">$41K</span>
      </div>
      <div class="metric">
        <span class="metric-label">Worst Item:</span>
        <span class="metric-value">Dave's #2</span>
        <span class="metric-value red" style="font-size: 0.8rem;">$35K</span>
      </div>
    </div>
  </div>

  <div class="callout" id="s43b-callout">The diagnostic power of SOTU — from <em>aggregate loss</em> to <em>specific item at specific store</em>.</div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.4 — What You Receive
     Steps: 1=file tree, 2=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-4">
  <div class="slide-title" id="s44-title">What You Receive</div>

  <div class="fade" id="s44-tree" style="
    margin-top: 20px; padding: 24px 32px; border-radius: 12px;
    border: 1px solid var(--gray-dark); background: rgba(255,255,255,0.02);
    font-family: monospace; font-size: 0.9rem; line-height: 1.8;
  ">
    <div style="color: var(--gold);">📁 SOTU_Report.zip</div>
    <div style="margin-left: 24px;">
      <div style="color: var(--blue);">📄 Leaderboard.pdf <span style="color: var(--gray); font-family: 'Lato', sans-serif; font-size: 0.75rem;">— every store ranked</span></div>
      <div style="color: var(--teal);">📄 Benchmark.pdf <span style="color: var(--gray); font-family: 'Lato', sans-serif; font-size: 0.75rem;">— vs chain, industry, top 10%</span></div>
      <div style="color: var(--green);">📄 Summary.csv <span style="color: var(--gray); font-family: 'Lato', sans-serif; font-size: 0.75rem;">— raw data for ops managers</span></div>
      <div style="color: var(--gray-light);">📁 Diagnostics/</div>
      <div style="margin-left: 24px; color: var(--red);">
        📄 Store_123_Errors.pdf<br>
        📄 Store_456_WaitTime.pdf<br>
        <span style="color: var(--gray);">... one PDF per flagged metric</span>
      </div>
    </div>
  </div>

  <div class="callout" id="s44-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.5 — Four Metrics, 100 Points
     Steps: 1=title, 2=wait time, 3=inaccuracy, 4=downtime, 5=bad ratings
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-5">
  <div class="slide-title" id="s45-title">Four Metrics, 100 Points</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 20px;">

    <!-- Intro -->
    <div class="fade" id="s45-intro" style="font-size: 0.9rem; color: var(--gray); margin-bottom: 8px;">
      Every store is scored out of 100, <strong style="color: var(--gray-light);">weighted by business impact</strong>
    </div>

    <!-- Stacked bar visual -->
    <div style="display: flex; align-items: center; height: 50px; border-radius: 8px; overflow: hidden; width: 600px;">
      <div class="fade" id="s45-bar1" style="width: 240px; height: 100%; background: var(--gold); display: flex; align-items: center; justify-content: center;">
        <span style="font-weight: 700; font-size: 1.1rem; color: #000;">40</span>
      </div>
      <div class="fade" id="s45-bar2" style="width: 180px; height: 100%; background: var(--red); display: flex; align-items: center; justify-content: center;">
        <span style="font-weight: 700; font-size: 1.1rem; color: #000;">30</span>
      </div>
      <div class="fade" id="s45-bar3" style="width: 120px; height: 100%; background: var(--blue); display: flex; align-items: center; justify-content: center;">
        <span style="font-weight: 700; font-size: 1.1rem; color: #000;">20</span>
      </div>
      <div class="fade" id="s45-bar4" style="width: 60px; height: 100%; background: var(--gray); display: flex; align-items: center; justify-content: center;">
        <span style="font-weight: 700; font-size: 0.9rem; color: #000;">10</span>
      </div>
    </div>

    <!-- Metric cards -->
    <div style="display: flex; gap: 16px; margin-top: 16px;">

      <!-- Wait Time -->
      <div class="fade" id="s45-m1" style="width: 140px; padding: 14px; border-radius: 10px; border: 1.5px solid var(--gold); text-align: center;">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--gold);">Wait Time</div>
        <div style="font-size: 1.6rem; font-weight: 700; color: var(--gold); margin: 6px 0;">40 pts</div>
        <div style="font-size: 0.7rem; color: var(--gray); line-height: 1.4;">Biggest driver of cancellations and driver churn</div>
      </div>

      <!-- Inaccuracy -->
      <div class="fade" id="s45-m2" style="width: 140px; padding: 14px; border-radius: 10px; border: 1.5px solid var(--red); text-align: center;">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--red);">Inaccuracy</div>
        <div style="font-size: 1.6rem; font-weight: 700; color: var(--red); margin: 6px 0;">30 pts</div>
        <div style="font-size: 0.7rem; color: var(--gray); line-height: 1.4;">Direct refund cost + customer trust erosion</div>
      </div>

      <!-- Downtime -->
      <div class="fade" id="s45-m3" style="width: 140px; padding: 14px; border-radius: 10px; border: 1.5px solid var(--blue); text-align: center;">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--blue);">Downtime</div>
        <div style="font-size: 1.6rem; font-weight: 700; color: var(--blue); margin: 6px 0;">20 pts</div>
        <div style="font-size: 0.7rem; color: var(--gray); line-height: 1.4;">Zero revenue, but partially outside store control</div>
      </div>

      <!-- Bad Ratings -->
      <div class="fade" id="s45-m4" style="width: 140px; padding: 14px; border-radius: 10px; border: 1.5px solid var(--gray); text-align: center;">
        <div style="font-size: 1.1rem; font-weight: 700; color: var(--gray-light);">Bad Ratings</div>
        <div style="font-size: 1.6rem; font-weight: 700; color: var(--gray-light); margin: 6px 0;">10 pts</div>
        <div style="font-size: 0.7rem; color: var(--gray); line-height: 1.4;">Lagging indicator — reflects accumulated issues</div>
      </div>

    </div>
  </div>

  <div class="callout" id="s45-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.6 — How Each Metric Is Calculated
     Steps: 1=inaccuracy, 2=downtime, 3=wait time, 4=bad ratings + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-6">
  <div class="slide-title" id="s46-title">How Each Metric Is Calculated</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 14px; margin-top: 24px;">

    <!-- Inaccuracy -->
    <div class="fade" id="s46-f1" style="
      display: flex; align-items: center; gap: 16px;
      padding: 14px 24px; border-radius: 10px; border: 1.5px solid var(--red);
    ">
      <div style="font-size: 0.95rem; font-weight: 700; color: var(--red); width: 100px;">Inaccuracy</div>
      <div style="font-size: 0.85rem; color: var(--gray-light); font-family: monospace;">
        = (Inaccurate + Cancelled + Missed) / Total Orders
      </div>
    </div>

    <!-- Downtime -->
    <div class="fade" id="s46-f2" style="
      display: flex; align-items: center; gap: 16px;
      padding: 14px 24px; border-radius: 10px; border: 1.5px solid var(--blue);
    ">
      <div style="font-size: 0.95rem; font-weight: 700; color: var(--blue); width: 100px;">Downtime</div>
      <div style="font-size: 0.85rem; color: var(--gray-light); font-family: monospace;">
        = Minutes Offline / Total Menu Minutes
      </div>
    </div>

    <!-- Wait Time -->
    <div class="fade" id="s46-f3" style="
      display: flex; align-items: center; gap: 16px;
      padding: 14px 24px; border-radius: 10px; border: 1.5px solid var(--gold);
    ">
      <div style="font-size: 0.95rem; font-weight: 700; color: var(--gold); width: 100px;">Wait Time</div>
      <div style="font-size: 0.85rem; color: var(--gray-light); font-family: monospace;">
        = Average minutes on high-wait orders
      </div>
    </div>

    <!-- Bad Ratings -->
    <div class="fade" id="s46-f4" style="
      display: flex; align-items: center; gap: 16px;
      padding: 14px 24px; border-radius: 10px; border: 1.5px solid var(--gray);
    ">
      <div style="font-size: 0.95rem; font-weight: 700; color: var(--gray-light); width: 100px;">Bad Ratings</div>
      <div style="font-size: 0.85rem; color: var(--gray-light); font-family: monospace;">
        = (1-star + 2-star) / Total Ratings
      </div>
    </div>

  </div>

  <div class="callout" id="s46-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.7 — What the Scores Mean
     Steps: 1=table, 2=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-7">
  <div class="slide-title" id="s47-title">What the Scores Mean</div>

  <div class="fade" id="s47-table" style="margin-top: 24px;">
    <table style="border-collapse: collapse; font-size: 0.85rem; text-align: center;">
      <thead>
        <tr style="border-bottom: 1px solid var(--gray-dark);">
          <th style="padding: 10px 20px; color: var(--gray);">Metric</th>
          <th style="padding: 10px 20px; color: var(--green);">Excellent</th>
          <th style="padding: 10px 20px; color: var(--teal);">Good</th>
          <th style="padding: 10px 20px; color: var(--gold);">Needs Work</th>
          <th style="padding: 10px 20px; color: var(--red);">Critical</th>
        </tr>
      </thead>
      <tbody>
        <tr style="border-bottom: 1px solid var(--gray-dark);">
          <td style="padding: 10px 20px; font-weight: 700; color: var(--gold);">Wait Time</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&lt; 1.5 min</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">1.5-2 min</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">2-4 min</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&gt; 4 min</td>
        </tr>
        <tr style="border-bottom: 1px solid var(--gray-dark);">
          <td style="padding: 10px 20px; font-weight: 700; color: var(--red);">Inaccuracy</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&lt; 2%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">2-3%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">3-5%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&gt; 5%</td>
        </tr>
        <tr style="border-bottom: 1px solid var(--gray-dark);">
          <td style="padding: 10px 20px; font-weight: 700; color: var(--blue);">Downtime</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&lt; 0.5%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">0.5-1%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">1-5%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&gt; 5%</td>
        </tr>
        <tr>
          <td style="padding: 10px 20px; font-weight: 700; color: var(--gray-light);">Bad Ratings</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&lt; 3%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">3-5%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">5-10%</td>
          <td style="padding: 10px 20px; color: var(--gray-light);">&gt; 10%</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="callout" id="s47-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.8 — The Leaderboard
     Steps: 1=title + description, 2=highlights, 3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-8">
  <div class="slide-title" id="s48-title">The Leaderboard</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 24px;">

    <!-- Description -->
    <div class="fade" id="s48-desc" style="
      font-size: 1rem; color: var(--gray-light); text-align: center; max-width: 500px; line-height: 1.6;
    ">
      Every store ranked within their chain — from <span style="color: var(--green);">#1</span> to <span style="color: var(--red);">#last</span>
    </div>

    <!-- Mock leaderboard -->
    <div class="fade" id="s48-mock" style="
      width: 500px; padding: 16px 20px; border-radius: 12px;
      border: 1px solid var(--gray-dark); background: rgba(255,255,255,0.02);
      font-size: 0.85rem;
    ">
      <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--gray-dark); color: var(--gray);">
        <span>Rank</span><span>Store</span><span>Score</span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px 0; color: var(--green);">
        <span>#1</span><span>Store 847 - Downtown</span><span>94</span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px 0; color: var(--gray-light);">
        <span>#2</span><span>Store 312 - Airport</span><span>91</span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px 0; color: var(--gray);">
        <span>...</span><span></span><span></span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px 0; background: rgba(88,196,221,0.15); border-radius: 4px; padding-left: 8px; padding-right: 8px; color: var(--blue);">
        <span>#47</span><span>Store 123 - Mall <span style="font-size: 0.7rem;">(your store)</span></span><span>62</span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px 0; color: var(--gray);">
        <span>...</span><span></span><span></span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px 0; color: var(--red);">
        <span>#85</span><span>Store 901 - Highway</span><span>34</span>
      </div>
    </div>

    <!-- Highlights -->
    <div class="fade" id="s48-highlights" style="
      font-size: 0.8rem; color: var(--gray); text-align: center; max-width: 480px; line-height: 1.6;
    ">
      Your accessible stores are <span style="color: var(--blue);">highlighted</span>. Tiebreakers follow weight priority: wait → errors → downtime → ratings.
    </div>

  </div>

  <div class="callout" id="s48-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.9 — Four Peer Groups
     Steps: 1=your chain, 2=industry, 3=top 10%, 4=your stores + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-9">
  <div class="slide-title" id="s49-title">Four Peer Groups</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 14px; margin-top: 24px;">

    <div class="fade" id="s49-intro" style="font-size: 0.85rem; color: var(--gray); margin-bottom: 8px;">
      The Benchmark compares your stores against four peer groups:
    </div>

    <div style="display: flex; gap: 18px;">

      <!-- Your Chain -->
      <div class="fade" id="s49-p1" style="
        width: 160px; padding: 16px; border-radius: 10px;
        border: 1.5px solid var(--blue); text-align: center;
      ">
        <div style="font-size: 1rem; font-weight: 700; color: var(--blue);">Your Chain</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 8px; line-height: 1.4;">
          Your baseline — how does this store compare to siblings?
        </div>
      </div>

      <!-- Industry -->
      <div class="fade" id="s49-p2" style="
        width: 160px; padding: 16px; border-radius: 10px;
        border: 1.5px solid var(--teal); text-align: center;
      ">
        <div style="font-size: 1rem; font-weight: 700; color: var(--teal);">Industry</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 8px; line-height: 1.4;">
          All chains in your restaurant type (QSR, Casual, etc.)
        </div>
      </div>

      <!-- Top 10% -->
      <div class="fade" id="s49-p3" style="
        width: 160px; padding: 16px; border-radius: 10px;
        border: 1.5px solid var(--green); text-align: center;
      ">
        <div style="font-size: 1rem; font-weight: 700; color: var(--green);">Top 10%</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 8px; line-height: 1.4;">
          The best in your segment — aspirational target
        </div>
      </div>

      <!-- Your Stores -->
      <div class="fade" id="s49-p4" style="
        width: 160px; padding: 16px; border-radius: 10px;
        border: 1.5px solid var(--gold); text-align: center;
      ">
        <div style="font-size: 1rem; font-weight: 700; color: var(--gold);">Your Stores</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 8px; line-height: 1.4;">
          Just locations you manage — personal accountability
        </div>
      </div>

    </div>
  </div>

  <div class="callout" id="s49-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.10 — We Don't Flag Bad Days. We Flag Bad Patterns.
     Steps: 1=title, 2=84d, 3=28d, 4=14d, 5=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-10">
  <div class="slide-title" id="s410-title">We Don't Flag Bad Days. We Flag Bad Patterns.</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 24px;">

    <div class="fade" id="s410-intro" style="font-size: 0.9rem; color: var(--gray);">
      How do we separate <span style="color: var(--gray-light);">noise</span> from <span style="color: var(--red);">signal</span>? Three time windows:
    </div>

    <div style="display: flex; gap: 24px; margin-top: 10px;">

      <!-- 84 days -->
      <div class="fade" id="s410-w1" style="
        width: 180px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--blue); text-align: center;
      ">
        <div style="font-size: 2rem; font-weight: 700; color: var(--blue);">84</div>
        <div style="font-size: 0.85rem; color: var(--blue);">days</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 10px;">Long-term pattern</div>
      </div>

      <!-- 28 days -->
      <div class="fade" id="s410-w2" style="
        width: 180px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--teal); text-align: center;
      ">
        <div style="font-size: 2rem; font-weight: 700; color: var(--teal);">28</div>
        <div style="font-size: 0.85rem; color: var(--teal);">days</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 10px;">Recent trend</div>
      </div>

      <!-- 14 days -->
      <div class="fade" id="s410-w3" style="
        width: 180px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--red); text-align: center;
      ">
        <div style="font-size: 2rem; font-weight: 700; color: var(--red);">14</div>
        <div style="font-size: 0.85rem; color: var(--red);">days</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 10px;">What's happening right now</div>
      </div>

    </div>
  </div>

  <div class="callout" id="s410-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.11 — Three Flagging Rules
     Steps: 1=rule 1, 2=rule 2, 3=rule 3, 4=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-11">
  <div class="slide-title" id="s411-title">Three Flagging Rules</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 14px; margin-top: 20px;">

    <!-- Rule 1 -->
    <div class="fade" id="s411-r1" style="
      width: 620px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--blue); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.4rem; font-weight: 700; color: var(--blue);">1</div>
      <div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--blue);">Chronic Industry Underperformance</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px;">
          Worse than market across <em>all three</em> windows. 84d > 1.25×, 28d > 1.5×, 14d > 2.0× industry avg.
        </div>
      </div>
    </div>

    <!-- Rule 2 -->
    <div class="fade" id="s411-r2" style="
      width: 620px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--gold); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.4rem; font-weight: 700; color: var(--gold);">2</div>
      <div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--gold);">Recent Chain Underperformance</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px;">
          Significantly worse than own brand recently. 28d > 2.0×, 14d > 2.0× chain avg.
        </div>
      </div>
    </div>

    <!-- Rule 3 -->
    <div class="fade" id="s411-r3" style="
      width: 620px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--red); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.4rem; font-weight: 700; color: var(--red);">3</div>
      <div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--red);">Acute Spike</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px;">
          Dramatically worse than brand right now. 14d > 4.0× chain avg.
        </div>
      </div>
    </div>

  </div>

  <div class="callout" id="s411-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.12 — Why Multipliers Increase for Shorter Windows
     Steps: 1=84d, 2=28d, 3=14d + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-12">
  <div class="slide-title" id="s412-title">Why Multipliers Increase for Shorter Windows</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 14px; margin-top: 24px;">

    <div style="display: flex; gap: 24px;">

      <!-- 84d -->
      <div class="fade" id="s412-m1" style="
        width: 200px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--blue); text-align: center;
      ">
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--blue);">1.25×</div>
        <div style="font-size: 0.9rem; color: var(--blue); margin-top: 4px;">84 days</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 10px; line-height: 1.4;">
          Large sample, low noise<br>Gentle threshold
        </div>
      </div>

      <!-- 28d -->
      <div class="fade" id="s412-m2" style="
        width: 200px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--teal); text-align: center;
      ">
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--teal);">1.5-2×</div>
        <div style="font-size: 0.9rem; color: var(--teal); margin-top: 4px;">28 days</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 10px; line-height: 1.4;">
          Medium sample<br>Moderate threshold
        </div>
      </div>

      <!-- 14d -->
      <div class="fade" id="s412-m3" style="
        width: 200px; padding: 18px; border-radius: 12px;
        border: 1.5px solid var(--red); text-align: center;
      ">
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--red);">2-4×</div>
        <div style="font-size: 0.9rem; color: var(--red); margin-top: 4px;">14 days</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 10px; line-height: 1.4;">
          Small sample, high noise<br>Strict threshold
        </div>
      </div>

    </div>
  </div>

  <div class="callout" id="s412-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.13 — The Diagnostic Report
     Steps: 1=sections list, 2=threshold line, 3=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-13">
  <div class="slide-title" id="s413-title">The Diagnostic Report</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-top: 20px;">

    <div class="fade" id="s413-intro" style="font-size: 0.85rem; color: var(--gray); text-align: center;">
      Every flagged store gets a per-metric PDF with five drilldown sections:
    </div>

    <!-- Drilldown sections -->
    <div class="fade" id="s413-sections" style="display: flex; gap: 16px; margin-top: 8px;">
      <div style="padding: 12px 16px; border-radius: 8px; border: 1px solid var(--gray-dark); text-align: center;">
        <div style="font-size: 1.2rem;">📅</div>
        <div style="font-size: 0.75rem; color: var(--gray-light); margin-top: 4px;">Day-wise<br>trend</div>
      </div>
      <div style="padding: 12px 16px; border-radius: 8px; border: 1px solid var(--gray-dark); text-align: center;">
        <div style="font-size: 1.2rem;">🕐</div>
        <div style="font-size: 0.75rem; color: var(--gray-light); margin-top: 4px;">Hour-wise<br>breakdown</div>
      </div>
      <div style="padding: 12px 16px; border-radius: 8px; border: 1px solid var(--gray-dark); text-align: center;">
        <div style="font-size: 1.2rem;">👥</div>
        <div style="font-size: 0.75rem; color: var(--gray-light); margin-top: 4px;">Shift<br>aggregation</div>
      </div>
      <div style="padding: 12px 16px; border-radius: 8px; border: 1px solid var(--gray-dark); text-align: center;">
        <div style="font-size: 1.2rem;">⏸️</div>
        <div style="font-size: 0.75rem; color: var(--gray-light); margin-top: 4px;">Downtime<br>reasons</div>
      </div>
      <div style="padding: 12px 16px; border-radius: 8px; border: 1px solid var(--gray-dark); text-align: center;">
        <div style="font-size: 1.2rem;">🏷️</div>
        <div style="font-size: 0.75rem; color: var(--gray-light); margin-top: 4px;">Error theme<br>breakdown</div>
      </div>
    </div>

    <!-- Threshold explanation -->
    <div class="fade" id="s413-threshold" style="
      margin-top: 16px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--red); text-align: center; max-width: 500px;
    ">
      <div style="font-size: 0.85rem; color: var(--gray-light);">
        Red threshold line = <span style="color: var(--red);">28-day industry average</span>
      </div>
      <div style="font-size: 0.75rem; color: var(--gray); margin-top: 6px;">
        Everything above it = underperformance
      </div>
    </div>

  </div>

  <div class="callout" id="s413-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.14 — From Flag to Root Cause
     Steps: 1=flagged, 2=day-wise, 3=hour-wise, 4=shift-wise, 5=theme, 6=item, 7=callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-14">
  <div class="slide-title" id="s414-title">From Flag to Root Cause</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: 16px;">

    <!-- Flagged -->
    <div class="fade" id="s414-s1" style="
      padding: 10px 20px; border-radius: 8px; border: 1.5px solid var(--red);
      display: flex; align-items: center; gap: 12px;
    ">
      <div style="font-size: 1.1rem;">🚩</div>
      <div>
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--red);">Store X flagged for Error Rate</div>
        <div style="font-size: 0.7rem; color: var(--gray);">14d rate = 6.2%, industry = 2.1%</div>
      </div>
    </div>

    <!-- Day-wise -->
    <div class="fade" id="s414-s2" style="
      padding: 10px 20px; border-radius: 8px; border: 1px solid var(--gray-dark);
      display: flex; align-items: center; gap: 12px;
    ">
      <div style="font-size: 1.1rem;">📅</div>
      <div>
        <div style="font-size: 0.85rem; color: var(--gray-light);">Day-wise: Errors spiked <span style="color: var(--gold);">10 days ago</span></div>
        <div style="font-size: 0.7rem; color: var(--gray);">Something changed recently</div>
      </div>
    </div>

    <!-- Hour-wise -->
    <div class="fade" id="s414-s3" style="
      padding: 10px 20px; border-radius: 8px; border: 1px solid var(--gray-dark);
      display: flex; align-items: center; gap: 12px;
    ">
      <div style="font-size: 1.1rem;">🕐</div>
      <div>
        <div style="font-size: 0.85rem; color: var(--gray-light);">Hour-wise: Errors cluster <span style="color: var(--gold);">11am–1pm</span></div>
        <div style="font-size: 0.7rem; color: var(--gray);">Lunch rush</div>
      </div>
    </div>

    <!-- Shift-wise -->
    <div class="fade" id="s414-s4" style="
      padding: 10px 20px; border-radius: 8px; border: 1px solid var(--gray-dark);
      display: flex; align-items: center; gap: 12px;
    ">
      <div style="font-size: 1.1rem;">👥</div>
      <div>
        <div style="font-size: 0.85rem; color: var(--gray-light);">Shift-wise: Lunch shift = <span style="color: var(--red);">72% of all errors</span></div>
      </div>
    </div>

    <!-- Error theme -->
    <div class="fade" id="s414-s5" style="
      padding: 10px 20px; border-radius: 8px; border: 1px solid var(--gray-dark);
      display: flex; align-items: center; gap: 12px;
    ">
      <div style="font-size: 1.1rem;">🏷️</div>
      <div>
        <div style="font-size: 0.85rem; color: var(--gray-light);">Error theme: <span style="color: var(--gold);">"Missing Sides and Add-Ons"</span> = 48% of errors</div>
      </div>
    </div>

    <!-- Top item -->
    <div class="fade" id="s414-s6" style="
      padding: 10px 20px; border-radius: 8px; border: 1.5px solid var(--green);
      display: flex; align-items: center; gap: 12px;
    ">
      <div style="font-size: 1.1rem;">🥑</div>
      <div>
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--green);">Top item: "Side of Guacamole"</div>
      </div>
    </div>

  </div>

  <div class="callout" id="s414-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.15 — The Full Flow
     Steps: 1=leaderboard, 2=benchmark, 3=flag, 4=diagnostic, 5=action
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-15">
  <div class="slide-title" id="s415-title">The Full Flow</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: 16px;">

    <div class="fade" id="s415-intro" style="font-size: 0.85rem; color: var(--gray); margin-bottom: 8px;">
      Rank → Compare → Diagnose → Act
    </div>

    <!-- Flow steps -->
    <div style="display: flex; gap: 12px; align-items: center;">

      <!-- Leaderboard -->
      <div class="fade" id="s415-f1" style="
        width: 130px; padding: 12px; border-radius: 10px;
        border: 1.5px solid var(--blue); text-align: center;
      ">
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--blue);">Leaderboard</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 6px;">
          Store X scores 62/100<br>Ranked #47 of 85
        </div>
      </div>

      <div class="fade" id="s415-a1" style="font-size: 1.2rem; color: var(--gray);">→</div>

      <!-- Benchmark -->
      <div class="fade" id="s415-f2" style="
        width: 130px; padding: 12px; border-radius: 10px;
        border: 1.5px solid var(--teal); text-align: center;
      ">
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--teal);">Benchmark</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 6px;">
          Chain avg: 71<br>Industry: 74, Top 10%: 89
        </div>
      </div>

      <div class="fade" id="s415-a2" style="font-size: 1.2rem; color: var(--gray);">→</div>

      <!-- Flag -->
      <div class="fade" id="s415-f3" style="
        width: 130px; padding: 12px; border-radius: 10px;
        border: 1.5px solid var(--red); text-align: center;
      ">
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--red);">Flag</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 6px;">
          Flagged for Error Rate<br>and Wait Time
        </div>
      </div>

      <div class="fade" id="s415-a3" style="font-size: 1.2rem; color: var(--gray);">→</div>

      <!-- Diagnostic -->
      <div class="fade" id="s415-f4" style="
        width: 130px; padding: 12px; border-radius: 10px;
        border: 1.5px solid var(--gold); text-align: center;
      ">
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--gold);">Diagnostic</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 6px;">
          Errors spike during lunch<br>Missing sides/add-ons
        </div>
      </div>

      <div class="fade" id="s415-a4" style="font-size: 1.2rem; color: var(--gray);">→</div>

      <!-- Action -->
      <div class="fade" id="s415-f5" style="
        width: 130px; padding: 12px; border-radius: 10px;
        border: 1.5px solid var(--green); text-align: center;
      ">
        <div style="font-size: 0.75rem; font-weight: 700; color: var(--green);">Action</div>
        <div style="font-size: 0.65rem; color: var(--gray); margin-top: 6px;">
          Retrain lunch shift<br>Reposition guac station
        </div>
      </div>

    </div>

  </div>

  <div class="callout" id="s415-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 4.16 — Three Actions After Every SOTU
     Steps: 1=review leaderboard, 2=check benchmark, 3=act on flagged + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-4-16">
  <div class="slide-title" id="s416-title">Three Actions After Every SOTU</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 14px; margin-top: 24px;">

    <!-- Action 1 -->
    <div class="fade" id="s416-a1" style="
      width: 560px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--blue); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.4rem; font-weight: 700; color: var(--blue);">1</div>
      <div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--blue);">Review Leaderboard</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px;">
          Celebrate top stores, note bottom performers
        </div>
        <div style="font-size: 0.7rem; color: var(--gray-light); margin-top: 2px; font-style: italic;">→ Leadership</div>
      </div>
    </div>

    <!-- Action 2 -->
    <div class="fade" id="s416-a2" style="
      width: 560px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--teal); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.4rem; font-weight: 700; color: var(--teal);">2</div>
      <div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--teal);">Check Benchmark</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px;">
          Are we closing the gap to industry / top 10%?
        </div>
        <div style="font-size: 0.7rem; color: var(--gray-light); margin-top: 2px; font-style: italic;">→ Brand Managers</div>
      </div>
    </div>

    <!-- Action 3 -->
    <div class="fade" id="s416-a3" style="
      width: 560px; padding: 14px 20px; border-radius: 10px;
      border: 1.5px solid var(--green); display: flex; align-items: center; gap: 16px;
    ">
      <div style="font-size: 1.4rem; font-weight: 700; color: var(--green);">3</div>
      <div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--green);">Act on Flagged Stores</div>
        <div style="font-size: 0.75rem; color: var(--gray); margin-top: 4px;">
          Assign diagnostic PDFs to area managers
        </div>
        <div style="font-size: 0.7rem; color: var(--gray-light); margin-top: 2px; font-style: italic;">→ District Managers</div>
      </div>
    </div>

  </div>

  <div class="callout" id="s416-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SECTION 5 — INTEGRATION & CLOSING
     ═══════════════════════════════════════════════════════════════ -->

<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 5.1 — The Complete System
     Steps: 1=equation, 2=guard, 3=recover, 4=sotu + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-5-1">
  <div class="slide-title" id="s51-title">The Complete System</div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 18px; margin-top: 20px;">

    <!-- Revenue equation -->
    <div class="fade" id="s51-eq" style="
      padding: 16px 28px; border-radius: 12px; border: 1.5px solid var(--gray-dark);
      font-size: 1.1rem; font-weight: 300; color: var(--gray-light); text-align: center;
    ">
      Revenue = <span style="color: var(--green);">Orders</span> × <span style="color: var(--teal);">AOV</span> − <span style="color: var(--red);">Leakages</span>
    </div>

    <!-- Four solutions -->
    <div style="display: flex; gap: 16px; margin-top: 10px;">

      <!-- Guard -->
      <div class="fade" id="s51-guard" style="
        width: 160px; padding: 14px; border-radius: 12px;
        border: 1.5px solid var(--green); text-align: center;
      ">
        <div style="font-size: 1.6rem; margin-bottom: 6px;">🛡️</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--green);">GUARD</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px; line-height: 1.4;">
          Prevents <span style="color: var(--green);">downtime</span><br>
          More orders captured
        </div>
      </div>

      <!-- Recover -->
      <div class="fade" id="s51-recover" style="
        width: 160px; padding: 14px; border-radius: 12px;
        border: 1.5px solid var(--teal); text-align: center;
      ">
        <div style="font-size: 1.6rem; margin-bottom: 6px;">💰</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--teal);">RECOVER</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px; line-height: 1.4;">
          Wins back <span style="color: var(--teal);">bad charges</span><br>
          Reduces direct losses
        </div>
      </div>

      <!-- Re-Engage -->
      <div class="fade" id="s51-reengage" style="
        width: 160px; padding: 14px; border-radius: 12px;
        border: 1.5px solid var(--gold); text-align: center;
      ">
        <div style="font-size: 1.6rem; margin-bottom: 6px;">⭐</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--gold);">RE-ENGAGE</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px; line-height: 1.4;">
          Responds to <span style="color: var(--gold);">reviews</span><br>
          Recovers customers
        </div>
      </div>

      <!-- SOTU -->
      <div class="fade" id="s51-sotu" style="
        width: 160px; padding: 14px; border-radius: 12px;
        border: 1.5px solid var(--blue); text-align: center;
      ">
        <div style="font-size: 1.6rem; margin-bottom: 6px;">📊</div>
        <div style="font-size: 0.9rem; font-weight: 700; color: var(--blue);">SOTU</div>
        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 6px; line-height: 1.4;">
          Diagnoses <span style="color: var(--blue);">root causes</span><br>
          Benchmarks performance
        </div>
      </div>

    </div>
  </div>

  <div class="callout" id="s51-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 5.2 — The Flywheel
     Steps: 1=virtuous cycle, 2=death spiral + callout
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-5-2">
  <div class="slide-title" id="s52-title">The Flywheel</div>

  <div style="display: flex; gap: 40px; margin-top: 30px;">

    <!-- Virtuous cycle -->
    <div class="fade" id="s52-virtuous" style="
      width: 320px; padding: 20px; border-radius: 14px;
      border: 2px solid var(--green); text-align: center;
    ">
      <div style="font-size: 1.1rem; font-weight: 700; color: var(--green); margin-bottom: 14px;">Virtuous Cycle ↑</div>
      <div style="font-size: 0.8rem; color: var(--gray-light); line-height: 1.8;">
        Great ops<br>
        ↓<br>
        Better metrics<br>
        ↓<br>
        <span style="color: var(--green);">Algorithmic rewards</span><br>
        ↓<br>
        More orders<br>
        ↓<br>
        Fund better ops
      </div>
    </div>

    <!-- Death spiral -->
    <div class="fade" id="s52-death" style="
      width: 320px; padding: 20px; border-radius: 14px;
      border: 2px solid var(--red); text-align: center;
    ">
      <div style="font-size: 1.1rem; font-weight: 700; color: var(--red); margin-bottom: 14px;">Death Spiral ↓</div>
      <div style="font-size: 0.8rem; color: var(--gray-light); line-height: 1.8;">
        Poor ops<br>
        ↓<br>
        Bad metrics<br>
        ↓<br>
        <span style="color: var(--red);">Buried by algorithm</span><br>
        ↓<br>
        Paying more per order<br>
        ↓<br>
        Can't afford to improve
      </div>
    </div>

  </div>

  <div class="callout" id="s52-callout"></div>
</div>


<!-- ═══════════════════════════════════════════════════════════════
     SLIDE 5.3 — This Is Protect (Final Slide)
     Steps: 1=title, 2=three pillars, 3=tagline
     ═══════════════════════════════════════════════════════════════ -->
<div class="slide" id="slide-5-3">
  <div class="fade" id="s53-title" style="font-size: 2.5rem; font-weight: 300; letter-spacing: 0.05em; color: var(--blue);">
    This Is Protect
  </div>

  <div class="fade" id="s53-pillars" style="
    display: flex; gap: 28px; margin-top: 36px; text-align: center;
  ">
    <div style="width: 150px;">
      <div style="font-size: 1.8rem; margin-bottom: 8px;">🛡️</div>
      <div style="font-size: 0.85rem; font-weight: 700; color: var(--green);">GUARD</div>
      <div style="font-size: 0.7rem; color: var(--gray); margin-top: 5px;">Keeps you online</div>
    </div>
    <div style="width: 150px;">
      <div style="font-size: 1.8rem; margin-bottom: 8px;">💰</div>
      <div style="font-size: 0.85rem; font-weight: 700; color: var(--teal);">RECOVER</div>
      <div style="font-size: 0.7rem; color: var(--gray); margin-top: 5px;">Wins back unfair charges</div>
    </div>
    <div style="width: 150px;">
      <div style="font-size: 1.8rem; margin-bottom: 8px;">⭐</div>
      <div style="font-size: 0.85rem; font-weight: 700; color: var(--gold);">RE-ENGAGE</div>
      <div style="font-size: 0.7rem; color: var(--gray); margin-top: 5px;">Responds to reviews</div>
    </div>
    <div style="width: 150px;">
      <div style="font-size: 1.8rem; margin-bottom: 8px;">📊</div>
      <div style="font-size: 0.85rem; font-weight: 700; color: var(--blue);">SOTU</div>
      <div style="font-size: 0.7rem; color: var(--gray); margin-top: 5px;">Tells you what to fix</div>
    </div>
  </div>

  <div class="fade" id="s53-tagline" style="
    margin-top: 40px; font-size: 1.1rem; font-weight: 300; color: var(--gray-light);
    letter-spacing: 0.05em; text-align: center;
  ">
    Prevent. Recover. Re-Engage. Diagnose.<br>
    <span style="color: var(--blue); font-weight: 400;">The system that compounds.</span>
  </div>
</div>


<!-- ═══════════════ NAV UI ═══════════════ -->
<div class="nav-hint" id="nav-hint">
  <kbd>&#8594;</kbd> or click to advance &nbsp;|&nbsp; <kbd>&#8592;</kbd> to go back
</div>
<div class="slide-label" id="slideLabel">0.1</div>
<div class="step-counter" id="stepCounter">0 / 2</div>


<!-- ═══════════════════════════════════════════════════════════════
     CONTROLLER
     ═══════════════════════════════════════════════════════════════ -->
<script>
  var slides = [];
  var currentSlide = 0;
  var currentStep = 0;    // Visual step (what's shown on screen)
  var currentAudioStep = 0; // Audio step (which narration is playing)

  // ── SLIDE 0.1 — Intro ──
  (function() {
    var title = document.getElementById('s01-title');
    var sub = document.getElementById('s01-subtitle');

    slides.push({
      id: '0.1',
      steps: 2,
      apply: function(s) {
        title.classList.remove('visible');
        sub.classList.remove('visible');
        if (s >= 1) title.classList.add('visible');
        if (s >= 2) sub.classList.add('visible');
      }
    });
  })();

  // ── SLIDE 1.1 — Three Revenue Channels ──
  (function() {
    var title = document.getElementById('s11-title');
    var cards = [
      document.getElementById('s11-c0'),
      document.getElementById('s11-c1'),
      document.getElementById('s11-c2')
    ];
    var callout = document.getElementById('s11-callout');

    slides.push({
      id: '1.1',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        for (var i = 0; i < 3; i++) {
          cards[i].classList.remove('visible', 'highlight', 'dim');
        }
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          cards[0].classList.add('visible');
        }
        if (s >= 2) {
          cards[1].classList.add('visible');
        }
        if (s >= 3) {
          cards[2].classList.add('visible');
          cards[2].classList.add('highlight');
        }
        if (s >= 4) {
          cards[0].classList.add('dim');
          cards[1].classList.add('dim');
          callout.innerHTML = 'Delivery is fundamentally different. The restaurant hands food to a stranger and <span class="gold">loses visibility</span> into everything after.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 1.2 — Delivery: The Restaurant Loses Control ──
  (function() {
    var title = document.getElementById('s12-title');
    var nodes = [
      document.getElementById('s12-n0'),
      document.getElementById('s12-n1'),
      document.getElementById('s12-n2')
    ];
    var arrows = [
      document.getElementById('s12-a0'),
      document.getElementById('s12-a1')
    ];
    var ret = document.getElementById('s12-ret');
    var ann = document.getElementById('s12-ann');
    var callout = document.getElementById('s12-callout');

    slides.push({
      id: '1.2',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        for (var i = 0; i < 3; i++) nodes[i].classList.remove('visible');
        for (var j = 0; j < 2; j++) arrows[j].classList.remove('visible');
        ret.classList.remove('visible');
        ann.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          nodes[0].classList.add('visible');
        }
        if (s >= 2) {
          arrows[0].classList.add('visible');
          nodes[1].classList.add('visible');
        }
        if (s >= 3) {
          arrows[1].classList.add('visible');
          nodes[2].classList.add('visible');
        }
        if (s >= 4) {
          ret.classList.add('visible');
          ann.classList.add('visible');
          callout.innerHTML = 'The platform owns the customer relationship, the payment, and the delivery. The restaurant <span class="gold">has no direct recourse</span> when things go wrong.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 1.3 — Downtime: The Invisible Loss ──
  (function() {
    var title = document.getElementById('s13-title');
    var left = document.getElementById('s13-left');
    var vs = document.getElementById('s13-vs');
    var right = document.getElementById('s13-right');
    var unavail = document.getElementById('s13-unavail');
    var callout = document.getElementById('s13-callout');

    slides.push({
      id: '1.3',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        left.classList.remove('visible');
        vs.classList.remove('visible');
        right.classList.remove('visible');
        unavail.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          left.classList.add('visible');
        }
        if (s >= 2) {
          vs.classList.add('visible');
          right.classList.add('visible');
          unavail.classList.add('visible');
        }
        if (s >= 3) {
          callout.innerHTML = 'The store looks busy inside, but on the app it doesn\'t exist. Revenue that <span class="warn">never gets a chance to happen</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 1.4 — Chargebacks: Money Taken Back ──
  (function() {
    var title = document.getElementById('s14-title');
    var steps = [
      document.getElementById('s14-s0'),
      document.getElementById('s14-s1'),
      document.getElementById('s14-s2'),
      document.getElementById('s14-s3')
    ];
    var arrows = [
      document.getElementById('s14-a0'),
      document.getElementById('s14-a1'),
      document.getElementById('s14-a2')
    ];
    var ded = document.getElementById('s14-ded');
    var callout = document.getElementById('s14-callout');

    slides.push({
      id: '1.4',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        for (var i = 0; i < 4; i++) steps[i].classList.remove('visible');
        for (var j = 0; j < 3; j++) arrows[j].classList.remove('visible');
        ded.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          steps[0].classList.add('visible');
          arrows[0].classList.add('visible');
          steps[1].classList.add('visible');
        }
        if (s >= 2) {
          arrows[1].classList.add('visible');
          steps[2].classList.add('visible');
        }
        if (s >= 3) {
          arrows[2].classList.add('visible');
          steps[3].classList.add('visible');
        }
        if (s >= 4) {
          ded.classList.add('visible');
          callout.innerHTML = 'Unlike downtime, this one shows up on a statement. The restaurant can see the <span class="warn">deduction</span> — but by then, the money is already gone.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 1.5 — Where the Money Goes (Revenue Bar Synthesis) ──
  (function() {
    var title = document.getElementById('s15-title');
    var full = document.getElementById('s15-full');
    var net = document.getElementById('s15-net');
    var down = document.getElementById('s15-down');
    var cb = document.getElementById('s15-cb');
    var lblFull = document.getElementById('s15-lbl-full');
    var lblResult = document.getElementById('s15-lbl-result');
    var callout = document.getElementById('s15-callout');

    slides.push({
      id: '1.5',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        full.style.opacity = '0';
        net.style.opacity = '0';
        down.style.opacity = '0';
        cb.style.opacity = '0';
        lblFull.classList.remove('visible');
        lblResult.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        // Step 1: Full green bar
        if (s >= 1) {
          title.classList.add('visible');
          full.style.opacity = '1';
          full.style.left = '0px';
          full.style.width = '700px';
          lblFull.classList.add('visible');
        }

        // Step 2: Downtime chunk appears on right, green shrinks
        if (s >= 2) {
          full.style.opacity = '0';
          net.style.opacity = '1';
          net.style.left = '0px';
          net.style.width = '500px';
          down.style.opacity = '1';
          down.style.left = '510px';
          down.style.width = '190px';
          lblFull.classList.remove('visible');
          callout.innerHTML = 'Downtime: revenue that <span class="warn">never existed</span>. No line item. No report.';
          callout.classList.add('visible');
        }

        // Step 3: Chargeback slice carved from green
        if (s >= 3) {
          net.style.width = '400px';
          cb.style.opacity = '1';
          cb.style.left = '410px';
          cb.style.width = '90px';
          down.style.left = '510px';
          callout.innerHTML = 'Chargebacks: revenue the restaurant earned but the platform <span class="warn">took back</span>.';
          callout.classList.add('visible');
        }

        // Step 4: Net labeled
        if (s >= 4) {
          callout.innerHTML = 'Two different leaks. One invisible, one after the fact. Both <span class="warn">shrink the same bar</span>.';
          callout.classList.add('visible');
          lblResult.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 1.6 — Platforms Grade Every Restaurant ──
  (function() {
    var title = document.getElementById('s16-title');
    var metrics = [
      document.getElementById('s16-m0'),
      document.getElementById('s16-m1'),
      document.getElementById('s16-m2'),
      document.getElementById('s16-m3')
    ];
    var badges = document.getElementById('s16-badges');
    var callout = document.getElementById('s16-callout');

    slides.push({
      id: '1.6',
      steps: 6,
      apply: function(s) {
        title.classList.remove('visible');
        for (var i = 0; i < 4; i++) metrics[i].classList.remove('visible');
        badges.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          metrics[0].classList.add('visible');
          callout.innerHTML = 'These problems don\'t just cost money — <span class="gold">platforms are tracking them</span>.';
          callout.classList.add('visible');
        }
        if (s >= 2) {
          metrics[1].classList.add('visible');
          callout.innerHTML = 'These problems don\'t just cost money — <span class="gold">platforms are tracking them</span>.';
        }
        if (s >= 3) {
          metrics[2].classList.add('visible');
          callout.innerHTML = 'These problems don\'t just cost money — <span class="gold">platforms are tracking them</span>.';
        }
        if (s >= 4) {
          metrics[3].classList.add('visible');
          callout.innerHTML = 'Four metrics. Every restaurant is scored on all of them.';
          callout.classList.add('visible');
        }
        if (s >= 5) {
          badges.classList.add('visible');
          callout.innerHTML = 'Good grades unlock <em>Top Eats</em> and <em>Most Loved</em>. Featured placement, more visibility, more organic orders.';
          callout.classList.add('visible');
        }
        if (s >= 6) {
          callout.innerHTML = 'Bad ops hurt the customer experience. Wrong items, long waits. Those customers <span class="warn">don\'t come back</span>. Retention drops, ratings drop — fewer orders over time.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 1.7 — Four Tools That Fix This ──
  (function() {
    var title = document.getElementById('s17-title');
    var products = [
      document.getElementById('s17-p0'),
      document.getElementById('s17-p1'),
      document.getElementById('s17-p2'),
      document.getElementById('s17-p3')
    ];
    var callout = document.getElementById('s17-callout');

    slides.push({
      id: '1.7',
      steps: 5,
      apply: function(s) {
        title.classList.remove('visible');
        for (var i = 0; i < 4; i++) {
          products[i].classList.remove('visible', 'c-green', 'c-teal', 'c-gold', 'c-blue');
        }
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          products[0].classList.add('visible', 'c-green');
        }
        if (s >= 2) {
          products[1].classList.add('visible', 'c-teal');
        }
        if (s >= 3) {
          products[2].classList.add('visible', 'c-gold');
        }
        if (s >= 4) {
          products[3].classList.add('visible', 'c-blue');
        }
        if (s >= 5) {
          callout.innerHTML = 'Guard keeps you online. Recover wins back money. Re-Engage wins back customers. SOTU tells you <span class="green">what to fix</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();


  // ═══════════════════════════════════════════
  // SECTION 2 — GUARD
  // ═══════════════════════════════════════════

  // ── SLIDE 2.1 — Guard Title Card ──
  (function() {
    var title = document.getElementById('s21-title');
    slides.push({
      id: '2.1',
      steps: 1,
      apply: function(s) {
        title.classList.remove('visible');
        if (s >= 1) title.classList.add('visible');
      }
    });
  })();

  // ── SLIDE 2.2 — The Delivery Tech Chain ──
  (function() {
    var title = document.getElementById('s22-title');
    var directLabel = document.getElementById('s22-direct-label');
    var dKitchen = document.getElementById('s22-d-kitchen');
    var dPos = document.getElementById('s22-d-pos');
    var dPlatform = document.getElementById('s22-d-platform');
    var dCustomer = document.getElementById('s22-d-customer');
    var oloLabel = document.getElementById('s22-olo-label');
    var oKitchen = document.getElementById('s22-o-kitchen');
    var oPos = document.getElementById('s22-o-pos');
    var oOlo = document.getElementById('s22-o-olo');
    var oFanout = document.getElementById('s22-o-fanout');
    var warning = document.getElementById('s22-warning');
    var callout = document.getElementById('s22-callout');

    slides.push({
      id: '2.2',
      steps: 3,
      apply: function(s) {
        var all = [title, directLabel, dKitchen, dPos, dPlatform, dCustomer, oloLabel, oKitchen, oPos, oOlo, oFanout, warning];
        for (var i = 0; i < all.length; i++) { if (all[i]) all[i].classList.remove('visible'); }
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          directLabel.classList.add('visible');
          dKitchen.classList.add('visible');
          dPos.classList.add('visible');
          dPlatform.classList.add('visible');
          dCustomer.classList.add('visible');
          callout.innerHTML = 'Kitchen \u2192 POS \u2192 Platform \u2192 Customer. <em>Every connection is a potential break.</em>';
          callout.classList.add('visible');
        }
        if (s >= 2) {
          oloLabel.classList.add('visible');
          oKitchen.classList.add('visible');
          oPos.classList.add('visible');
          oOlo.classList.add('visible');
          oFanout.classList.add('visible');
          callout.innerHTML = 'OLO sits between the POS and every platform. <em>One connection in, multiple out.</em> Most chains use it.';
          callout.classList.add('visible');
        }
        if (s >= 3) {
          warning.classList.add('visible');
          callout.innerHTML = '<span class="warn">If OLO goes down, the restaurant goes dark on every platform at once.</span> More arrows, more ways to silently go offline.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.3 — Three Ways the Chain Breaks ──
  (function() {
    var title = document.getElementById('s23-title');
    var bp1 = document.getElementById('s23-bp1');
    var bp2 = document.getElementById('s23-bp2');
    var bp3 = document.getElementById('s23-bp3');
    var callout = document.getElementById('s23-callout');

    slides.push({
      id: '2.3',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        bp1.classList.remove('visible', 'c-red');
        bp2.classList.remove('visible', 'c-gold');
        bp3.classList.remove('visible', 'c-blue');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          bp1.classList.add('visible', 'c-red');
        }
        if (s >= 2) {
          bp2.classList.add('visible', 'c-gold');
        }
        if (s >= 3) {
          bp3.classList.add('visible', 'c-blue');
        }
        if (s >= 4) {
          callout.innerHTML = 'Three categories. The restaurant\'s tech is fine in the first, broken in the second, and <span class="gold">deliberately paused</span> in the third. Each requires a different response.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.4 — The GM Blind Spot ──
  (function() {
    var title = document.getElementById('s24-title');
    var left = document.getElementById('s24-left');
    var vs = document.getElementById('s24-vs');
    var right = document.getElementById('s24-right');
    var unavail = document.getElementById('s24-unavail');
    var callout = document.getElementById('s24-callout');

    slides.push({
      id: '2.4',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        left.classList.remove('visible');
        vs.classList.remove('visible');
        right.classList.remove('visible');
        unavail.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          left.classList.add('visible');
        }
        if (s >= 2) {
          vs.classList.add('visible');
          right.classList.add('visible');
          unavail.classList.add('visible');
        }
        if (s >= 3) {
          callout.innerHTML = 'The restaurant is fully operational. It\'s been <span class="warn">invisible on delivery apps for 45 minutes</span>. Nobody inside knows.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.5 — Guard: Continuous Monitoring ──
  (function() {
    var title = document.getElementById('s25-title');
    var shield = document.getElementById('s25-shield');
    var chain = document.getElementById('s25-chain');
    var pulse = document.getElementById('s25-pulse');
    var brk = document.getElementById('s25-break');
    var restore = document.getElementById('s25-restore');
    var timer = document.getElementById('s25-timer');
    var callout = document.getElementById('s25-callout');

    slides.push({
      id: '2.5',
      steps: 3,
      apply: function(s) {
        var all = [shield, chain, pulse, brk, restore, timer];
        for (var i = 0; i < all.length; i++) all[i].classList.remove('visible');
        title.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); shield.classList.add('visible'); }
        if (s >= 2) chain.classList.add('visible');
        if (s >= 3) pulse.classList.add('visible');
        if (s >= 4) {
          brk.classList.add('visible');
          callout.innerHTML = 'Guard detects the break — <span class="warn">pulse spikes</span>.';
          callout.classList.add('visible');
        }
        if (s >= 5) {
          brk.classList.remove('visible');
          restore.classList.add('visible');
          callout.innerHTML = 'Guard restores the connection. <span class="green">Store is back online.</span>';
          callout.classList.add('visible');
        }
        if (s >= 6) {
          timer.classList.add('visible');
          callout.innerHTML = '';
          callout.classList.remove('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.6 — How Guard Detects Downtime ──
  (function() {
    var title = document.getElementById('s26-title');
    var ue = document.getElementById('s26-ue');
    var dd = document.getElementById('s26-dd');
    var callout = document.getElementById('s26-callout');

    slides.push({
      id: '2.6',
      steps: 2,
      apply: function(s) {
        title.classList.remove('visible');
        ue.style.opacity = '0'; ue.style.transform = 'translateY(10px)';
        dd.style.opacity = '0'; dd.style.transform = 'translateY(10px)';
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          ue.style.opacity = '1'; ue.style.transform = 'translateY(0)';
        }
        if (s >= 2) {
          dd.style.opacity = '1'; dd.style.transform = 'translateY(0)';
        }
        if (s >= 3) {
          callout.innerHTML = 'UberEats gives Guard an official API. DoorDash doesn\'t — so Guard built <span class="warn">three independent workarounds</span>. If one fails, the others catch it.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.6b — OLO: Early Warning System ──
  (function() {
    var title = document.getElementById('s26b-title');
    var context = document.getElementById('s26b-context');
    var webhook = document.getElementById('s26b-webhook');
    var arrow1 = document.getElementById('s26b-arrow1');
    var wait = document.getElementById('s26b-wait');
    var arrow2 = document.getElementById('s26b-arrow2');
    var poll = document.getElementById('s26b-poll');
    var arrow3 = document.getElementById('s26b-arrow3');
    var decide = document.getElementById('s26b-decide');
    var why = document.getElementById('s26b-why');
    var callout = document.getElementById('s26b-callout');

    slides.push({
      id: '2.6b',
      steps: 5,
      apply: function(s) {
        title.classList.remove('visible');
        context.classList.remove('visible');
        webhook.classList.remove('visible');
        arrow1.classList.remove('visible');
        wait.classList.remove('visible');
        arrow2.classList.remove('visible');
        poll.classList.remove('visible');
        arrow3.classList.remove('visible');
        decide.classList.remove('visible');
        why.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) {
          title.classList.add('visible');
          context.classList.add('visible');
        }
        if (s >= 2) {
          webhook.classList.add('visible');
          arrow1.classList.add('visible');
        }
        if (s >= 3) {
          wait.classList.add('visible');
          arrow2.classList.add('visible');
        }
        if (s >= 4) {
          poll.classList.add('visible');
          arrow3.classList.add('visible');
        }
        if (s >= 5) {
          decide.classList.add('visible');
        }
        if (s >= 6) {
          why.classList.add('visible');
          callout.innerHTML = 'Without OLO, Guard polls every few minutes. With OLO, Guard knows <span class="teal">instantly</span> — and still verifies before acting.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.7 — Three Restore Modes (moved up) ──
  (function() {
    var title = document.getElementById('s28-title');
    var m1 = document.getElementById('s28-m1');
    var m2 = document.getElementById('s28-m2');
    var m3 = document.getElementById('s28-m3');
    var callout = document.getElementById('s28-callout');

    slides.push({
      id: '2.7',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        m1.classList.remove('visible', 'c-blue');
        m2.classList.remove('visible', 'c-gold');
        m3.classList.remove('visible', 'c-red');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); m1.classList.add('visible', 'c-blue'); }
        if (s >= 2) m2.classList.add('visible', 'c-gold');
        if (s >= 3) m3.classList.add('visible', 'c-red');
        if (s >= 4) {
          callout.innerHTML = 'Most chains start Conservative and upgrade to Balanced once they see results. <span class="gold">Conservative \u2192 Balanced is the biggest unlock.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.8 — What Guard Does Next (Decision Tree, moved down) ──
  (function() {
    var title = document.getElementById('s27-title');
    var start = document.getElementById('s27-start');
    var c1 = document.getElementById('s27-c1');
    var c2 = document.getElementById('s27-c2');
    var c3 = document.getElementById('s27-c3');
    var result = document.getElementById('s27-result');
    var callout = document.getElementById('s27-callout');

    slides.push({
      id: '2.8',
      steps: 3,
      apply: function(s) {
        var all = [start, c1, c2, c3, result];
        for (var i = 0; i < all.length; i++) all[i].classList.remove('visible');
        title.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); start.classList.add('visible'); }
        if (s >= 2) c1.classList.add('visible');
        if (s >= 3) c2.classList.add('visible');
        if (s >= 4) c3.classList.add('visible');
        if (s >= 5) {
          result.classList.add('visible');
          callout.innerHTML = 'Three checks before Guard acts. It\'s not a blunt instrument — it <span class="green">verifies before restoring</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.9 — When Guard Backs Off: Rate Limiting ──
  (function() {
    var title = document.getElementById('s29-title');
    var problem = document.getElementById('s29-problem');
    var sequence = document.getElementById('s29-sequence');
    var windows = document.getElementById('s29-windows');
    var timeline = document.getElementById('s29-timeline');
    var overrides = document.getElementById('s29-overrides');
    var compare = document.getElementById('s29-compare');
    var callout = document.getElementById('s29-callout');

    slides.push({
      id: '2.9',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        problem.classList.remove('visible');
        sequence.classList.remove('visible');
        windows.classList.remove('visible');
        timeline.classList.remove('visible');
        overrides.classList.remove('visible');
        compare.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); problem.classList.add('visible'); }
        if (s >= 2) sequence.classList.add('visible');
        if (s >= 3) windows.classList.add('visible');
        if (s >= 4) timeline.classList.add('visible');
        if (s >= 5) overrides.classList.add('visible');
        if (s >= 6) compare.classList.add('visible');
        if (s >= 7) {
          callout.innerHTML = 'Guard doesn\'t blindly retry forever. It <span class="gold">backs off</span> when restoration isn\'t sticking, <span class="red">escalates to humans</span>, then <span class="teal">auto-resumes</span> when enough time has passed.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.10 — How Downtime % Is Calculated ──
  (function() {
    var title = document.getElementById('s210-title');
    var formula = document.getElementById('s210-formula');
    var example = document.getElementById('s210-example');
    var callout = document.getElementById('s210-callout');

    slides.push({
      id: '2.10',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        formula.classList.remove('visible');
        example.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); formula.classList.add('visible'); }
        if (s >= 2) example.classList.add('visible');
        if (s >= 3) {
          callout.innerHTML = 'Scheduled hours only. If the store is closed, that doesn\'t count as downtime. <em>Only measures time the store should have been online but wasn\'t.</em>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.10b — In The Product: Guard (Screenshot) ──
  (function() {
    var title = document.getElementById('s210b-title');
    var img = document.getElementById('s210b-img');
    var caption = document.getElementById('s210b-caption');
    var callout = document.getElementById('s210b-callout');
    slides.push({
      id: '2.10b',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        img.classList.remove('visible');
        if (caption) caption.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) {
          title.classList.add('visible');
          img.classList.add('visible');
          if (caption) caption.classList.add('visible');
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.11 — How Lost Sales Is Calculated ──
  (function() {
    var title = document.getElementById('s211-title');
    var formula = document.getElementById('s211-formula');
    var example = document.getElementById('s211-example');
    var callout = document.getElementById('s211-callout');

    slides.push({
      id: '2.11',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        formula.classList.remove('visible');
        example.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); formula.classList.add('visible'); }
        if (s >= 2) example.classList.add('visible');
        if (s >= 3) {
          callout.innerHTML = 'Not a guess. Not an industry benchmark. Based on <em>the store\'s own historical sales</em> for that specific day and hour.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.12 — How Sales Saved Is Calculated ──
  (function() {
    var title = document.getElementById('s212-title');
    var base = document.getElementById('s212-base');
    var down = document.getElementById('s212-down');
    var restore = document.getElementById('s212-restore');
    var win = document.getElementById('s212-window');
    var label = document.getElementById('s212-label');
    var callout = document.getElementById('s212-callout');

    slides.push({
      id: '2.12',
      steps: 3,
      apply: function(s) {
        var all = [base, down, restore, win, label];
        for (var i = 0; i < all.length; i++) all[i].classList.remove('visible');
        title.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); base.classList.add('visible'); down.classList.add('visible'); }
        if (s >= 2) restore.classList.add('visible');
        if (s >= 3) { win.classList.add('visible'); label.classList.add('visible'); }
        if (s >= 4) {
          callout.innerHTML = 'Not projected. Not estimated. <span class="green">Actual orders</span> that came in while the store would have been dark.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.13 — Staying Informed ──
  (function() {
    var title = document.getElementById('s213-title');
    var n1 = document.getElementById('s213-n1');
    var n2 = document.getElementById('s213-n2');
    var n3 = document.getElementById('s213-n3');
    var callout = document.getElementById('s213-callout');

    slides.push({
      id: '2.13',
      steps: 2,
      apply: function(s) {
        title.classList.remove('visible');
        n1.classList.remove('visible');
        n2.classList.remove('visible');
        n3.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); n1.classList.add('visible'); }
        if (s >= 2) n2.classList.add('visible');
        if (s >= 3) n3.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'Act from your phone. Reply <em>1</em> to snooze, Reply <em>2</em> to override. No app, no login.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 2.14 — The Guard Loop ──
  (function() {
    var title = document.getElementById('s214-title');
    var watch = document.getElementById('s214-watch');
    var fix = document.getElementById('s214-fix');
    var esc = document.getElementById('s214-esc');
    var report = document.getElementById('s214-report');
    var center = document.getElementById('s214-center');
    var a1 = document.getElementById('s214-a1');
    var a2 = document.getElementById('s214-a2');
    var a3 = document.getElementById('s214-a3');
    var a4 = document.getElementById('s214-a4');
    var callout = document.getElementById('s214-callout');

    slides.push({
      id: '2.14',
      steps: 2,
      apply: function(s) {
        var nodes = [watch, fix, esc, report, center];
        var arrows = [a1, a2, a3, a4];
        for (var i = 0; i < nodes.length; i++) nodes[i].classList.remove('visible');
        for (var j = 0; j < arrows.length; j++) arrows[j].classList.remove('visible');
        title.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';

        if (s >= 1) { title.classList.add('visible'); watch.classList.add('visible'); }
        if (s >= 2) { a1.classList.add('visible'); fix.classList.add('visible'); }
        if (s >= 3) { a2.classList.add('visible'); esc.classList.add('visible'); }
        if (s >= 4) { a3.classList.add('visible'); report.classList.add('visible'); a4.classList.add('visible'); }
        if (s >= 5) {
          center.classList.add('visible');
          callout.innerHTML = 'Watch \u2192 Fix \u2192 Escalate \u2192 Report. <span class="green">Continuous. Automatic.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();


  // ══════════════════════════════════════════════
  //  SECTION 3 — RECOVER
  // ══════════════════════════════════════════════

  // ── SLIDE 3.1 — Recover Title Card ──
  (function() {
    var title = document.getElementById('s31-title');
    slides.push({
      id: '3.1',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        if (s >= 1) title.classList.add('visible');
      }
    });
  })();

  // ── SLIDE 3.2 — Bridge: Money Still Leaks ──
  (function() {
    var title = document.getElementById('s32-title');
    var online = document.getElementById('s32-online');
    var flow = document.getElementById('s32-flow');
    var leak = document.getElementById('s32-leak');
    var callout = document.getElementById('s32-callout');
    slides.push({
      id: '3.2',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        online.classList.remove('visible');
        flow.classList.remove('visible');
        leak.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); online.classList.add('visible'); }
        if (s >= 2) flow.classList.add('visible');
        if (s >= 3) {
          leak.classList.add('visible');
          callout.innerHTML = 'Guard fixed uptime. But not every order ends well. Recover fixes the money that <span class="warn">still leaks through</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.3 — Order Tree: Fulfilled vs Unfulfilled ──
  (function() {
    var title = document.getElementById('s33-title');
    var root = document.getElementById('s33-root');
    var branches = document.getElementById('s33-branches');
    var callout = document.getElementById('s33-callout');
    slides.push({
      id: '3.3',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        root.classList.remove('visible');
        branches.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); root.classList.add('visible'); }
        if (s >= 2) {
          branches.classList.add('visible');
          callout.innerHTML = 'Most losses trace back to this split. A small portion can\'t be matched to any order — we\'ll cover those too.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.4 — Fulfilled → Inaccurate ──
  (function() {
    var title = document.getElementById('s34-title');
    var header = document.getElementById('s34-header');
    var problem = document.getElementById('s34-problem');
    var inaccurate = document.getElementById('s34-inaccurate');
    var callout = document.getElementById('s34-callout');
    slides.push({
      id: '3.4',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        header.classList.remove('visible');
        problem.classList.remove('visible');
        inaccurate.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); header.classList.add('visible'); }
        if (s >= 2) problem.classList.add('visible');
        if (s >= 3) {
          inaccurate.classList.add('visible');
          callout.innerHTML = 'Customer got food but reports a problem \u2192 <span class="warn">INACCURATE ORDER</span>. The most common loss type.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.5 — Unfulfilled → Missed vs Cancelled ──
  (function() {
    var title = document.getElementById('s35-title');
    var header = document.getElementById('s35-header');
    var branches = document.getElementById('s35-branches');
    var callout = document.getElementById('s35-callout');
    slides.push({
      id: '3.5',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        header.classList.remove('visible');
        branches.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); header.classList.add('visible'); }
        if (s >= 2) {
          branches.classList.add('visible');
          callout.innerHTML = 'Missed = order came in but was never completed. Cancelled = someone stopped it. Different root causes, different dispute arguments.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.5b — Why Do Orders Go Unfulfilled? ──
  (function() {
    var title = document.getElementById('s35b-title');
    var intro = document.getElementById('s35b-intro');
    var missed = document.getElementById('s35b-missed');
    var cancelled = document.getElementById('s35b-cancelled');
    var callout = document.getElementById('s35b-callout');
    slides.push({
      id: '3.5b',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        intro.classList.remove('visible');
        missed.classList.remove('visible');
        cancelled.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); intro.classList.add('visible'); }
        if (s >= 2) missed.classList.add('visible');
        if (s >= 3) cancelled.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'Guard prevents many missed orders. But cancellations are operational — they still happen. Either way, the financial question is the same: <span class="gold">was payment owed?</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.6 — How Does the Restaurant Lose Money? ──
  (function() {
    var title = document.getElementById('s36-title');
    var question = document.getElementById('s36-question');
    var forms = document.getElementById('s36-forms');
    var callout = document.getElementById('s36-callout');
    slides.push({
      id: '3.6',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        question.classList.remove('visible');
        forms.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); question.classList.add('visible'); }
        if (s >= 2) {
          forms.classList.add('visible');
          callout.innerHTML = 'Deducted = platform owed the restaurant, then took it out of a future payout. Never paid = order never completed, so no payment at all. Both are real losses.<br><br><span class="gold">Next: let\u2019s walk through each path and see what it\u2019s called in the data.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.7 — Fulfilled Losses: Customer Refunds ──
  (function() {
    var title = document.getElementById('s37-title');
    var bucket = document.getElementById('s37-bucket');
    var gate = document.getElementById('s37-gate');
    var callout = document.getElementById('s37-callout');
    slides.push({
      id: '3.7',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        bucket.classList.remove('visible');
        gate.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); bucket.classList.add('visible'); }
        if (s >= 2) gate.classList.add('visible');
        if (s >= 3) {
          callout.innerHTML = 'The <span class="gold">merchant_charged</span> flag determines whether an error becomes a Recover loss or stays in Order Accuracy only.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.8 — Unfulfilled Losses: Did the Restaurant Get Paid? ──
  (function() {
    var title = document.getElementById('s38-title');
    var question = document.getElementById('s38-question');
    var yes = document.getElementById('s38-yes');
    var no = document.getElementById('s38-no');
    var callout = document.getElementById('s38-callout');
    slides.push({
      id: '3.8',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        question.classList.remove('visible');
        yes.classList.remove('visible');
        no.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); question.classList.add('visible'); }
        if (s >= 2) yes.classList.add('visible');
        if (s >= 3) no.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'One = platform owed the restaurant, then <span class="warn">deducted it</span> from the payout. The other = order failed, so the restaurant was <span class="gold">never paid at all</span>. Both are losses. Both are recoverable.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.9 — Unattributed: The Orphan Bucket ──
  (function() {
    var title = document.getElementById('s39-title');
    var bucket = document.getElementById('s39-bucket');
    var callout = document.getElementById('s39-callout');
    slides.push({
      id: '3.9',
      steps: 2,
      apply: function(s) {
        title.classList.remove('visible');
        bucket.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); bucket.classList.add('visible'); }
        if (s >= 2) {
          callout.innerHTML = 'Fulfilled, unfulfilled, and now unattributed. <span class="green">Three branches</span> — that\'s the complete loss map.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.10 — The Complete Financial Map ──
  (function() {
    var title = document.getElementById('s310-title');
    var tree = document.getElementById('s310-tree');
    var formula = document.getElementById('s310-formula');
    var won = document.getElementById('s310-won');
    var callout = document.getElementById('s310-callout');
    slides.push({
      id: '3.10',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        tree.classList.remove('visible');
        formula.classList.remove('visible');
        won.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); tree.classList.add('visible'); }
        if (s >= 2) formula.classList.add('visible');
        if (s >= 3) {
          won.classList.add('visible');
          callout.innerHTML = 'Four buckets of loss. One goal: <span class="green">won_disputes</span>. That\'s what Recover exists to maximize.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.11 — Dispute Windows ──
  (function() {
    var title = document.getElementById('s311-title');
    var intro = document.getElementById('s311-intro');
    var deadline = document.getElementById('s311-deadline');
    var platforms = document.getElementById('s311-platforms');
    var expired = document.getElementById('s311-expired');
    var callout = document.getElementById('s311-callout');
    slides.push({
      id: '3.11',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        intro.classList.remove('visible');
        deadline.classList.remove('visible');
        platforms.classList.remove('visible');
        expired.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); intro.classList.add('visible'); }
        if (s >= 2) deadline.classList.add('visible');
        if (s >= 3) platforms.classList.add('visible');
        if (s >= 4) {
          expired.classList.add('visible');
          callout.innerHTML = 'Miss the window, and the charge stands forever. <span class="warn">No recourse.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.12 — Loop's Pipeline ──
  (function() {
    var title = document.getElementById('s312-title');
    var p1 = document.getElementById('s312-p1');
    var a1 = document.getElementById('s312-a1');
    var p2 = document.getElementById('s312-p2');
    var a2 = document.getElementById('s312-a2');
    var p3 = document.getElementById('s312-p3');
    var a3 = document.getElementById('s312-a3');
    var p4 = document.getElementById('s312-p4');
    var a4 = document.getElementById('s312-a4');
    var p5 = document.getElementById('s312-p5');
    var callout = document.getElementById('s312-callout');
    slides.push({
      id: '3.12',
      steps: 3,
      apply: function(s) {
        var ps = [p1, p2, p3, p4, p5];
        var as = [a1, a2, a3, a4];
        for (var i = 0; i < ps.length; i++) ps[i].classList.remove('visible');
        for (var j = 0; j < as.length; j++) as[j].classList.remove('visible');
        title.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); p1.classList.add('visible'); }
        if (s >= 2) { a1.classList.add('visible'); p2.classList.add('visible'); }
        if (s >= 3) { a2.classList.add('visible'); p3.classList.add('visible'); }
        if (s >= 4) { a3.classList.add('visible'); p4.classList.add('visible'); }
        if (s >= 5) {
          a4.classList.add('visible'); p5.classList.add('visible');
          callout.innerHTML = 'Loop identifies, checks, disputes, and tracks \u2014 <span class="green">at scale, automatically</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.13 — Enabled Gates ──
  (function() {
    var title = document.getElementById('s313-title');
    var g1 = document.getElementById('s313-g1');
    var a1 = document.getElementById('s313-a1');
    var g2 = document.getElementById('s313-g2');
    var a2 = document.getElementById('s313-a2');
    var g3 = document.getElementById('s313-g3');
    var a3 = document.getElementById('s313-a3');
    var g4 = document.getElementById('s313-g4');
    var a4 = document.getElementById('s313-a4');
    var result = document.getElementById('s313-result');
    var callout = document.getElementById('s313-callout');
    slides.push({
      id: '3.13',
      steps: 2,
      apply: function(s) {
        var gs = [g1, g2, g3, g4];
        var as = [a1, a2, a3, a4];
        for (var i = 0; i < gs.length; i++) gs[i].classList.remove('visible');
        for (var j = 0; j < as.length; j++) as[j].classList.remove('visible');
        title.classList.remove('visible');
        result.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); g1.classList.add('visible'); }
        if (s >= 2) { a1.classList.add('visible'); g2.classList.add('visible'); }
        if (s >= 3) { a2.classList.add('visible'); g3.classList.add('visible'); }
        if (s >= 4) { a3.classList.add('visible'); g4.classList.add('visible'); }
        if (s >= 5) {
          a4.classList.add('visible'); result.classList.add('visible');
          callout.innerHTML = 'Recovery seems low? First check: are all locations actually <span class="green">enabled</span>?';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.14 — Dispute Lifecycle ──
  (function() {
    var title = document.getElementById('s314-title');
    var s1 = document.getElementById('s314-s1');
    var a1 = document.getElementById('s314-a1');
    var s2 = document.getElementById('s314-s2');
    var a2 = document.getElementById('s314-a2');
    var s3 = document.getElementById('s314-s3');
    var a3 = document.getElementById('s314-a3');
    var outcomes = document.getElementById('s314-outcomes');
    var expired = document.getElementById('s314-expired');
    var callout = document.getElementById('s314-callout');
    slides.push({
      id: '3.14',
      steps: 3,
      apply: function(s) {
        var statuses = [s1, s2, s3];
        var arrows = [a1, a2, a3];
        for (var i = 0; i < statuses.length; i++) statuses[i].classList.remove('visible');
        for (var j = 0; j < arrows.length; j++) arrows[j].classList.remove('visible');
        title.classList.remove('visible');
        outcomes.classList.remove('visible');
        expired.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); s1.classList.add('visible'); }
        if (s >= 2) { a1.classList.add('visible'); s2.classList.add('visible'); }
        if (s >= 3) { a2.classList.add('visible'); s3.classList.add('visible'); }
        if (s >= 4) { a3.classList.add('visible'); outcomes.classList.add('visible'); }
        if (s >= 5) {
          expired.classList.add('visible');
          callout.innerHTML = 'Detected \u2192 Queued \u2192 Submitted \u2192 Accepted or Denied. Or the window <span class="warn">expires</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.15 — Win Rate Formula ──
  (function() {
    var title = document.getElementById('s315-title');
    var formula = document.getElementById('s315-formula');
    var num = document.getElementById('s315-num');
    var den = document.getElementById('s315-den');
    var why = document.getElementById('s315-why');
    var callout = document.getElementById('s315-callout');
    slides.push({
      id: '3.15',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        formula.classList.remove('visible');
        num.classList.remove('visible');
        den.classList.remove('visible');
        why.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); formula.classList.add('visible'); }
        if (s >= 2) num.classList.add('visible');
        if (s >= 3) den.classList.add('visible');
        if (s >= 4) {
          why.classList.add('visible');
          callout.innerHTML = 'Numerator = all categories. Denominator = inaccurate only. <span class="green">Now the formula makes sense</span> because you know all the buckets.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.15b — In The Product: Recover (Screenshot) ──
  (function() {
    var title = document.getElementById('s315b-title');
    var img = document.getElementById('s315b-img');
    var caption = document.getElementById('s315b-caption');
    var callout = document.getElementById('s315b-callout');
    slides.push({
      id: '3.15b',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        img.classList.remove('visible');
        if (caption) caption.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) {
          title.classList.add('visible');
          img.classList.add('visible');
          if (caption) caption.classList.add('visible');
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3.16 — Date Lag: Recover vs Balance (was 3.17, moved up) ──
  (function() {
    var title = document.getElementById('s317-title');
    var t1 = document.getElementById('s317-t1');
    var t2 = document.getElementById('s317-t2');
    var t3 = document.getElementById('s317-t3');
    var t4 = document.getElementById('s317-t4');
    var insight = document.getElementById('s317-insight');
    var callout = document.getElementById('s317-callout');
    slides.push({
      id: '3.17',
      steps: 5,
      apply: function(s) {
        var ts = [t1, t2, t3, t4];
        for (var i = 0; i < ts.length; i++) ts[i].classList.remove('visible');
        title.classList.remove('visible');
        insight.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); t1.classList.add('visible'); }
        if (s >= 2) t2.classList.add('visible');
        if (s >= 3) t3.classList.add('visible');
        if (s >= 4) t4.classList.add('visible');
        if (s >= 5) {
          insight.classList.add('visible');
          callout.innerHTML = 'Client says "my payout doesn\'t match Recover." This is why. <span class="gold">Same money, different dates.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();


  // ═══════════════════════════════════════════════════════════════
  // SECTION 3B — RE-ENGAGE CONTROLLERS
  // ═══════════════════════════════════════════════════════════════

  // ── SLIDE 3B.1 — Re-Engage Title Card ──
  (function() {
    var title = document.getElementById('s3b1-title');
    slides.push({
      id: '3B.1',
      steps: 1,
      apply: function(s) {
        title.classList.remove('visible');
        if (s >= 1) title.classList.add('visible');
      }
    });
  })();

  // ── SLIDE 3B.2 — The Review Problem ──
  (function() {
    var title = document.getElementById('s3b2-title');
    var volume = document.getElementById('s3b2-volume');
    var manual = document.getElementById('s3b2-manual');
    var deadlines = document.getElementById('s3b2-deadlines');
    var cost = document.getElementById('s3b2-cost');
    var callout = document.getElementById('s3b2-callout');
    slides.push({
      id: '3B.2',
      steps: 3,
      apply: function(s) {
        volume.classList.remove('visible');
        manual.classList.remove('visible');
        deadlines.classList.remove('visible');
        cost.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) volume.classList.add('visible');
        if (s >= 2) manual.classList.add('visible');
        if (s >= 3) deadlines.classList.add('visible');
        if (s >= 4) cost.classList.add('visible');
        if (s >= 5) {
          callout.innerHTML = 'Reviews are a <span class="gold">daily operational task</span> that most brands do poorly or not at all.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.3 — What Is Re-Engage? ──
  (function() {
    var def = document.getElementById('s3b3-def');
    var hook = document.getElementById('s3b3-hook');
    var result = document.getElementById('s3b3-result');
    var callout = document.getElementById('s3b3-callout');
    slides.push({
      id: '3B.3',
      steps: 3,
      apply: function(s) {
        def.classList.remove('visible');
        hook.classList.remove('visible');
        result.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) def.classList.add('visible');
        if (s >= 2) hook.classList.add('visible');
        if (s >= 3) result.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'Re-Engage turns a <span class="gold">manual nightmare</span> into an <span class="gold">automated system</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.3b — In The Product: Re-Engage (Screenshot) ──
  (function() {
    var title = document.getElementById('s3b3b-title');
    var img = document.getElementById('s3b3b-img');
    var caption = document.getElementById('s3b3b-caption');
    var callout = document.getElementById('s3b3b-callout');
    slides.push({
      id: '3B.3b',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        img.classList.remove('visible');
        if (caption) caption.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) {
          title.classList.add('visible');
          img.classList.add('visible');
          if (caption) caption.classList.add('visible');
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.4 — How Customers Rate Orders ──
  (function() {
    var ue = document.getElementById('s3b4-ue');
    var dd = document.getElementById('s3b4-dd');
    var why = document.getElementById('s3b4-why');
    var feedback = document.getElementById('s3b4-feedback');
    var callout = document.getElementById('s3b4-callout');
    slides.push({
      id: '3B.4',
      steps: 2,
      apply: function(s) {
        ue.classList.remove('visible');
        dd.classList.remove('visible');
        why.classList.remove('visible');
        feedback.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) ue.classList.add('visible');
        if (s >= 2) dd.classList.add('visible');
        if (s >= 3) why.classList.add('visible');
        if (s >= 4) feedback.classList.add('visible');
        if (s >= 5) {
          callout.innerHTML = 'Both platforms let customers leave feedback. <span class="gold">That feedback is gold</span> for personalized responses.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.5 — Two Response Types ──
  (function() {
    var ai = document.getElementById('s3b5-ai');
    var template = document.getElementById('s3b5-template');
    var when = document.getElementById('s3b5-when');
    var callout = document.getElementById('s3b5-callout');
    slides.push({
      id: '3B.5',
      steps: 3,
      apply: function(s) {
        ai.classList.remove('visible');
        template.classList.remove('visible');
        when.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) ai.classList.add('visible');
        if (s >= 2) template.classList.add('visible');
        if (s >= 3) when.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'AI for empathy and personalization. Templates for <span class="gold">speed and consistency</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.6 — AI Response: How It Works ──
  (function() {
    var inputs = document.getElementById('s3b6-inputs');
    var tone = document.getElementById('s3b6-tone');
    var constraints = document.getElementById('s3b6-constraints');
    var exNeg = document.getElementById('s3b6-ex-neg');
    var exPos = document.getElementById('s3b6-ex-pos');
    var callout = document.getElementById('s3b6-callout');
    slides.push({
      id: '3B.6',
      steps: 3,
      apply: function(s) {
        inputs.classList.remove('visible');
        tone.classList.remove('visible');
        constraints.classList.remove('visible');
        exNeg.classList.remove('visible');
        exPos.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) inputs.classList.add('visible');
        if (s >= 2) tone.classList.add('visible');
        if (s >= 3) constraints.classList.add('visible');
        if (s >= 4) exNeg.classList.add('visible');
        if (s >= 5) exPos.classList.add('visible');
        if (s >= 6) {
          callout.innerHTML = 'GPT-4 writes like a human. We <span class="gold">guide and constrain it</span> to sound like your brand.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.7 — Configuration: Matching Criteria ──
  (function() {
    var concept = document.getElementById('s3b7-concept');
    var platform = document.getElementById('s3b7-platform');
    var rating = document.getElementById('s3b7-rating');
    var customer = document.getElementById('s3b7-customer');
    var location = document.getElementById('s3b7-location');
    var callout = document.getElementById('s3b7-callout');
    slides.push({
      id: '3B.7',
      steps: 3,
      apply: function(s) {
        concept.classList.remove('visible');
        platform.classList.remove('visible');
        rating.classList.remove('visible');
        customer.classList.remove('visible');
        location.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) concept.classList.add('visible');
        if (s >= 2) platform.classList.add('visible');
        if (s >= 3) rating.classList.add('visible');
        if (s >= 4) customer.classList.add('visible');
        if (s >= 5) location.classList.add('visible');
        if (s >= 6) {
          callout.innerHTML = 'Configs are <span class="gold">filters</span>. Every review must match at least one config to get a response.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.8 — Configuration: Coupon Settings ──
  (function() {
    var intro = document.getElementById('s3b8-intro');
    var dd = document.getElementById('s3b8-dd');
    var ue = document.getElementById('s3b8-ue');
    var strategy = document.getElementById('s3b8-strategy');
    var callout = document.getElementById('s3b8-callout');
    slides.push({
      id: '3B.8',
      steps: 3,
      apply: function(s) {
        intro.classList.remove('visible');
        dd.classList.remove('visible');
        ue.classList.remove('visible');
        strategy.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) intro.classList.add('visible');
        if (s >= 2) dd.classList.add('visible');
        if (s >= 3) ue.classList.add('visible');
        if (s >= 4) strategy.classList.add('visible');
        if (s >= 5) {
          callout.innerHTML = 'Coupons are <span class="gold">optional</span>. Some clients use them for negative reviews only.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.9 — Example Configurations ──
  (function() {
    var neg = document.getElementById('s3b9-neg');
    var neutral = document.getElementById('s3b9-neutral');
    var pos = document.getElementById('s3b9-pos');
    var overlap = document.getElementById('s3b9-overlap');
    var callout = document.getElementById('s3b9-callout');
    slides.push({
      id: '3B.9',
      steps: 3,
      apply: function(s) {
        neg.classList.remove('visible');
        neutral.classList.remove('visible');
        pos.classList.remove('visible');
        overlap.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) neg.classList.add('visible');
        if (s >= 2) neutral.classList.add('visible');
        if (s >= 3) pos.classList.add('visible');
        if (s >= 4) overlap.classList.add('visible');
        if (s >= 5) {
          callout.innerHTML = 'Think of configs as <span class="gold">"if this, then that"</span> rules for reviews.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.10 — The Re-Engage Pipeline ──
  (function() {
    var ingest = document.getElementById('s3b10-ingest');
    var a1 = document.getElementById('s3b10-a1');
    var match = document.getElementById('s3b10-match');
    var a2 = document.getElementById('s3b10-a2');
    var generate = document.getElementById('s3b10-generate');
    var a3 = document.getElementById('s3b10-a3');
    var validate = document.getElementById('s3b10-validate');
    var a4 = document.getElementById('s3b10-a4');
    var queue = document.getElementById('s3b10-queue');
    var callout = document.getElementById('s3b10-callout');
    slides.push({
      id: '3B.10',
      steps: 3,
      apply: function(s) {
        ingest.classList.remove('visible');
        a1.classList.remove('visible');
        match.classList.remove('visible');
        a2.classList.remove('visible');
        generate.classList.remove('visible');
        a3.classList.remove('visible');
        validate.classList.remove('visible');
        a4.classList.remove('visible');
        queue.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) { ingest.classList.add('visible'); }
        if (s >= 2) { a1.classList.add('visible'); match.classList.add('visible'); }
        if (s >= 3) { a2.classList.add('visible'); generate.classList.add('visible'); }
        if (s >= 4) { a3.classList.add('visible'); validate.classList.add('visible'); }
        if (s >= 5) { a4.classList.add('visible'); queue.classList.add('visible'); }
        if (s >= 6) {
          callout.innerHTML = 'Every review runs through this pipeline. <span class="gold">Fully automated, human-supervised.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.11 — Re-Engagement Metrics ──
  (function() {
    var question = document.getElementById('s3b11-question');
    var rate = document.getElementById('s3b11-rate');
    var lift = document.getElementById('s3b11-lift');
    var math = document.getElementById('s3b11-math');
    var callout = document.getElementById('s3b11-callout');
    slides.push({
      id: '3B.11',
      steps: 3,
      apply: function(s) {
        question.classList.remove('visible');
        rate.classList.remove('visible');
        lift.classList.remove('visible');
        math.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) question.classList.add('visible');
        if (s >= 2) rate.classList.add('visible');
        if (s >= 3) lift.classList.add('visible');
        if (s >= 4) math.classList.add('visible');
        if (s >= 5) {
          callout.innerHTML = 'Re-engagement rate measures <span class="gold">customer win-back</span>. Voucher lift measures <span class="gold">coupon effectiveness</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.12 — Response Windows ──
  (function() {
    var dd = document.getElementById('s3b12-dd');
    var ue = document.getElementById('s3b12-ue');
    var best = document.getElementById('s3b12-best');
    var callout = document.getElementById('s3b12-callout');
    slides.push({
      id: '3B.12',
      steps: 2,
      apply: function(s) {
        dd.classList.remove('visible');
        ue.classList.remove('visible');
        best.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) dd.classList.add('visible');
        if (s >= 2) ue.classList.add('visible');
        if (s >= 3) best.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'Miss the window, <span class="gold">lose the opportunity</span>. Re-Engage responds same-day.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.13 — The Re-Engage Loop ──
  (function() {
    var capture = document.getElementById('s3b13-capture');
    var a1 = document.getElementById('s3b13-a1');
    var respond = document.getElementById('s3b13-respond');
    var a2 = document.getElementById('s3b13-a2');
    var recover = document.getElementById('s3b13-recover');
    var a3 = document.getElementById('s3b13-a3');
    var measure = document.getElementById('s3b13-measure');
    var callout = document.getElementById('s3b13-callout');
    slides.push({
      id: '3B.13',
      steps: 2,
      apply: function(s) {
        capture.classList.remove('visible');
        a1.classList.remove('visible');
        respond.classList.remove('visible');
        a2.classList.remove('visible');
        recover.classList.remove('visible');
        a3.classList.remove('visible');
        measure.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) capture.classList.add('visible');
        if (s >= 2) { a1.classList.add('visible'); respond.classList.add('visible'); }
        if (s >= 3) { a2.classList.add('visible'); recover.classList.add('visible'); }
        if (s >= 4) { a3.classList.add('visible'); measure.classList.add('visible'); }
        if (s >= 5) {
          callout.innerHTML = 'Capture → Respond → Recover → Measure. <span class="gold">The virtuous cycle of review management.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 3B.14 — What Re-Engage Covers vs Doesn't ──
  (function() {
    var covers = document.getElementById('s3b14-covers');
    var doesnt = document.getElementById('s3b14-doesnt');
    var handoff = document.getElementById('s3b14-handoff');
    var callout = document.getElementById('s3b14-callout');
    slides.push({
      id: '3B.14',
      steps: 2,
      apply: function(s) {
        covers.classList.remove('visible');
        doesnt.classList.remove('visible');
        handoff.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) covers.classList.add('visible');
        if (s >= 2) doesnt.classList.add('visible');
        if (s >= 3) handoff.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'Re-Engage handles the <span class="gold">volume problem</span>. Edge cases still need human attention.';
          callout.classList.add('visible');
        }
      }
    });
  })();


  // ═══════════════════════════════════════════════════════════════
  // SECTION 4 — SOTU CONTROLLERS
  // ═══════════════════════════════════════════════════════════════

  // ── SLIDE 4.1 — SOTU Title Card ──
  (function() {
    var icon = document.getElementById('s41-icon');
    var title = document.getElementById('s41-title');
    var sub = document.getElementById('s41-sub');
    slides.push({
      id: '4.1',
      steps: 3,
      apply: function(s) {
        icon.classList.remove('visible');
        title.classList.remove('visible');
        sub.classList.remove('visible');
        if (s >= 1) {
          icon.classList.add('visible');
          title.classList.add('visible');
          sub.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.2 — Guard and Recover Fix What Broke ──
  (function() {
    var title = document.getElementById('s42-title');
    var guard = document.getElementById('s42-guard');
    var recover = document.getElementById('s42-recover');
    var gap = document.getElementById('s42-gap');
    var sotu = document.getElementById('s42-sotu');
    slides.push({
      id: '4.2',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        guard.classList.remove('visible');
        recover.classList.remove('visible');
        gap.classList.remove('visible');
        sotu.classList.remove('visible');
        if (s >= 1) { title.classList.add('visible'); guard.classList.add('visible'); }
        if (s >= 2) recover.classList.add('visible');
        if (s >= 3) gap.classList.add('visible');
        if (s >= 4) sotu.classList.add('visible');
      }
    });
  })();

  // ── SLIDE 4.3 — Three Reports, Three Questions ──
  (function() {
    var title = document.getElementById('s43-title');
    var r1 = document.getElementById('s43-r1');
    var r2 = document.getElementById('s43-r2');
    var r3 = document.getElementById('s43-r3');
    var callout = document.getElementById('s43-callout');
    slides.push({
      id: '4.3',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        r1.classList.remove('visible');
        r2.classList.remove('visible');
        r3.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) title.classList.add('visible');
        if (s >= 2) r1.classList.add('visible');
        if (s >= 3) r2.classList.add('visible');
        if (s >= 4) {
          r3.classList.add('visible');
          callout.innerHTML = 'Rank → Compare → Diagnose. <span class="blue">Each report builds on the previous.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.3b — In The Product: Delivery Intelligence (Screenshot) ──
  (function() {
    var title = document.getElementById('s43b-title');
    var img = document.getElementById('s43b-img');
    var caption = document.getElementById('s43b-caption');
    var callout = document.getElementById('s43b-callout');
    slides.push({
      id: '4.3b',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        img.classList.remove('visible');
        if (caption) caption.classList.remove('visible');
        callout.classList.remove('visible');
        if (s >= 1) {
          title.classList.add('visible');
          img.classList.add('visible');
          if (caption) caption.classList.add('visible');
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.4 — What You Receive ──
  (function() {
    var title = document.getElementById('s44-title');
    var tree = document.getElementById('s44-tree');
    var callout = document.getElementById('s44-callout');
    slides.push({
      id: '4.4',
      steps: 2,
      apply: function(s) {
        title.classList.remove('visible');
        tree.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); tree.classList.add('visible'); }
        if (s >= 2) {
          callout.innerHTML = 'Leaderboard is for <span class="blue">leadership</span>. CSV is for <span class="teal">ops managers</span>. Diagnostic PDFs are for <span class="red">store-level action</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.5 — Four Metrics, 100 Points ──
  (function() {
    var title = document.getElementById('s45-title');
    var intro = document.getElementById('s45-intro');
    var bar1 = document.getElementById('s45-bar1');
    var bar2 = document.getElementById('s45-bar2');
    var bar3 = document.getElementById('s45-bar3');
    var bar4 = document.getElementById('s45-bar4');
    var m1 = document.getElementById('s45-m1');
    var m2 = document.getElementById('s45-m2');
    var m3 = document.getElementById('s45-m3');
    var m4 = document.getElementById('s45-m4');
    var callout = document.getElementById('s45-callout');
    slides.push({
      id: '4.5',
      steps: 5,
      apply: function(s) {
        title.classList.remove('visible');
        intro.classList.remove('visible');
        bar1.classList.remove('visible');
        bar2.classList.remove('visible');
        bar3.classList.remove('visible');
        bar4.classList.remove('visible');
        m1.classList.remove('visible');
        m2.classList.remove('visible');
        m3.classList.remove('visible');
        m4.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); intro.classList.add('visible'); }
        if (s >= 2) { bar1.classList.add('visible'); m1.classList.add('visible'); }
        if (s >= 3) { bar2.classList.add('visible'); m2.classList.add('visible'); }
        if (s >= 4) { bar3.classList.add('visible'); m3.classList.add('visible'); }
        if (s >= 5) {
          bar4.classList.add('visible'); m4.classList.add('visible');
          callout.innerHTML = 'Higher weight = more points at stake. <span class="gold">Wait Time alone is worth 40% of the score.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.6 — How Each Metric Is Calculated ──
  (function() {
    var title = document.getElementById('s46-title');
    var f1 = document.getElementById('s46-f1');
    var f2 = document.getElementById('s46-f2');
    var f3 = document.getElementById('s46-f3');
    var f4 = document.getElementById('s46-f4');
    var callout = document.getElementById('s46-callout');
    slides.push({
      id: '4.6',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        f1.classList.remove('visible');
        f2.classList.remove('visible');
        f3.classList.remove('visible');
        f4.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); f1.classList.add('visible'); }
        if (s >= 2) f2.classList.add('visible');
        if (s >= 3) f3.classList.add('visible');
        if (s >= 4) {
          f4.classList.add('visible');
          callout.innerHTML = 'Bad Ratings includes <span class="warn">2-star ratings</span>, not just 1-star. A 2-star is still a bad experience.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.7 — What the Scores Mean ──
  (function() {
    var title = document.getElementById('s47-title');
    var table = document.getElementById('s47-table');
    var callout = document.getElementById('s47-callout');
    slides.push({
      id: '4.7',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        table.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); table.classList.add('visible'); }
        if (s >= 2) {
          callout.innerHTML = 'The scoring curve rewards improvement more when you\'re struggling. <span class="green">5% → 4%</span> gives a bigger boost than <span class="teal">1% → 0.5%</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.8 — The Leaderboard ──
  (function() {
    var title = document.getElementById('s48-title');
    var desc = document.getElementById('s48-desc');
    var mock = document.getElementById('s48-mock');
    var highlights = document.getElementById('s48-highlights');
    var callout = document.getElementById('s48-callout');
    slides.push({
      id: '4.8',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        desc.classList.remove('visible');
        mock.classList.remove('visible');
        highlights.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); desc.classList.add('visible'); mock.classList.add('visible'); }
        if (s >= 2) highlights.classList.add('visible');
        if (s >= 3) {
          callout.innerHTML = 'When a client asks <span class="blue">"where do I stand?"</span> — this is the answer.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.9 — Four Peer Groups ──
  (function() {
    var title = document.getElementById('s49-title');
    var intro = document.getElementById('s49-intro');
    var p1 = document.getElementById('s49-p1');
    var p2 = document.getElementById('s49-p2');
    var p3 = document.getElementById('s49-p3');
    var p4 = document.getElementById('s49-p4');
    var callout = document.getElementById('s49-callout');
    slides.push({
      id: '4.9',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        intro.classList.remove('visible');
        p1.classList.remove('visible');
        p2.classList.remove('visible');
        p3.classList.remove('visible');
        p4.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); intro.classList.add('visible'); p1.classList.add('visible'); }
        if (s >= 2) p2.classList.add('visible');
        if (s >= 3) p3.classList.add('visible');
        if (s >= 4) {
          p4.classList.add('visible');
          callout.innerHTML = 'Segment = restaurant type, not geography. <span class="teal">McDonald\'s is compared to other QSR chains</span>, not a steakhouse.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.10 — We Don't Flag Bad Days. We Flag Bad Patterns. ──
  (function() {
    var title = document.getElementById('s410-title');
    var intro = document.getElementById('s410-intro');
    var w1 = document.getElementById('s410-w1');
    var w2 = document.getElementById('s410-w2');
    var w3 = document.getElementById('s410-w3');
    var callout = document.getElementById('s410-callout');
    slides.push({
      id: '4.10',
      steps: 5,
      apply: function(s) {
        title.classList.remove('visible');
        intro.classList.remove('visible');
        w1.classList.remove('visible');
        w2.classList.remove('visible');
        w3.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); intro.classList.add('visible'); }
        if (s >= 2) w1.classList.add('visible');
        if (s >= 3) w2.classList.add('visible');
        if (s >= 4) w3.classList.add('visible');
        if (s >= 5) {
          callout.innerHTML = 'Shorter windows use <span class="gold">higher thresholds</span> because the data is noisier. Only stores with enough volume get evaluated.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.11 — Three Flagging Rules ──
  (function() {
    var title = document.getElementById('s411-title');
    var r1 = document.getElementById('s411-r1');
    var r2 = document.getElementById('s411-r2');
    var r3 = document.getElementById('s411-r3');
    var callout = document.getElementById('s411-callout');
    slides.push({
      id: '4.11',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        r1.classList.remove('visible');
        r2.classList.remove('visible');
        r3.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); r1.classList.add('visible'); }
        if (s >= 2) r2.classList.add('visible');
        if (s >= 3) r3.classList.add('visible');
        if (s >= 4) {
          callout.innerHTML = 'Any single rule triggered = flagged. Rules escalate: <span class="blue">chronic problem</span> → <span class="gold">recent problem</span> → <span class="red">acute crisis</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.12 — Why Multipliers Increase for Shorter Windows ──
  (function() {
    var title = document.getElementById('s412-title');
    var m1 = document.getElementById('s412-m1');
    var m2 = document.getElementById('s412-m2');
    var m3 = document.getElementById('s412-m3');
    var callout = document.getElementById('s412-callout');
    slides.push({
      id: '4.12',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        m1.classList.remove('visible');
        m2.classList.remove('visible');
        m3.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); m1.classList.add('visible'); }
        if (s >= 2) m2.classList.add('visible');
        if (s >= 3) {
          m3.classList.add('visible');
          callout.innerHTML = 'Think of it like a doctor: a slightly elevated reading over <span class="blue">3 months</span> is concerning. The same reading over <span class="red">2 weeks</span> might just be a bad week.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.13 — The Diagnostic Report ──
  (function() {
    var title = document.getElementById('s413-title');
    var intro = document.getElementById('s413-intro');
    var sections = document.getElementById('s413-sections');
    var threshold = document.getElementById('s413-threshold');
    var callout = document.getElementById('s413-callout');
    slides.push({
      id: '4.13',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        intro.classList.remove('visible');
        sections.classList.remove('visible');
        threshold.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); intro.classList.add('visible'); sections.classList.add('visible'); }
        if (s >= 2) threshold.classList.add('visible');
        if (s >= 3) {
          callout.innerHTML = 'The report doesn\'t say "you have a problem." It tells you <span class="green">when</span>, <span class="teal">what type</span>, and <span class="gold">which items</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.14 — From Flag to Root Cause ──
  (function() {
    var title = document.getElementById('s414-title');
    var s1 = document.getElementById('s414-s1');
    var s2 = document.getElementById('s414-s2');
    var s3 = document.getElementById('s414-s3');
    var s4 = document.getElementById('s414-s4');
    var s5 = document.getElementById('s414-s5');
    var s6 = document.getElementById('s414-s6');
    var callout = document.getElementById('s414-callout');
    slides.push({
      id: '4.14',
      steps: 7,
      apply: function(s) {
        title.classList.remove('visible');
        s1.classList.remove('visible');
        s2.classList.remove('visible');
        s3.classList.remove('visible');
        s4.classList.remove('visible');
        s5.classList.remove('visible');
        s6.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); s1.classList.add('visible'); }
        if (s >= 2) s2.classList.add('visible');
        if (s >= 3) s3.classList.add('visible');
        if (s >= 4) s4.classList.add('visible');
        if (s >= 5) s5.classList.add('visible');
        if (s >= 6) s6.classList.add('visible');
        if (s >= 7) {
          callout.innerHTML = 'Now you know exactly what to fix. <span class="green">Retrain lunch shift on sides assembly. Check if guacamole station is positioned correctly.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.15 — The Full Flow ──
  (function() {
    var title = document.getElementById('s415-title');
    var intro = document.getElementById('s415-intro');
    var f1 = document.getElementById('s415-f1');
    var a1 = document.getElementById('s415-a1');
    var f2 = document.getElementById('s415-f2');
    var a2 = document.getElementById('s415-a2');
    var f3 = document.getElementById('s415-f3');
    var a3 = document.getElementById('s415-a3');
    var f4 = document.getElementById('s415-f4');
    var a4 = document.getElementById('s415-a4');
    var f5 = document.getElementById('s415-f5');
    var callout = document.getElementById('s415-callout');
    slides.push({
      id: '4.15',
      steps: 5,
      apply: function(s) {
        title.classList.remove('visible');
        intro.classList.remove('visible');
        f1.classList.remove('visible');
        a1.classList.remove('visible');
        f2.classList.remove('visible');
        a2.classList.remove('visible');
        f3.classList.remove('visible');
        a3.classList.remove('visible');
        f4.classList.remove('visible');
        a4.classList.remove('visible');
        f5.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); intro.classList.add('visible'); f1.classList.add('visible'); }
        if (s >= 2) { a1.classList.add('visible'); f2.classList.add('visible'); }
        if (s >= 3) { a2.classList.add('visible'); f3.classList.add('visible'); }
        if (s >= 4) { a3.classList.add('visible'); f4.classList.add('visible'); }
        if (s >= 5) {
          a4.classList.add('visible'); f5.classList.add('visible');
          callout.innerHTML = 'From <span class="gray">"there might be a problem"</span> to <span class="green">"here\'s exactly what to fix"</span> — in one report.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 4.16 — Three Actions After Every SOTU ──
  (function() {
    var title = document.getElementById('s416-title');
    var a1 = document.getElementById('s416-a1');
    var a2 = document.getElementById('s416-a2');
    var a3 = document.getElementById('s416-a3');
    var callout = document.getElementById('s416-callout');
    slides.push({
      id: '4.16',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        a1.classList.remove('visible');
        a2.classList.remove('visible');
        a3.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); a1.classList.add('visible'); }
        if (s >= 2) a2.classList.add('visible');
        if (s >= 3) {
          a3.classList.add('visible');
          callout.innerHTML = 'Review weekly with leadership. <span class="green">Distribute diagnostics within 24 hours.</span>';
          callout.classList.add('visible');
        }
      }
    });
  })();


  // ═══════════════════════════════════════════════════════════════
  // SECTION 5 — INTEGRATION & CLOSING CONTROLLERS
  // ═══════════════════════════════════════════════════════════════

  // ── SLIDE 5.1 — The Complete System ──
  (function() {
    var title = document.getElementById('s51-title');
    var eq = document.getElementById('s51-eq');
    var guard = document.getElementById('s51-guard');
    var recover = document.getElementById('s51-recover');
    var reengage = document.getElementById('s51-reengage');
    var sotu = document.getElementById('s51-sotu');
    var callout = document.getElementById('s51-callout');
    slides.push({
      id: '5.1',
      steps: 3,
      apply: function(s) {
        title.classList.remove('visible');
        eq.classList.remove('visible');
        guard.classList.remove('visible');
        recover.classList.remove('visible');
        reengage.classList.remove('visible');
        sotu.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); eq.classList.add('visible'); }
        if (s >= 2) guard.classList.add('visible');
        if (s >= 3) recover.classList.add('visible');
        if (s >= 4) reengage.classList.add('visible');
        if (s >= 5) {
          sotu.classList.add('visible');
          callout.innerHTML = 'Together → <span class="green">better metrics</span>, <span class="teal">algorithmic lift</span>, <span class="gold">customer loyalty</span>, <span class="blue">root cause visibility</span>.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 5.2 — The Flywheel ──
  (function() {
    var title = document.getElementById('s52-title');
    var virtuous = document.getElementById('s52-virtuous');
    var death = document.getElementById('s52-death');
    var callout = document.getElementById('s52-callout');
    slides.push({
      id: '5.2',
      steps: 4,
      apply: function(s) {
        title.classList.remove('visible');
        virtuous.classList.remove('visible');
        death.classList.remove('visible');
        callout.classList.remove('visible');
        callout.innerHTML = '';
        if (s >= 1) { title.classList.add('visible'); virtuous.classList.add('visible'); }
        if (s >= 2) {
          death.classList.add('visible');
          callout.innerHTML = 'Operations compound. <span class="green">Virtuous cycle</span> or <span class="red">death spiral</span>. There is no middle ground.';
          callout.classList.add('visible');
        }
      }
    });
  })();

  // ── SLIDE 5.3 — This Is Protect (Final) ──
  (function() {
    var title = document.getElementById('s53-title');
    var pillars = document.getElementById('s53-pillars');
    var tagline = document.getElementById('s53-tagline');
    slides.push({
      id: '5.3',
      steps: 2,
      apply: function(s) {
        title.classList.remove('visible');
        pillars.classList.remove('visible');
        tagline.classList.remove('visible');
        if (s >= 1) title.classList.add('visible');
        if (s >= 2) pillars.classList.add('visible');
        if (s >= 3) tagline.classList.add('visible');
      }
    });
  })();


  /* ═══════════════════════════════════════
     NAVIGATION CONTROLLER
     ═══════════════════════════════════════ */
  var slideLabel = document.getElementById('slideLabel');
  var stepCounter = document.getElementById('stepCounter');
  var navHint = document.getElementById('nav-hint');

  function render() {
    // Show/hide slides
    var allSlides = document.querySelectorAll('.slide');
    for (var i = 0; i < allSlides.length; i++) {
      allSlides[i].classList.toggle('active', i === currentSlide);
    }
    // Apply step
    var s = slides[currentSlide];
    s.apply(currentStep);

    // Add click pulse effect to newly visible elements
    var activeSlide = allSlides[currentSlide];
    if (activeSlide) {
      var visibleElements = activeSlide.querySelectorAll('.visible');
      visibleElements.forEach(function(el) {
        // Remove and re-add to restart animation
        el.classList.remove('just-clicked');
        void el.offsetWidth; // Force reflow
        el.classList.add('just-clicked');
        // Remove class after animation completes
        setTimeout(function() {
          el.classList.remove('just-clicked');
        }, 600);
      });
    }

    // Update labels
    slideLabel.textContent = s.id;
    stepCounter.textContent = currentStep + ' / ' + s.steps;
  }

  function next() {
    var s = slides[currentSlide];
    if (currentStep < s.steps) {
      currentStep++;
    } else if (currentSlide < slides.length - 1) {
      currentSlide++;
      currentStep = 0;
    }
    render();
  }

  function prev() {
    if (currentStep > 0) {
      currentStep--;
    } else if (currentSlide > 0) {
      currentSlide--;
      currentStep = slides[currentSlide].steps;
    }
    render();
  }

  // Keyboard
  document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); next(); }
    if (e.key === 'ArrowLeft') { e.preventDefault(); prev(); }
  });

  // Click
  document.addEventListener('click', function(e) {
    if (e.target.closest('.nav-hint, .step-counter, .slide-label')) return;
    // Don't advance manually when auto-play audio is running
    if (presentationStarted && autoAdvance && audioEnabled) return;
    next();
  });

  // Hide hint after first interaction
  var hintShown = true;
  document.addEventListener('keydown', function() {
    if (hintShown) { navHint.classList.add('hidden'); hintShown = false; }
  });
  document.addEventListener('click', function() {
    if (hintShown) { navHint.classList.add('hidden'); hintShown = false; }
  });

  // Initial render
  render();

  /* ═══════════════════════════════════════
     AUDIO NARRATION SYSTEM
     ═══════════════════════════════════════ */
  var audioManifest = null;
  var audioPlayer = null; // Will create fresh Audio for each playback
  var audioEnabled = false;
  var autoAdvance = true; // Auto-advance ON by default
  var presentationStarted = false;

  // Create "Click to Start" overlay
  var startOverlay = document.createElement('div');
  startOverlay.id = 'startOverlay';
  startOverlay.innerHTML = `
    <div class="start-content">
      <div class="start-icon">▶</div>
      <div class="start-text">Click anywhere to start presentation</div>
      <div class="start-hint">Audio will play automatically</div>
    </div>
  `;
  startOverlay.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    cursor: pointer;
  `;
  var startContent = document.createElement('style');
  startContent.textContent = `
    .start-content { text-align: center; color: white; }
    .start-icon { font-size: 80px; margin-bottom: 20px; opacity: 0.9; }
    .start-text { font-size: 28px; font-weight: 300; margin-bottom: 10px; }
    .start-hint { font-size: 16px; opacity: 0.6; }
  `;
  document.head.appendChild(startContent);
  document.body.appendChild(startOverlay);

  // Create audio controls UI
  var audioControls = document.createElement('div');
  audioControls.className = 'audio-controls';
  audioControls.innerHTML = `
    <button class="audio-btn active" id="audioToggle" title="Toggle Audio (A)">🔊</button>
    <button class="audio-btn active" id="audioAutoAdvance" title="Auto-Advance (V)">▶</button>
    <div class="audio-progress"><div class="audio-progress-bar" id="audioProgressBar"></div></div>
    <span class="audio-status" id="audioStatus">READY</span>
  `;
  document.body.appendChild(audioControls);

  var audioToggle = document.getElementById('audioToggle');
  var audioAutoAdvanceBtn = document.getElementById('audioAutoAdvance');
  var audioProgressBar = document.getElementById('audioProgressBar');
  var audioStatus = document.getElementById('audioStatus');

  // Load manifest
  fetch('audio/narration-manifest.json')
    .then(function(r) { return r.json(); })
    .then(function(data) {
      audioManifest = data;
      console.log('Audio manifest loaded:', data.slides.length, 'slides');
    })
    .catch(function(e) { console.log('No audio manifest found'); });

  // Get audio for current slide/step
  function getAudioForSlide(slideId, step) {
    if (!audioManifest) return null;
    var manifestSlideId = slideId.replace('.', '-').toLowerCase();
    var slide = audioManifest.slides.find(function(s) { return s.id.toLowerCase() === manifestSlideId; });
    if (!slide) return null;
    var stepData = slide.steps.find(function(st) { return st.step === step; });
    return stepData ? 'audio/files/' + stepData.audio : null;
  }

  // Wait for slide animations to complete before starting audio
  // CSS animations are 800ms (standard) or 1200ms (slow), so we wait 2000ms to be safe
  // This ensures all elements have fully appeared before the voiceover starts
  var ANIMATION_WAIT_TIME = 2000; // 2 seconds - enough for all CSS transitions to complete
  var skipAnimationWait = false; // Flag to skip animation wait for same-slide audio steps

  function waitForAnimations(callback) {
    if (skipAnimationWait) {
      console.log('Skipping animation wait (same slide audio step) - using 200ms delay');
      skipAnimationWait = false; // Reset flag
      // Small delay between same-slide audio tracks for smooth transition
      setTimeout(callback, 200);
      return;
    }
    console.log('Waiting', ANIMATION_WAIT_TIME, 'ms for animations to complete...');
    setTimeout(callback, ANIMATION_WAIT_TIME);
  }

  // Play audio for current state
  function playCurrentAudio() {
    console.log('=== playCurrentAudio called === skipAnimationWait:', skipAnimationWait, 'currentSlide:', currentSlide, 'currentAudioStep:', currentAudioStep);
    if (!audioEnabled || !audioManifest) {
      console.log('Audio disabled or no manifest, returning');
      return;
    }
    var s = slides[currentSlide];
    if (!s) {
      console.error('ERROR: No slide found at index', currentSlide);
      return;
    }

    // Visual content is already shown (currentStep = max)
    // We play audio sequentially using currentAudioStep

    // Ensure visual content is fully shown
    if (currentStep < s.steps) {
      currentStep = s.steps;
      render();
    }

    var manifestStep = currentAudioStep;
    var audioFile = getAudioForSlide(s.id, manifestStep);
    console.log('Audio lookup:', s.id, 'step', manifestStep, '->', audioFile);

    if (audioFile) {
      // Prevent duplicate loads for the same audio file
      if (window.currentAudioFile === audioFile && audioPlayer && !audioPlayer.paused) {
        console.log('Audio already playing, skipping:', audioFile);
        return;
      }
      window.currentAudioFile = audioFile;

      // Abort any in-progress fetch
      if (window.audioAbortController) {
        window.audioAbortController.abort();
      }
      window.audioAbortController = new AbortController();

      // Stop and dispose previous audio player
      if (audioPlayer) {
        audioPlayer.pause();
        audioPlayer.src = '';
        audioPlayer = null;
      }

      // Clear any existing timers and blob URLs
      clearTimeout(window.audioSafetyTimer);
      if (window.currentBlobUrl) {
        URL.revokeObjectURL(window.currentBlobUrl);
        window.currentBlobUrl = null;
      }

      // Use fetch + blob approach for reliable audio loading
      // ANIMATION SYNC: Wait for CSS transitions to actually complete before starting audio
      console.log('Waiting for animations to complete before fetching audio:', audioFile);
      audioStatus.textContent = 'ANIMATING';

      var currentFile = audioFile; // Capture for closure

      // Wait for all CSS transitions to complete
      waitForAnimations(function() {
        // Check if this is still the current file we want to play (user might have clicked ahead)
        if (window.currentAudioFile !== currentFile) {
          console.log('Audio file changed during animation delay, skipping:', currentFile);
          return;
        }
        console.log('All animations done, fetching audio:', audioFile);
        audioStatus.textContent = 'LOADING';
        fetch(audioFile, { signal: window.audioAbortController.signal })
        .then(function(response) {
          if (!response.ok) throw new Error('HTTP ' + response.status);
          return response.blob();
        })
        .then(function(blob) {
          // Check if this is still the current file we want to play
          if (window.currentAudioFile !== currentFile) {
            console.log('Audio file changed, skipping playback of:', currentFile);
            return Promise.reject(new Error('cancelled'));
          }
          console.log('Audio blob loaded:', blob.size, 'bytes');
          window.currentBlobUrl = URL.createObjectURL(blob);

          // Create fresh Audio element for each playback
          audioPlayer = new Audio(window.currentBlobUrl);

          // Set up ended event handler
          audioPlayer.addEventListener('ended', function() {
            clearTimeout(window.audioSafetyTimer);
            audioProgressBar.style.width = '0%';
            console.log('Audio ended, advancing...');
            if (autoAdvance && audioEnabled) {
              // Small delay for browser to release audio resources
              setTimeout(function() {
                advanceAndPlay();
              }, 100);
            }
          });

          // Set up error event handler for debugging
          audioPlayer.addEventListener('error', function(e) {
            console.error('Audio player error:', e, audioPlayer.error);
          });

          // Log when audio actually starts playing
          audioPlayer.addEventListener('playing', function() {
            console.log('Audio PLAYING event fired - currentTime:', audioPlayer.currentTime, 'duration:', audioPlayer.duration);
          });

          // Set up progress tracking
          audioPlayer.addEventListener('timeupdate', function() {
            if (audioPlayer && audioPlayer.duration) {
              var pct = (audioPlayer.currentTime / audioPlayer.duration) * 100;
              audioProgressBar.style.width = pct + '%';
            }
          });

          // Safety timeout - advance if audio seems stuck (25 seconds max per clip)
          window.audioSafetyTimer = setTimeout(function() {
            console.log('Safety timeout triggered, paused:', audioPlayer ? audioPlayer.paused : 'null', 'ended:', audioPlayer ? audioPlayer.ended : 'null');
            if (audioPlayer && audioPlayer.paused && !audioPlayer.ended && autoAdvance && audioEnabled) {
              console.log('Safety timeout - forcing advance');
              advanceAndPlay();
            }
          }, 25000);

          return audioPlayer.play();
        })
        .then(function() {
          console.log('Audio playing successfully');
          audioStatus.textContent = 'PLAYING';
        })
        .catch(function(e) {
          if (e.name === 'AbortError' || e.message === 'cancelled') {
            console.log('Audio load cancelled');
            return;
          }
          console.error('Audio error:', e.name, e.message, 'on slide', currentSlide, 'step', currentAudioStep);
          audioStatus.textContent = 'ERR';
          // Auto-advance on error - move to next slide entirely to avoid getting stuck
          if (autoAdvance && audioEnabled) {
            setTimeout(function() {
              // Skip to next slide on error (don't try more steps on this slide)
              if (currentSlide < slides.length - 1) {
                currentSlide++;
                var nextSlide = slides[currentSlide];
                currentStep = nextSlide.steps;
                currentAudioStep = 1;
                skipAnimationWait = false;
                console.log('Error recovery: skipping to slide', nextSlide.id);
                render();
                playCurrentAudio();
              } else {
                audioStatus.textContent = 'END';
              }
            }, 1000);
          }
        });
      }); // End of waitForAnimations callback
    } else {
      console.warn('WARNING: No audio found for slide', s.id, 'step', manifestStep, '- skipping to next slide');
      // If no audio for this step, skip to next slide entirely
      if (autoAdvance && audioEnabled) {
        setTimeout(function() {
          if (currentSlide < slides.length - 1) {
            currentSlide++;
            var nextSlide = slides[currentSlide];
            currentStep = nextSlide.steps;
            currentAudioStep = 1;
            skipAnimationWait = false;
            console.log('No audio recovery: skipping to slide', nextSlide.id);
            render();
            playCurrentAudio();
          } else {
            audioStatus.textContent = 'END';
          }
        }, 2000);  // Give time for slide to be visible even without audio
      }
    }
  }

  // Advance to next audio step or next slide
  function advanceAndPlay() {
    var s = slides[currentSlide];
    if (!s) {
      console.error('ERROR in advanceAndPlay: No slide at index', currentSlide);
      return;
    }

    // Check manifest for how many audio steps this slide has
    var manifestSlideId = s.id.replace('.', '-').toLowerCase();
    var manifestSlide = audioManifest ? audioManifest.slides.find(function(ms) { return ms.id.toLowerCase() === manifestSlideId; }) : null;
    var maxAudioSteps = manifestSlide ? manifestSlide.steps.length : s.steps;

    console.log('=== advanceAndPlay === slide:', s.id, 'currentAudioStep:', currentAudioStep, 'maxAudioSteps:', maxAudioSteps, 'manifestFound:', !!manifestSlide);

    if (currentAudioStep < maxAudioSteps) {
      // More audio steps on this slide - skip animation wait for continuous audio
      currentAudioStep++;
      skipAnimationWait = true; // Same slide, no need to wait for animations
      console.log('Advancing to next audio step:', currentAudioStep, 'on same slide');
      playCurrentAudio();
    } else if (currentSlide < slides.length - 1) {
      // Move to next slide - show ALL content, start audio from step 1
      currentSlide++;
      var nextSlide = slides[currentSlide];
      currentStep = nextSlide.steps; // Show ALL content immediately
      currentAudioStep = 1;          // Start audio from step 1
      skipAnimationWait = false;     // New slide, wait for animations
      console.log('Moving to next slide:', nextSlide.id, '(index', currentSlide, ')');
      render();
      playCurrentAudio();
    } else {
      // End of presentation
      console.log('=== END OF PRESENTATION ===');
      audioStatus.textContent = 'END';
    }
  }

  // Start presentation (called on first click)
  function startPresentation() {
    if (presentationStarted) return;
    presentationStarted = true;
    audioEnabled = true;
    startOverlay.style.display = 'none';
    audioStatus.textContent = 'PLAYING';
    // Start from beginning - show ALL content first, then narrate
    currentSlide = 0;
    var s = slides[currentSlide];
    currentStep = s.steps; // Show ALL content immediately (max step)
    currentAudioStep = 1;  // Start audio from step 1
    render();
    playCurrentAudio();
  }

  // Click overlay to start
  startOverlay.addEventListener('click', startPresentation);

  // Audio player events are now attached dynamically in playCurrentAudio()

  // Toggle audio
  function toggleAudio() {
    audioEnabled = !audioEnabled;
    if (audioEnabled) {
      audioToggle.textContent = '🔊';
      audioToggle.classList.add('active');
      audioStatus.textContent = 'ON';
      playCurrentAudio();
    } else {
      audioToggle.textContent = '🔇';
      audioToggle.classList.remove('active');
      audioStatus.textContent = 'OFF';
      if (audioPlayer) audioPlayer.pause();
    }
  }

  // Toggle auto-advance
  function toggleAutoAdvance() {
    autoAdvance = !autoAdvance;
    if (autoAdvance) {
      audioAutoAdvanceBtn.textContent = '▶';
      audioAutoAdvanceBtn.classList.add('active');
    } else {
      audioAutoAdvanceBtn.textContent = '⏸';
      audioAutoAdvanceBtn.classList.remove('active');
    }
  }

  // Button handlers
  audioToggle.addEventListener('click', function(e) {
    e.stopPropagation();
    toggleAudio();
  });

  audioAutoAdvanceBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    toggleAutoAdvance();
  });

  // Keyboard shortcuts for audio
  document.addEventListener('keydown', function(e) {
    if (e.key === 'a' || e.key === 'A') { toggleAudio(); }
    if (e.key === 'v' || e.key === 'V') { toggleAutoAdvance(); }
    if (e.key === ' ' && !presentationStarted) {
      e.preventDefault();
      startPresentation();
    }
  });

  // Override next/prev to NOT auto-play (handled by ended event)
  var originalNext = next;
  next = function() {
    originalNext();
    // Don't auto-play here - let the user control or ended event handle it
  };

  var originalPrev = prev;
  prev = function() {
    originalPrev();
    if (audioEnabled) playCurrentAudio();
  };
</script>

</body>
</html>
